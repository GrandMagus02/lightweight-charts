/*!
 * @license
 * TradingView Lightweight Charts™ v4.1.7-dev+202407091649
 * Copyright (c) 2024 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
const t={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},i={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},n={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},s={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},e={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},r={color:"#26a69a",base:0},h={color:"#2196f3"},l={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var a,o;function _(t,i){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[i];t.setLineDash(n)}function u(t,i,n,s){t.beginPath();const e=t.lineWidth%2?.5:0;t.moveTo(n,i+e),t.lineTo(s,i+e),t.stroke()}function c(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function d(t){if(void 0===t)throw new Error("Value is undefined");return t}function f(t){if(null===t)throw new Error("Value is null");return t}function v(t){return f(d(t))}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"}(a||(a={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(o||(o={}));const p={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function m(t){return t<0?0:t>255?255:Math.round(t)||0}function b(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const w=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,g=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,M=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,x=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function S(t){(t=t.toLowerCase())in p&&(t=p[t]);{const i=x.exec(t)||M.exec(t);if(i)return[m(parseInt(i[1],10)),m(parseInt(i[2],10)),m(parseInt(i[3],10)),b(i.length<5?1:parseFloat(i[4]))]}{const i=g.exec(t);if(i)return[m(parseInt(i[1],16)),m(parseInt(i[2],16)),m(parseInt(i[3],16)),1]}{const i=w.exec(t);if(i)return[m(17*parseInt(i[1],16)),m(17*parseInt(i[2],16)),m(17*parseInt(i[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function y(t){const i=S(t);return{t:`rgb(${i[0]}, ${i[1]}, ${i[2]})`,i:(n=i,.199*n[0]+.687*n[1]+.114*n[2]>160?"black":"white")};var n}class k{constructor(){this.h=[]}l(t,i,n){const s={o:t,_:i,u:!0===n};this.h.push(s)}v(t){const i=this.h.findIndex((i=>t===i.o));i>-1&&this.h.splice(i,1)}p(t){this.h=this.h.filter((i=>i._!==t))}m(t,i,n){const s=[...this.h];this.h=this.h.filter((t=>!t.u)),s.forEach((s=>s.o(t,i,n)))}M(){return this.h.length>0}S(){this.h=[]}}function C(t,...i){for(const n of i)for(const i in n)void 0!==n[i]&&("object"!=typeof n[i]||void 0===t[i]||Array.isArray(n[i])?t[i]=n[i]:C(t[i],n[i]));return t}function P(t){return"number"==typeof t&&isFinite(t)}function T(t){return"number"==typeof t&&t%1==0}function R(t){return"string"==typeof t}function D(t){return"boolean"==typeof t}function O(t){const i=t;if(!i||"object"!=typeof i)return i;let n,s,e;for(s in n=Array.isArray(i)?[]:{},i)i.hasOwnProperty(s)&&(e=i[s],n[s]=e&&"object"==typeof e?O(e):e);return n}function E(t){return null!==t}function B(t){return null===t?void 0:t}const z="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function A(t,i,n){return void 0===i&&(i=z),`${n=void 0!==n?`${n} `:""}${t}px ${i}`}class V{constructor(t){this.k={C:1,P:5,T:NaN,R:"",D:"",O:"",B:"",A:0,V:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,i=this.j(),n=this.H();return t.T===i&&t.D===n||(t.T=i,t.D=n,t.R=A(i,n),t.L=2.5/12*i,t.A=t.L,t.V=i/12*t.P,t.I=i/12*t.P,t.N=0),t.O=this.$(),t.B=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class I{constructor(){this.Y=[]}X(t){this.Y=t}K(t,i,n){this.Y.forEach((s=>{s.K(t,i,n)}))}}class L{K(t,i,n){t.useBitmapCoordinateSpace((t=>this.Z(t,i,n)))}}class N extends L{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z({context:t,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.G||null===this.G.tt)return;const s=this.G.tt,e=this.G,r=Math.max(1,Math.floor(i))%2/2,h=h=>{t.beginPath();for(let l=s.to-1;l>=s.from;--l){const s=e.it[l],a=Math.round(s.nt*i)+r,o=s.st*n,_=h*n+r;t.moveTo(a,o),t.arc(a,o,_,0,2*Math.PI)}t.fill()};e.et>0&&(t.fillStyle=e.rt,h(e.ht+e.et)),t.fillStyle=e.lt,h(e.ht)}}function F(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const W={from:0,to:1};class j{constructor(t,i){this.ut=new I,this.ct=[],this.dt=[],this.ft=new Map,this.F=t,this.vt=i,this.ut.X(this.ct),this.ft.clear()}bt(t){const i=this.F.wt();i.length!==this.ct.length&&(this.dt=i.map(F),this.ct=this.dt.map((t=>{const i=new N;return i.J(t),i})),this.ut.X(this.ct)),this.ft.clear()}gt(t){let i=this.ft.get(t);if(!i){i=this.Mt(t),this.ft.set(t,i);const n=new I;return n.X(i),n}const n=new I;return n.X(i),n}Mt(t){const i=2===this.vt.W().mode,n=this.F.wt().map(((t,i)=>[t,i])).filter((i=>t.xt().includes(i[0]))),s=this.vt.St(),e=this.F.yt();return n.map((([t,n])=>{var r;const h=this.dt[n],l=t.kt(s);if(i||null===l||!t.Ct())h.tt=null;else{const i=f(t.Pt());h.lt=l.Tt,h.ht=l.ht,h.et=l.Rt,h.it[0]._t=l._t,h.it[0].st=t.Ot().Dt(l._t,i.Et),h.rt=null!==(r=l.Bt)&&void 0!==r?r:this.F.zt(h.it[0].st/t.Ot().At()),h.it[0].ot=s,h.it[0].nt=e.Vt(s),h.tt=W}return this.ct[n]}))}}class H extends L{constructor(t){super(),this.It=t}Z({context:t,bitmapSize:i,horizontalPixelRatio:n,verticalPixelRatio:s}){if(null===this.It)return;const e=this.It.Lt.Ct,r=this.It.Nt.Ct;if(!e&&!r)return;const h=Math.round(this.It.nt*n),l=Math.round(this.It.st*s);t.lineCap="butt",e&&h>=0&&(t.lineWidth=Math.floor(this.It.Lt.et*n),t.strokeStyle=this.It.Lt.O,t.fillStyle=this.It.Lt.O,_(t,this.It.Lt.Ft),function(t,i,n,s){t.beginPath();const e=t.lineWidth%2?.5:0;t.moveTo(i+e,n),t.lineTo(i+e,s),t.stroke()}(t,h,0,i.height)),r&&l>=0&&(t.lineWidth=Math.floor(this.It.Nt.et*s),t.strokeStyle=this.It.Nt.O,t.fillStyle=this.It.Nt.O,_(t,this.It.Nt.Ft),u(t,l,0,i.width))}}class ${constructor(t){this.ft=new Map,this.Wt={Lt:{et:1,Ft:0,O:"",Ct:!1},Nt:{et:1,Ft:0,O:"",Ct:!1},nt:0,st:0},this.jt=new H(this.Wt),this.Ht=t}bt(){this.ft.clear()}gt(t){return this.Mt(t),this.jt}Mt(t){const i=this.Ht.Ct(),n=f(this.Ht.Ut()).$t().W().crosshair,s=this.Wt;if(2===n.mode)return s.Nt.Ct=!1,void(s.Lt.Ct=!1);s.Nt.Ct=i&&this.Ht.qt(t),s.Lt.Ct=i&&this.Ht.Yt(),s.Nt.et=n.horzLine.width,s.Nt.Ft=n.horzLine.style,s.Nt.O=n.horzLine.color,s.Lt.et=n.vertLine.width,s.Lt.Ft=n.vertLine.style,s.Lt.O=n.vertLine.color,s.nt=this.Ht.Xt(),s.st=this.Ht.Kt()}}function U(t,i,n,s,e,r){t.fillRect(i+r,n,s-2*r,r),t.fillRect(i+r,n+e-r,s-2*r,r),t.fillRect(i,n,r,e),t.fillRect(i+s-r,n,r,e)}function q(t,i,n,s,e,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,s,e),t.restore()}function Y(t,i,n,s,e,r){t.beginPath(),t.roundRect?t.roundRect(i,n,s,e,r):(t.lineTo(i+s-r[1],n),0!==r[1]&&t.arcTo(i+s,n,i+s,n+r[1],r[1]),t.lineTo(i+s,n+e-r[2]),0!==r[2]&&t.arcTo(i+s,n+e,i+s-r[2],n+e,r[2]),t.lineTo(i+r[3],n+e),0!==r[3]&&t.arcTo(i,n+e,i,n+e-r[3],r[3]),t.lineTo(i,n+r[0]),0!==r[0]&&t.arcTo(i,n,i+r[0],n,r[0]))}function X(t,i,n,s,e,r,h=0,l=[0,0,0,0],a=""){if(t.save(),!h||!a||a===r)return Y(t,i,n,s,e,l),t.fillStyle=r,t.fill(),void t.restore();const o=h/2;var _;Y(t,i+o,n+o,s-h,e-h,(_=-o,l.map((t=>0===t?t:t+_)))),"transparent"!==r&&(t.fillStyle=r,t.fill()),"transparent"!==a&&(t.lineWidth=h,t.strokeStyle=a,t.closePath(),t.stroke()),t.restore()}function K(t,i,n,s,e,r,h){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,e);l.addColorStop(0,r),l.addColorStop(1,h),t.fillStyle=l,t.fillRect(i,n,s,e),t.restore()}class Z{constructor(t,i){this.J(t,i)}J(t,i){this.It=t,this.Zt=i}At(t,i){return this.It.Ct?t.T+t.L+t.A:0}K(t,i,n,s){if(!this.It.Ct||0===this.It.Gt.length)return;const e=this.It.O,r=this.Zt.t,h=t.useBitmapCoordinateSpace((t=>{const h=t.context;h.font=i.R;const l=this.Jt(t,i,n,s),a=l.Qt,o=(t,i)=>{l.ti?X(h,a.ii,a.ni,a.si,a.ei,t,a.ri,[a.ht,0,0,a.ht],i):X(h,a.hi,a.ni,a.si,a.ei,t,a.ri,[0,a.ht,a.ht,0],i)};return o(r,"transparent"),this.It.li&&(h.fillStyle=e,h.fillRect(a.hi,a.ai,a.oi-a.hi,a._i)),o("transparent",r),this.It.ui&&(h.fillStyle=i.B,h.fillRect(l.ti?a.ci-a.ri:0,a.ni,a.ri,a.di-a.ni)),l}));t.useMediaCoordinateSpace((({context:t})=>{const n=h.fi;t.font=i.R,t.textAlign=h.ti?"right":"left",t.textBaseline="middle",t.fillStyle=e,t.fillText(this.It.Gt,n.pi,(n.ni+n.di)/2+n.mi)}))}Jt(t,i,n,s){var e;const{context:r,bitmapSize:h,mediaSize:l,horizontalPixelRatio:a,verticalPixelRatio:o}=t,_=this.It.li||!this.It.bi?i.P:0,u=this.It.wi?i.C:0,c=i.L+this.Zt.gi,d=i.A+this.Zt.Mi,f=i.V,v=i.I,p=this.It.Gt,m=i.T,b=n.xi(r,p),w=Math.ceil(n.Si(r,p)),g=m+c+d,M=i.C+f+v+w+_,x=Math.max(1,Math.floor(o));let S=Math.round(g*o);S%2!=x%2&&(S+=1);const y=u>0?Math.max(1,Math.floor(u*a)):0,k=Math.round(M*a),C=Math.round(_*a),P=null!==(e=this.Zt.yi)&&void 0!==e?e:this.Zt.ki,T=Math.round(P*o)-Math.floor(.5*o),R=Math.floor(T+x/2-S/2),D=R+S,O="right"===s,E=O?l.width-u:u,B=O?h.width-y:y;let z,A,V;return O?(z=B-k,A=B-C,V=E-_-f-u):(z=B+k,A=B+C,V=E+_+f),{ti:O,Qt:{ni:R,ai:T,di:D,si:k,ei:S,ht:2*a,ri:y,ii:z,hi:B,oi:A,_i:x,ci:h.width},fi:{ni:R/o,di:D/o,pi:V,mi:b}}}}class G{constructor(t){this.Ci={ki:0,t:"#000",Mi:0,gi:0},this.Pi={Gt:"",Ct:!1,li:!0,bi:!1,Bt:"",O:"#FFF",ui:!1,wi:!1},this.Ti={Gt:"",Ct:!1,li:!1,bi:!0,Bt:"",O:"#FFF",ui:!0,wi:!0},this.Ri=!0,this.Di=new(t||Z)(this.Pi,this.Ci),this.Oi=new(t||Z)(this.Ti,this.Ci)}Gt(){return this.Ei(),this.Pi.Gt}ki(){return this.Ei(),this.Ci.ki}bt(){this.Ri=!0}At(t,i=!1){return Math.max(this.Di.At(t,i),this.Oi.At(t,i))}Bi(){return this.Ci.yi||0}zi(t){this.Ci.yi=t}Ai(){return this.Ei(),this.Pi.Ct||this.Ti.Ct}Vi(){return this.Ei(),this.Pi.Ct}gt(t){return this.Ei(),this.Pi.li=this.Pi.li&&t.W().ticksVisible,this.Ti.li=this.Ti.li&&t.W().ticksVisible,this.Di.J(this.Pi,this.Ci),this.Oi.J(this.Ti,this.Ci),this.Di}Ii(){return this.Ei(),this.Di.J(this.Pi,this.Ci),this.Oi.J(this.Ti,this.Ci),this.Oi}Ei(){this.Ri&&(this.Pi.li=!0,this.Ti.li=!1,this.Li(this.Pi,this.Ti,this.Ci))}}class J extends G{constructor(t,i,n){super(),this.Ht=t,this.Ni=i,this.Fi=n}Li(t,i,n){if(t.Ct=!1,2===this.Ht.W().mode)return;const s=this.Ht.W().horzLine;if(!s.labelVisible)return;const e=this.Ni.Pt();if(!this.Ht.Ct()||this.Ni.Wi()||null===e)return;const r=y(s.labelBackgroundColor);n.t=r.t,t.O=r.i;const h=2/12*this.Ni.T();n.gi=h,n.Mi=h;const l=this.Fi(this.Ni);n.ki=l.ki,t.Gt=this.Ni.ji(l._t,e),t.Ct=!0}}const Q=/[1-9]/g;class tt{constructor(){this.It=null}J(t){this.It=t}K(t,i){if(null===this.It||!1===this.It.Ct||0===this.It.Gt.length)return;const n=t.useMediaCoordinateSpace((({context:t})=>(t.font=i.R,Math.round(i.Hi.Si(t,f(this.It).Gt,Q)))));if(n<=0)return;const s=i.$i,e=n+2*s,r=e/2,h=this.It.Ui;let l=this.It.ki,a=Math.floor(l-r)+.5;a<0?(l+=Math.abs(0-a),a=Math.floor(l-r)+.5):a+e>h&&(l-=Math.abs(h-(a+e)),a=Math.floor(l-r)+.5);const o=a+e,_=Math.ceil(0+i.C+i.P+i.L+i.T+i.A);t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:n,verticalPixelRatio:s})=>{const e=f(this.It);t.fillStyle=e.t;const r=Math.round(a*n),h=Math.round(0*s),l=Math.round(o*n),u=Math.round(_*s),c=Math.round(2*n);if(t.beginPath(),t.moveTo(r,h),t.lineTo(r,u-c),t.arcTo(r,u,r+c,u,c),t.lineTo(l-c,u),t.arcTo(l,u,l,u-c,c),t.lineTo(l,h),t.fill(),e.li){const r=Math.round(e.ki*n),l=h,a=Math.round((l+i.P)*s);t.fillStyle=e.O;const o=Math.max(1,Math.floor(n)),_=Math.floor(.5*n);t.fillRect(r-_,l,o,a-l)}})),t.useMediaCoordinateSpace((({context:t})=>{const n=f(this.It),e=0+i.C+i.P+i.L+i.T/2;t.font=i.R,t.textAlign="left",t.textBaseline="middle",t.fillStyle=n.O;const r=i.Hi.xi(t,"Apr0");t.translate(a+s,e+r),t.fillText(n.Gt,0,0)}))}}class it{constructor(t,i,n){this.Ri=!0,this.jt=new tt,this.Wt={Ct:!1,t:"#4c525e",O:"white",Gt:"",Ui:0,ki:NaN,li:!0},this.vt=t,this.qi=i,this.Fi=n}bt(){this.Ri=!0}gt(){return this.Ri&&(this.Mt(),this.Ri=!1),this.jt.J(this.Wt),this.jt}Mt(){const t=this.Wt;if(t.Ct=!1,2===this.vt.W().mode)return;const i=this.vt.W().vertLine;if(!i.labelVisible)return;const n=this.qi.yt();if(n.Wi())return;t.Ui=n.Ui();const s=this.Fi();if(null===s)return;t.ki=s.ki;const e=n.Yi(this.vt.St());t.Gt=n.Xi(f(e)),t.Ct=!0;const r=y(i.labelBackgroundColor);t.t=r.t,t.O=r.i,t.li=n.W().ticksVisible}}class nt{constructor(){this.Ki=null,this.Zi=0}Gi(){return this.Zi}Ji(t){this.Zi=t}Ot(){return this.Ki}Qi(t){this.Ki=t}tn(t){return[]}nn(){return[]}Ct(){return!0}}var st;!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"}(st||(st={}));class et extends nt{constructor(t,i){super(),this.sn=null,this.en=NaN,this.rn=0,this.hn=!0,this.ln=new Map,this.an=!1,this._n=NaN,this.un=NaN,this.cn=NaN,this.dn=NaN,this.qi=t,this.fn=i,this.vn=new j(t,this);this.pn=((t,i)=>n=>{const s=i(),e=t();if(n===f(this.sn).mn())return{_t:e,ki:s};{const t=f(n.Pt());return{_t:n.bn(s,t),ki:s}}})((()=>this.en),(()=>this.un));const n=((t,i)=>()=>{const n=this.qi.yt().wn(t()),s=i();return n&&Number.isFinite(s)?{ot:n,ki:s}:null})((()=>this.rn),(()=>this.Xt()));this.gn=new it(this,t,n),this.Mn=new $(this)}W(){return this.fn}xn(t,i){this.cn=t,this.dn=i}Sn(){this.cn=NaN,this.dn=NaN}yn(){return this.cn}kn(){return this.dn}Cn(t,i,n){this.an||(this.an=!0),this.hn=!0,this.Pn(t,i,n)}St(){return this.rn}Xt(){return this._n}Kt(){return this.un}Ct(){return this.hn}Tn(){this.hn=!1,this.Rn(),this.en=NaN,this._n=NaN,this.un=NaN,this.sn=null,this.Sn()}Dn(t){return null!==this.sn?[this.Mn,this.vn]:[]}qt(t){return t===this.sn&&this.fn.horzLine.visible}Yt(){return this.fn.vertLine.visible}On(t,i){this.hn&&this.sn===t||this.ln.clear();const n=[];return this.sn===t&&n.push(this.En(this.ln,i,this.pn)),n}nn(){return this.hn?[this.gn]:[]}Ut(){return this.sn}Bn(){this.Mn.bt(),this.ln.forEach((t=>t.bt())),this.gn.bt(),this.vn.bt()}zn(t){return t&&!t.mn().Wi()?t.mn():null}Pn(t,i,n){this.An(t,i,n)&&this.Bn()}An(t,i,n){const s=this._n,e=this.un,r=this.en,h=this.rn,l=this.sn,a=this.zn(n);this.rn=t,this._n=isNaN(t)?NaN:this.qi.yt().Vt(t),this.sn=n;const o=null!==a?a.Pt():null;return null!==a&&null!==o?(this.en=i,this.un=a.Dt(i,o)):(this.en=NaN,this.un=NaN),s!==this._n||e!==this.un||h!==this.rn||r!==this.en||l!==this.sn}Rn(){const t=this.qi.wt().map((t=>t.In().Vn())).filter(E),i=0===t.length?null:Math.max(...t);this.rn=null!==i?i:NaN}En(t,i,n){let s=t.get(i);return void 0===s&&(s=new J(this,i,n),t.set(i,s)),s}}function rt(t){return"left"===t||"right"===t}class ht{constructor(t){this.Ln=new Map,this.Nn=[],this.Fn=t}Wn(t,i){const n=function(t,i){return void 0===t?i:{jn:Math.max(t.jn,i.jn),Hn:t.Hn||i.Hn}}(this.Ln.get(t),i);this.Ln.set(t,n)}$n(){return this.Fn}Un(t){const i=this.Ln.get(t);return void 0===i?{jn:this.Fn}:{jn:Math.max(this.Fn,i.jn),Hn:i.Hn}}qn(){this.Yn(),this.Nn=[{Xn:0}]}Kn(t){this.Yn(),this.Nn=[{Xn:1,Et:t}]}Zn(t){this.Gn(),this.Nn.push({Xn:5,Et:t})}Yn(){this.Gn(),this.Nn.push({Xn:6})}Jn(){this.Yn(),this.Nn=[{Xn:4}]}Qn(t){this.Yn(),this.Nn.push({Xn:2,Et:t})}ts(t){this.Yn(),this.Nn.push({Xn:3,Et:t})}ns(){return this.Nn}ss(t){for(const i of t.Nn)this.es(i);this.Fn=Math.max(this.Fn,t.Fn),t.Ln.forEach(((t,i)=>{this.Wn(i,t)}))}static rs(){return new ht(2)}static hs(){return new ht(3)}es(t){switch(t.Xn){case 0:this.qn();break;case 1:this.Kn(t.Et);break;case 2:this.Qn(t.Et);break;case 3:this.ts(t.Et);break;case 4:this.Jn();break;case 5:this.Zn(t.Et);break;case 6:this.Gn()}}Gn(){const t=this.Nn.findIndex((t=>5===t.Xn));-1!==t&&this.Nn.splice(t,1)}}const lt=".";function at(t,i){if(!P(t))return"n/a";if(!T(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");if(0===i)return t.toString();return("0000000000000000"+t.toString()).slice(-i)}class ot{constructor(t,i){if(i||(i=1),P(t)&&T(t)||(t=100),t<0)throw new TypeError("invalid base");this.Ni=t,this.ls=i,this.os()}format(t){const i=t<0?"−":"";return t=Math.abs(t),i+this._s(t)}os(){if(this.us=0,this.Ni>0&&this.ls>0){let t=this.Ni;for(;t>1;)t/=10,this.us++}}_s(t){const i=this.Ni/this.ls;let n=Math.floor(t),s="";const e=void 0!==this.us?this.us:NaN;if(i>1){let r=+(Math.round(t*i)-n*i).toFixed(this.us);r>=i&&(r-=i,n+=1),s=lt+at(+r.toFixed(this.us)*this.ls,e)}else n=Math.round(n*i)/i,e>0&&(s=lt+at(0,e));return n.toFixed(0)+s}}class _t extends ot{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class ut{constructor(t){this.cs=t}format(t){let i="";return t<0&&(i="-",t=-t),t<995?i+this.ds(t):t<999995?i+this.ds(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.ds(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.ds(t/1e9)+"B")}ds(t){let i;const n=Math.pow(10,this.cs);return i=(t=Math.round(t*n)/n)>=1e-15&&t<1?t.toFixed(this.cs).replace(/\.?0+$/,""):String(t),i.replace(/(\.[1-9]*)0+$/,((t,i)=>i))}}function ct(t,i,n,s,e,r,h){if(0===i.length||s.from>=i.length||s.to<=0)return;const{context:l,horizontalPixelRatio:a,verticalPixelRatio:o}=t,_=i[s.from];let u=r(t,_),c=_;if(s.to-s.from<2){const i=e/2;l.beginPath();const n={nt:_.nt-i,st:_.st},s={nt:_.nt+i,st:_.st};l.moveTo(n.nt*a,n.st*o),l.lineTo(s.nt*a,s.st*o),h(t,u,n,s)}else{const e=(i,n)=>{h(t,u,c,n),l.beginPath(),u=i,c=n};let d=c;l.beginPath(),l.moveTo(_.nt*a,_.st*o);for(let h=s.from+1;h<s.to;++h){d=i[h];const s=r(t,d);switch(n){case 0:l.lineTo(d.nt*a,d.st*o);break;case 1:l.lineTo(d.nt*a,i[h-1].st*o),s!==u&&(e(s,d),l.lineTo(d.nt*a,i[h-1].st*o)),l.lineTo(d.nt*a,d.st*o);break;case 2:{const[t,n]=pt(i,h-1,h);l.bezierCurveTo(t.nt*a,t.st*o,n.nt*a,n.st*o,d.nt*a,d.st*o);break}}1!==n&&s!==u&&(e(s,d),l.moveTo(d.nt*a,d.st*o))}(c!==d||c===d&&1===n)&&h(t,u,c,d)}}const dt=6;function ft(t,i){return{nt:t.nt-i.nt,st:t.st-i.st}}function vt(t,i){return{nt:t.nt/i,st:t.st/i}}function pt(t,i,n){const s=Math.max(0,i-1),e=Math.min(t.length-1,n+1);var r,h;return[(r=t[i],h=vt(ft(t[n],t[s]),dt),{nt:r.nt+h.nt,st:r.st+h.st}),ft(t[n],vt(ft(t[e],t[i]),dt))]}function mt(t,i,n,s,e){const{context:r,horizontalPixelRatio:h,verticalPixelRatio:l}=i;r.lineTo(e.nt*h,t*l),r.lineTo(s.nt*h,t*l),r.closePath(),r.fillStyle=n,r.fill()}class bt extends L{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){var i;if(null===this.G)return;const{it:n,tt:s,fs:e,et:r,Ft:h,vs:l}=this.G,a=null!==(i=this.G.ps)&&void 0!==i?i:this.G.bs?0:t.mediaSize.height;if(null===s)return;const o=t.context;o.lineCap="butt",o.lineJoin="round",o.lineWidth=r,_(o,h),o.lineWidth=1,ct(t,n,l,s,e,this.ws.bind(this),mt.bind(null,a))}}function wt(t,i,n){return Math.min(Math.max(t,i),n)}function gt(t,i,n){return i-t<=n}function Mt(t){const i=Math.ceil(t);return i%2==0?i-1:i}class xt{gs(t,i){const n=this.Ms,{xs:s,Ss:e,ys:r,ks:h,Cs:l,ps:a}=i;if(void 0===this.Ps||void 0===n||n.xs!==s||n.Ss!==e||n.ys!==r||n.ks!==h||n.ps!==a||n.Cs!==l){const n=t.context.createLinearGradient(0,0,0,l);if(n.addColorStop(0,s),null!=a){const i=wt(a*t.verticalPixelRatio/l,0,1);n.addColorStop(i,e),n.addColorStop(i,r)}n.addColorStop(1,h),this.Ps=n,this.Ms=i}return this.Ps}}class St extends bt{constructor(){super(...arguments),this.Ts=new xt}ws(t,i){return this.Ts.gs(t,{xs:i.Rs,Ss:"",ys:"",ks:i.Ds,Cs:t.bitmapSize.height})}}function yt(t,i){const n=t.context;n.strokeStyle=i,n.stroke()}class kt extends L{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){if(null===this.G)return;const{it:i,tt:n,fs:s,vs:e,et:r,Ft:h,Os:l}=this.G;if(null===n)return;const a=t.context;a.lineCap="butt",a.lineWidth=r*t.verticalPixelRatio,_(a,h),a.lineJoin="round";const o=this.Es.bind(this);void 0!==e&&ct(t,i,e,n,s,o,yt),l&&function(t,i,n,s,e){const{horizontalPixelRatio:r,verticalPixelRatio:h,context:l}=t;let a=null;const o=Math.max(1,Math.floor(r))%2/2,_=n*h+o;for(let n=s.to-1;n>=s.from;--n){const s=i[n];if(s){const i=e(t,s);i!==a&&(l.beginPath(),null!==a&&l.fill(),l.fillStyle=i,a=i);const n=Math.round(s.nt*r)+o,u=s.st*h;l.moveTo(n,u),l.arc(n,u,_,0,2*Math.PI)}}l.fill()}(t,i,l,n,o)}}class Ct extends kt{Es(t,i){return i.lt}}function Pt(t,i,n,s,e=0,r=i.length){let h=r-e;for(;0<h;){const r=h>>1,l=e+r;s(i[l],n)===t?(e=l+1,h-=r+1):h=r}return e}const Tt=Pt.bind(null,!0),Rt=Pt.bind(null,!1);function Dt(t,i){return t.ot<i}function Ot(t,i){return i<t.ot}function Et(t,i,n){const s=i.Bs(),e=i.ci(),r=Tt(t,s,Dt),h=Rt(t,e,Ot);if(!n)return{from:r,to:h};let l=r,a=h;return r>0&&r<t.length&&t[r].ot>=s&&(l=r-1),h>0&&h<t.length&&t[h-1].ot<=e&&(a=h+1),{from:l,to:a}}class Bt{constructor(t,i,n){this.zs=!0,this.As=!0,this.Vs=!0,this.Is=[],this.Ls=null,this.Ns=t,this.Fs=i,this.Ws=n}bt(t){this.zs=!0,"data"===t&&(this.As=!0),"options"===t&&(this.Vs=!0)}gt(){return this.Ns.Ct()?(this.js(),null===this.Ls?null:this.Hs):null}$s(){this.Is=this.Is.map((t=>Object.assign(Object.assign({},t),this.Ns.qs().Us(t.ot))))}Ys(){this.Ls=null}js(){this.As&&(this.Xs(),this.As=!1),this.Vs&&(this.$s(),this.Vs=!1),this.zs&&(this.Ks(),this.zs=!1)}Ks(){const t=this.Ns.Ot(),i=this.Fs.yt();if(this.Ys(),i.Wi()||t.Wi())return;const n=i.Zs();if(null===n)return;if(0===this.Ns.In().Gs())return;const s=this.Ns.Pt();null!==s&&(this.Ls=Et(this.Is,n,this.Ws),this.Js(t,i,s.Et),this.Qs())}}class zt extends Bt{constructor(t,i){super(t,i,!0)}Js(t,i,n){i.te(this.Is,B(this.Ls)),t.ie(this.Is,n,B(this.Ls))}ne(t,i){return{ot:t,_t:i,nt:NaN,st:NaN}}Xs(){const t=this.Ns.qs();this.Is=this.Ns.In().se().map((i=>{const n=i.Et[3];return this.ee(i.re,n,t)}))}}class At extends zt{constructor(t,i){super(t,i),this.Hs=new I,this.he=new St,this.le=new Ct,this.Hs.X([this.he,this.le])}ee(t,i,n){return Object.assign(Object.assign({},this.ne(t,i)),n.Us(t))}Qs(){const t=this.Ns.W();this.he.J({vs:t.lineType,it:this.Is,Ft:t.lineStyle,et:t.lineWidth,ps:null,bs:t.invertFilledArea,tt:this.Ls,fs:this.Fs.yt().ae()}),this.le.J({vs:t.lineVisible?t.lineType:void 0,it:this.Is,Ft:t.lineStyle,et:t.lineWidth,tt:this.Ls,fs:this.Fs.yt().ae(),Os:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class Vt extends L{constructor(){super(...arguments),this.It=null,this.oe=0,this._e=0}J(t){this.It=t}Z({context:t,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.It||0===this.It.In.length||null===this.It.tt)return;if(this.oe=this.ue(i),this.oe>=2){Math.max(1,Math.floor(i))%2!=this.oe%2&&this.oe--}this._e=this.It.ce?Math.min(this.oe,Math.floor(i)):this.oe;let s=null;const e=this._e<=this.oe&&this.It.ae>=Math.floor(1.5*i);for(let r=this.It.tt.from;r<this.It.tt.to;++r){const h=this.It.In[r];s!==h.de&&(t.fillStyle=h.de,s=h.de);const l=Math.floor(.5*this._e),a=Math.round(h.nt*i),o=a-l,_=this._e,u=o+_-1,c=Math.min(h.fe,h.ve),d=Math.max(h.fe,h.ve),f=Math.round(c*n)-l,v=Math.round(d*n)+l,p=Math.max(v-f,this._e);t.fillRect(o,f,_,p);const m=Math.ceil(1.5*this.oe);if(e){if(this.It.pe){const i=a-m;let s=Math.max(f,Math.round(h.me*n)-l),e=s+_-1;e>f+p-1&&(e=f+p-1,s=e-_+1),t.fillRect(i,s,o-i,e-s+1)}const i=a+m;let s=Math.max(f,Math.round(h.be*n)-l),e=s+_-1;e>f+p-1&&(e=f+p-1,s=e-_+1),t.fillRect(u+1,s,i-u,e-s+1)}}}ue(t){const i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(f(this.It).ae,t)))}}class It extends Bt{constructor(t,i){super(t,i,!1)}Js(t,i,n){i.te(this.Is,B(this.Ls)),t.we(this.Is,n,B(this.Ls))}ge(t,i,n){return{ot:t,Me:i.Et[0],xe:i.Et[1],Se:i.Et[2],ye:i.Et[3],nt:NaN,me:NaN,fe:NaN,ve:NaN,be:NaN}}Xs(){const t=this.Ns.qs();this.Is=this.Ns.In().se().map((i=>this.ee(i.re,i,t)))}}class Lt extends It{constructor(){super(...arguments),this.Hs=new Vt}ee(t,i,n){return Object.assign(Object.assign({},this.ge(t,i,n)),n.Us(t))}Qs(){const t=this.Ns.W();this.Hs.J({In:this.Is,ae:this.Fs.yt().ae(),pe:t.openVisible,ce:t.thinBars,tt:this.Ls})}}class Nt extends bt{constructor(){super(...arguments),this.Ts=new xt}ws(t,i){const n=this.G;return this.Ts.gs(t,{xs:i.ke,Ss:i.Ce,ys:i.Pe,ks:i.Te,Cs:t.bitmapSize.height,ps:n.ps})}}class Ft extends kt{constructor(){super(...arguments),this.Re=new xt}Es(t,i){const n=this.G;return this.Re.gs(t,{xs:i.De,Ss:i.De,ys:i.Oe,ks:i.Oe,Cs:t.bitmapSize.height,ps:n.ps})}}class Wt extends zt{constructor(t,i){super(t,i),this.Hs=new I,this.Ee=new Nt,this.Be=new Ft,this.Hs.X([this.Ee,this.Be])}ee(t,i,n){return Object.assign(Object.assign({},this.ne(t,i)),n.Us(t))}Qs(){const t=this.Ns.Pt();if(null===t)return;const i=this.Ns.W(),n=this.Ns.Ot().Dt(i.baseValue.price,t.Et),s=this.Fs.yt().ae();this.Ee.J({it:this.Is,et:i.lineWidth,Ft:i.lineStyle,vs:i.lineType,ps:n,bs:!1,tt:this.Ls,fs:s}),this.Be.J({it:this.Is,et:i.lineWidth,Ft:i.lineStyle,vs:i.lineVisible?i.lineType:void 0,Os:i.pointMarkersVisible?i.pointMarkersRadius||i.lineWidth/2+2:void 0,ps:n,tt:this.Ls,fs:s})}}class jt extends L{constructor(){super(...arguments),this.It=null,this.oe=0}J(t){this.It=t}Z(t){if(null===this.It||0===this.It.In.length||null===this.It.tt)return;const{horizontalPixelRatio:i}=t;if(this.oe=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);const n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*n*i),e=Math.floor(t*i),r=Math.min(s,e);return Math.max(Math.floor(i),r)}(this.It.ae,i),this.oe>=2){Math.floor(i)%2!=this.oe%2&&this.oe--}const n=this.It.In;this.It.ze&&this.Ae(t,n,this.It.tt),this.It.ui&&this.Ve(t,n,this.It.tt);const s=this.Ie(i);(!this.It.ui||this.oe>2*s)&&this.Le(t,n,this.It.tt)}Ae(t,i,n){if(null===this.It)return;const{context:s,horizontalPixelRatio:e,verticalPixelRatio:r}=t;let h="",l=Math.min(Math.floor(e),Math.floor(this.It.ae*e));l=Math.max(Math.floor(e),Math.min(l,this.oe));const a=Math.floor(.5*l);let o=null;for(let t=n.from;t<n.to;t++){const n=i[t];n.Ne!==h&&(s.fillStyle=n.Ne,h=n.Ne);const _=Math.round(Math.min(n.me,n.be)*r),u=Math.round(Math.max(n.me,n.be)*r),c=Math.round(n.fe*r),d=Math.round(n.ve*r);let f=Math.round(e*n.nt)-a;const v=f+l-1;null!==o&&(f=Math.max(o+1,f),f=Math.min(f,v));const p=v-f+1;s.fillRect(f,c,p,_-c),s.fillRect(f,u+1,p,d-u),o=v}}Ie(t){let i=Math.floor(1*t);this.oe<=2*i&&(i=Math.floor(.5*(this.oe-1)));const n=Math.max(Math.floor(t),i);return this.oe<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n}Ve(t,i,n){if(null===this.It)return;const{context:s,horizontalPixelRatio:e,verticalPixelRatio:r}=t;let h="";const l=this.Ie(e);let a=null;for(let t=n.from;t<n.to;t++){const n=i[t];n.Fe!==h&&(s.fillStyle=n.Fe,h=n.Fe);let o=Math.round(n.nt*e)-Math.floor(.5*this.oe);const _=o+this.oe-1,u=Math.round(Math.min(n.me,n.be)*r),c=Math.round(Math.max(n.me,n.be)*r);if(null!==a&&(o=Math.max(a+1,o),o=Math.min(o,_)),this.It.ae*e>2*l)U(s,o,u,_-o+1,c-u+1,l);else{const t=_-o+1;s.fillRect(o,u,t,c-u+1)}a=_}}Le(t,i,n){if(null===this.It)return;const{context:s,horizontalPixelRatio:e,verticalPixelRatio:r}=t;let h="";const l=this.Ie(e);for(let t=n.from;t<n.to;t++){const n=i[t];let a=Math.round(Math.min(n.me,n.be)*r),o=Math.round(Math.max(n.me,n.be)*r),_=Math.round(n.nt*e)-Math.floor(.5*this.oe),u=_+this.oe-1;if(n.de!==h){const t=n.de;s.fillStyle=t,h=t}this.It.ui&&(_+=l,a+=l,u-=l,o-=l),a>o||s.fillRect(_,a,u-_+1,o-a+1)}}}class Ht extends It{constructor(){super(...arguments),this.Hs=new jt}ee(t,i,n){return Object.assign(Object.assign({},this.ge(t,i,n)),n.Us(t))}Qs(){const t=this.Ns.W();this.Hs.J({In:this.Is,ae:this.Fs.yt().ae(),ze:t.wickVisible,ui:t.borderVisible,tt:this.Ls})}}class $t{constructor(t,i){this.We=t,this.Ni=i}K(t,i,n){this.We.draw(t,this.Ni,i,n)}}class Ut extends Bt{constructor(t,i,n){super(t,i,!0),this.Mn=n,this.Hs=new $t(this.Mn.renderer(),(i=>{const n=t.Pt();return null===n?null:t.Ot().Dt(i,n.Et)}))}je(t){return this.Mn.priceValueBuilder(t)}He(t){return this.Mn.isWhitespace(t)}Xs(){const t=this.Ns.qs();this.Is=this.Ns.In().se().map((i=>Object.assign(Object.assign({ot:i.re,nt:NaN},t.Us(i.re)),{$e:i.Ue})))}Js(t,i){i.te(this.Is,B(this.Ls))}Qs(){this.Mn.update({bars:this.Is.map(qt),barSpacing:this.Fs.yt().ae(),visibleRange:this.Ls},this.Ns.W())}}function qt(t){return{x:t.nt,time:t.ot,originalData:t.$e,barColor:t.de}}class Yt extends L{constructor(){super(...arguments),this.It=null,this.qe=[]}J(t){this.It=t,this.qe=[]}Z({context:t,horizontalPixelRatio:i,verticalPixelRatio:n}){if(null===this.It||0===this.It.it.length||null===this.It.tt)return;this.qe.length||this.Ye(i);const s=Math.max(1,Math.floor(n)),e=Math.round(this.It.Xe*n)-Math.floor(s/2),r=e+s;for(let i=this.It.tt.from;i<this.It.tt.to;i++){const h=this.It.it[i],l=this.qe[i-this.It.tt.from],a=Math.round(h.st*n);let o,_;t.fillStyle=h.de,a<=e?(o=a,_=r):(o=e,_=a-Math.floor(s/2)+s),t.fillRect(l.Bs,o,l.ci-l.Bs+1,_-o)}}Ye(t){if(null===this.It||0===this.It.it.length||null===this.It.tt)return void(this.qe=[]);const i=Math.ceil(this.It.ae*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.It.ae*t)-i;this.qe=new Array(this.It.tt.to-this.It.tt.from);for(let i=this.It.tt.from;i<this.It.tt.to;i++){const s=this.It.it[i],e=Math.round(s.nt*t);let r,h;if(n%2){const t=(n-1)/2;r=e-t,h=e+t}else{const t=n/2;r=e-t,h=e+t-1}this.qe[i-this.It.tt.from]={Bs:r,ci:h,Ke:e,Ze:s.nt*t,ot:s.ot}}for(let t=this.It.tt.from+1;t<this.It.tt.to;t++){const n=this.qe[t-this.It.tt.from],s=this.qe[t-this.It.tt.from-1];n.ot===s.ot+1&&(n.Bs-s.ci!==i+1&&(s.Ke>s.Ze?s.ci=n.Bs-i-1:n.Bs=s.ci+i+1))}let s=Math.ceil(this.It.ae*t);for(let t=this.It.tt.from;t<this.It.tt.to;t++){const i=this.qe[t-this.It.tt.from];i.ci<i.Bs&&(i.ci=i.Bs);const n=i.ci-i.Bs+1;s=Math.min(n,s)}if(i>0&&s<4)for(let t=this.It.tt.from;t<this.It.tt.to;t++){const i=this.qe[t-this.It.tt.from];i.ci-i.Bs+1>s&&(i.Ke>i.Ze?i.ci-=1:i.Bs+=1)}}}class Xt extends zt{constructor(){super(...arguments),this.Hs=new Yt}ee(t,i,n){return Object.assign(Object.assign({},this.ne(t,i)),n.Us(t))}Qs(){const t={it:this.Is,ae:this.Fs.yt().ae(),tt:this.Ls,Xe:this.Ns.Ot().Dt(this.Ns.W().base,f(this.Ns.Pt()).Et)};this.Hs.J(t)}}class Kt extends zt{constructor(){super(...arguments),this.Hs=new Ct}ee(t,i,n){return Object.assign(Object.assign({},this.ne(t,i)),n.Us(t))}Qs(){const t=this.Ns.W(),i={it:this.Is,Ft:t.lineStyle,vs:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Os:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.Ls,fs:this.Fs.yt().ae()};this.Hs.J(i)}}const Zt=/[2-9]/g;class Gt{constructor(t=50){this.Ge=0,this.Je=1,this.Qe=1,this.tr={},this.ir=new Map,this.nr=t}sr(){this.Ge=0,this.ir.clear(),this.Je=1,this.Qe=1,this.tr={}}Si(t,i,n){return this.er(t,i,n).width}xi(t,i,n){const s=this.er(t,i,n);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}er(t,i,n){const s=n||Zt,e=String(i).replace(s,"0");if(this.ir.has(e))return d(this.ir.get(e)).rr;if(this.Ge===this.nr){const t=this.tr[this.Qe];delete this.tr[this.Qe],this.ir.delete(t),this.Qe++,this.Ge--}t.save(),t.textBaseline="middle";const r=t.measureText(e);return t.restore(),0===r.width&&i.length||(this.ir.set(e,{rr:r,hr:this.Je}),this.tr[this.Je]=e,this.Ge++,this.Je++),r}}class Jt{constructor(t){this.lr=null,this.k=null,this.ar="right",this._r=t}ur(t,i,n){this.lr=t,this.k=i,this.ar=n}K(t){null!==this.k&&null!==this.lr&&this.lr.K(t,this.k,this._r,this.ar)}}class Qt{constructor(t,i,n){this.cr=t,this._r=new Gt(50),this.dr=i,this.F=n,this.j=-1,this.jt=new Jt(this._r)}gt(){const t=this.F.vr(this.dr);if(null===t)return null;const i=t.pr(this.dr)?t.mr():this.dr.Ot();if(null===i)return null;const n=t.br(i);if("overlay"===n)return null;const s=this.F.wr();return s.T!==this.j&&(this.j=s.T,this._r.sr()),this.jt.ur(this.cr.Ii(),s,n),this.jt}}class ti extends L{constructor(){super(...arguments),this.It=null}J(t){this.It=t}gr(t,i){var n;if(!(null===(n=this.It)||void 0===n?void 0:n.Ct))return null;const{st:s,et:e,Mr:r}=this.It;return i>=s-e-7&&i<=s+e+7?{Sr:this.It,Mr:r}:null}Z({context:t,bitmapSize:i,horizontalPixelRatio:n,verticalPixelRatio:s}){if(null===this.It)return;if(!1===this.It.Ct)return;const e=Math.round(this.It.st*s);e<0||e>i.height||(t.lineCap="butt",t.strokeStyle=this.It.O,t.lineWidth=Math.floor(this.It.et*n),_(t,this.It.Ft),u(t,e,0,i.width))}}class ii{constructor(t){this.yr={st:0,O:"rgba(0, 0, 0, 0)",et:1,Ft:0,Ct:!1},this.kr=new ti,this.Ri=!0,this.Ns=t,this.Fs=t.$t(),this.kr.J(this.yr)}bt(){this.Ri=!0}gt(){return this.Ns.Ct()?(this.Ri&&(this.Cr(),this.Ri=!1),this.kr):null}}class ni extends ii{constructor(t){super(t)}Cr(){this.yr.Ct=!1;const t=this.Ns.Ot(),i=t.Pr().Pr;if(2!==i&&3!==i)return;const n=this.Ns.W();if(!n.baseLineVisible||!this.Ns.Ct())return;const s=this.Ns.Pt();null!==s&&(this.yr.Ct=!0,this.yr.st=t.Dt(s.Et,s.Et),this.yr.O=n.baseLineColor,this.yr.et=n.baseLineWidth,this.yr.Ft=n.baseLineStyle)}}class si extends L{constructor(){super(...arguments),this.It=null}J(t){this.It=t}Ue(){return this.It}Z({context:t,horizontalPixelRatio:i,verticalPixelRatio:n}){const s=this.It;if(null===s)return;const e=Math.max(1,Math.floor(i)),r=e%2/2,h=Math.round(s.Ze.x*i)+r,l=s.Ze.y*n;t.fillStyle=s.Tr,t.beginPath();const a=Math.max(2,1.5*s.Rr)*i;t.arc(h,l,a,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.Dr,t.beginPath(),t.arc(h,l,s.ht*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=e,t.strokeStyle=s.Or,t.beginPath(),t.arc(h,l,s.ht*i+e/2,0,2*Math.PI,!1),t.stroke()}}const ei=[{Er:0,Br:.25,zr:4,Ar:10,Vr:.25,Ir:0,Lr:.4,Nr:.8},{Er:.25,Br:.525,zr:10,Ar:14,Vr:0,Ir:0,Lr:.8,Nr:0},{Er:.525,Br:1,zr:14,Ar:14,Vr:0,Ir:0,Lr:0,Nr:0}];function ri(t,i,n,s){return function(t,i){if("transparent"===t)return t;const n=S(t),s=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${i*s})`}(t,n+(s-n)*i)}function hi(t,i){const n=t%2600/2600;let s;for(const t of ei)if(n>=t.Er&&n<=t.Br){s=t;break}c(void 0!==s,"Last price animation internal logic error");const e=(n-s.Er)/(s.Br-s.Er);return{Dr:ri(i,e,s.Vr,s.Ir),Or:ri(i,e,s.Lr,s.Nr),ht:(r=e,h=s.zr,l=s.Ar,h+(l-h)*r)};var r,h,l}class li{constructor(t){this.jt=new si,this.Ri=!0,this.Fr=!0,this.Wr=performance.now(),this.jr=this.Wr-1,this.Hr=t}$r(){this.jr=this.Wr-1,this.bt()}Ur(){if(this.bt(),2===this.Hr.W().lastPriceAnimation){const t=performance.now(),i=this.jr-t;if(i>0)return void(i<650&&(this.jr+=2600));this.Wr=t,this.jr=t+2600}}bt(){this.Ri=!0}qr(){this.Fr=!0}Ct(){return 0!==this.Hr.W().lastPriceAnimation}Yr(){switch(this.Hr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.jr}}gt(){return this.Ri?(this.Mt(),this.Ri=!1,this.Fr=!1):this.Fr&&(this.Xr(),this.Fr=!1),this.jt}Mt(){this.jt.J(null);const t=this.Hr.$t().yt(),i=t.Zs(),n=this.Hr.Pt();if(null===i||null===n)return;const s=this.Hr.Kr(!0);if(s.Zr||!i.Gr(s.re))return;const e={x:t.Vt(s.re),y:this.Hr.Ot().Dt(s._t,n.Et)},r=s.O,h=this.Hr.W().lineWidth,l=hi(this.Jr(),r);this.jt.J({Tr:r,Rr:h,Dr:l.Dr,Or:l.Or,ht:l.ht,Ze:e})}Xr(){const t=this.jt.Ue();if(null!==t){const i=hi(this.Jr(),t.Tr);t.Dr=i.Dr,t.Or=i.Or,t.ht=i.ht}}Jr(){return this.Yr()?performance.now()-this.Wr:2599}}function ai(t,i){return Mt(Math.min(Math.max(t,12),30)*i)}function oi(t,i){switch(t){case"arrowDown":case"arrowUp":return ai(i,1);case"circle":return ai(i,.8);case"square":return ai(i,.7)}}function _i(t){return function(t){const i=Math.ceil(t);return i%2!=0?i-1:i}(ai(t,1))}function ui(t){return Math.max(ai(t,.1),3)}function ci(t,i,n){return i?t:n?Math.ceil(t/2):0}function di(t,i,n,s,e){const r=oi("square",n),h=(r-1)/2,l=t-h,a=i-h;return s>=l&&s<=l+r&&e>=a&&e<=a+r}function fi(t,i,n,s){const e=(oi("arrowUp",s)-1)/2*n.Qr,r=(Mt(s/2)-1)/2*n.Qr;i.beginPath(),t?(i.moveTo(n.nt-e,n.st),i.lineTo(n.nt,n.st-e),i.lineTo(n.nt+e,n.st),i.lineTo(n.nt+r,n.st),i.lineTo(n.nt+r,n.st+e),i.lineTo(n.nt-r,n.st+e),i.lineTo(n.nt-r,n.st)):(i.moveTo(n.nt-e,n.st),i.lineTo(n.nt,n.st+e),i.lineTo(n.nt+e,n.st),i.lineTo(n.nt+r,n.st),i.lineTo(n.nt+r,n.st-e),i.lineTo(n.nt-r,n.st-e),i.lineTo(n.nt-r,n.st)),i.fill()}function vi(t,i,n,s,e,r){return di(i,n,s,e,r)}class pi extends L{constructor(){super(...arguments),this.It=null,this._r=new Gt,this.j=-1,this.H="",this.th=""}J(t){this.It=t}ur(t,i){this.j===t&&this.H===i||(this.j=t,this.H=i,this.th=A(t,i),this._r.sr())}gr(t,i){if(null===this.It||null===this.It.tt)return null;for(let n=this.It.tt.from;n<this.It.tt.to;n++){const s=this.It.it[n];if(bi(s,t,i))return{Sr:s.ih,Mr:s.Mr}}return null}Z({context:t,horizontalPixelRatio:i,verticalPixelRatio:n},s,e){if(null!==this.It&&null!==this.It.tt){t.textBaseline="middle",t.font=this.th;for(let s=this.It.tt.from;s<this.It.tt.to;s++){const e=this.It.it[s];void 0!==e.Gt&&(e.Gt.Ui=this._r.Si(t,e.Gt.nh),e.Gt.At=this.j,e.Gt.nt=e.nt-e.Gt.Ui/2),mi(e,t,i,n)}}}}function mi(t,i,n,s){i.fillStyle=t.O,void 0!==t.Gt&&function(t,i,n,s,e,r){t.save(),t.scale(e,r),t.fillText(i,n,s),t.restore()}(i,t.Gt.nh,t.Gt.nt,t.Gt.st,n,s),function(t,i,n){if(0===t.Gs)return;switch(t.sh){case"arrowDown":return void fi(!1,i,n,t.Gs);case"arrowUp":return void fi(!0,i,n,t.Gs);case"circle":return void function(t,i,n){const s=(oi("circle",n)-1)/2;t.beginPath(),t.arc(i.nt,i.st,s*i.Qr,0,2*Math.PI,!1),t.fill()}(i,n,t.Gs);case"square":return void function(t,i,n){const s=oi("square",n),e=(s-1)*i.Qr/2,r=i.nt-e,h=i.st-e;t.fillRect(r,h,s*i.Qr,s*i.Qr)}(i,n,t.Gs)}t.sh}(t,i,function(t,i,n){const s=Math.max(1,Math.floor(i))%2/2;return{nt:Math.round(t.nt*i)+s,st:t.st*n,Qr:i}}(t,n,s))}function bi(t,i,n){return!(void 0===t.Gt||!function(t,i,n,s,e,r){const h=s/2;return e>=t&&e<=t+n&&r>=i-h&&r<=i+h}(t.Gt.nt,t.Gt.st,t.Gt.Ui,t.Gt.At,i,n))||function(t,i,n){if(0===t.Gs)return!1;switch(t.sh){case"arrowDown":case"arrowUp":return vi(0,t.nt,t.st,t.Gs,i,n);case"circle":return function(t,i,n,s,e){const r=2+oi("circle",n)/2,h=t-s,l=i-e;return Math.sqrt(h*h+l*l)<=r}(t.nt,t.st,t.Gs,i,n);case"square":return di(t.nt,t.st,t.Gs,i,n)}}(t,i,n)}function wi(t,i,n,s,e,r,h,l,a){const o=P(n)?n:n.ye,_=P(n)?n:n.xe,u=P(n)?n:n.Se,c=P(i.size)?Math.max(i.size,0):1,d=_i(l.ae())*c,f=d/2;switch(t.Gs=d,i.position){case"inBar":return t.st=h.Dt(o,a),void(void 0!==t.Gt&&(t.Gt.st=t.st+f+r+.6*e));case"aboveBar":return t.st=h.Dt(_,a)-f-s.eh,void 0!==t.Gt&&(t.Gt.st=t.st-f-.6*e,s.eh+=1.2*e),void(s.eh+=d+r);case"belowBar":return t.st=h.Dt(u,a)+f+s.rh,void 0!==t.Gt&&(t.Gt.st=t.st+f+r+.6*e,s.rh+=1.2*e),void(s.rh+=d+r)}i.position}class gi{constructor(t,i){this.Ri=!0,this.hh=!0,this.ah=!0,this.oh=null,this._h=null,this.jt=new pi,this.Hr=t,this.qi=i,this.It={it:[],tt:null}}bt(t){this.Ri=!0,this.ah=!0,"data"===t&&(this.hh=!0,this._h=null)}gt(t,i){if(!this.Hr.Ct())return null;this.Ri&&this.uh();const n=this.qi.W().layout;return this.jt.ur(n.fontSize,n.fontFamily),this.jt.J(this.It),this.jt}dh(){if(this.ah){if(this.Hr.fh().length>0){const t=this.qi.yt().ae(),i=ui(t),n=1.5*_i(t)+2*i,s=this.ph();this.oh={above:ci(n,s.aboveBar,s.inBar),below:ci(n,s.belowBar,s.inBar)}}else this.oh=null;this.ah=!1}return this.oh}ph(){return null===this._h&&(this._h=this.Hr.fh().reduce(((t,i)=>(t[i.position]||(t[i.position]=!0),t)),{inBar:!1,aboveBar:!1,belowBar:!1})),this._h}uh(){const t=this.Hr.Ot(),i=this.qi.yt(),n=this.Hr.fh();this.hh&&(this.It.it=n.map((t=>({ot:t.time,nt:0,st:0,Gs:0,sh:t.shape,O:t.color,ih:t.ih,Mr:t.id,Gt:void 0}))),this.hh=!1);const s=this.qi.W().layout;this.It.tt=null;const e=i.Zs();if(null===e)return;const r=this.Hr.Pt();if(null===r)return;if(0===this.It.it.length)return;let h=NaN;const l=ui(i.ae()),a={eh:l,rh:l};this.It.tt=Et(this.It.it,e,!0);for(let e=this.It.tt.from;e<this.It.tt.to;e++){const o=n[e];o.time!==h&&(a.eh=l,a.rh=l,h=o.time);const _=this.It.it[e];_.nt=i.Vt(o.time),void 0!==o.text&&o.text.length>0&&(_.Gt={nh:o.text,nt:0,st:0,Ui:0,At:0});const u=this.Hr.mh(o.time);null!==u&&wi(_,o,u,a,s.fontSize,l,t,i,r.Et)}this.Ri=!1}}class Mi extends ii{constructor(t){super(t)}Cr(){const t=this.yr;t.Ct=!1;const i=this.Ns.W();if(!i.priceLineVisible||!this.Ns.Ct())return;const n=this.Ns.Kr(0===i.priceLineSource);n.Zr||(t.Ct=!0,t.st=n.ki,t.O=this.Ns.bh(n.O),t.et=i.priceLineWidth,t.Ft=i.priceLineStyle)}}class xi extends G{constructor(t){super(),this.Ht=t}Li(t,i,n){t.Ct=!1,i.Ct=!1;const s=this.Ht;if(!s.Ct())return;const e=s.W(),r=e.lastValueVisible,h=""!==s.wh(),l=0===e.seriesLastValueMode,a=s.Kr(!1);if(a.Zr)return;r&&(t.Gt=this.gh(a,r,l),t.Ct=0!==t.Gt.length),(h||l)&&(i.Gt=this.Mh(a,r,h,l),i.Ct=i.Gt.length>0);const o=s.bh(a.O),_=y(o);n.t=_.t,n.ki=a.ki,i.Bt=s.$t().zt(a.ki/s.Ot().At()),t.Bt=o,t.O=_.i,i.O=_.i}Mh(t,i,n,s){let e="";const r=this.Ht.wh();return n&&0!==r.length&&(e+=`${r} `),i&&s&&(e+=this.Ht.Ot().xh()?t.Sh:t.yh),e.trim()}gh(t,i,n){return i?n?this.Ht.Ot().xh()?t.yh:t.Sh:t.Gt:""}}function Si(t,i,n,s){const e=Number.isFinite(i),r=Number.isFinite(n);return e&&r?t(i,n):e||r?e?i:n:s}class yi{constructor(t,i){this.kh=t,this.Ch=i}Ph(t){return null!==t&&(this.kh===t.kh&&this.Ch===t.Ch)}Th(){return new yi(this.kh,this.Ch)}Rh(){return this.kh}Dh(){return this.Ch}Oh(){return this.Ch-this.kh}Wi(){return this.Ch===this.kh||Number.isNaN(this.Ch)||Number.isNaN(this.kh)}ss(t){return null===t?this:new yi(Si(Math.min,this.Rh(),t.Rh(),-1/0),Si(Math.max,this.Dh(),t.Dh(),1/0))}Eh(t){if(!P(t))return;if(0===this.Ch-this.kh)return;const i=.5*(this.Ch+this.kh);let n=this.Ch-i,s=this.kh-i;n*=t,s*=t,this.Ch=i+n,this.kh=i+s}Bh(t){P(t)&&(this.Ch+=t,this.kh+=t)}zh(){return{minValue:this.kh,maxValue:this.Ch}}static Ah(t){return null===t?null:new yi(t.minValue,t.maxValue)}}class ki{constructor(t,i){this.Vh=t,this.Ih=i||null}Lh(){return this.Vh}Nh(){return this.Ih}zh(){return null===this.Vh?null:{priceRange:this.Vh.zh(),margins:this.Ih||void 0}}static Ah(t){return null===t?null:new ki(yi.Ah(t.priceRange),t.margins)}}class Ci extends ii{constructor(t,i){super(t),this.Fh=i}Cr(){const t=this.yr;t.Ct=!1;const i=this.Fh.W();if(!this.Ns.Ct()||!i.lineVisible)return;const n=this.Fh.Wh();null!==n&&(t.Ct=!0,t.st=n,t.O=i.color,t.et=i.lineWidth,t.Ft=i.lineStyle,t.Mr=this.Fh.W().id)}}class Pi extends G{constructor(t,i){super(),this.Hr=t,this.Fh=i}Li(t,i,n){t.Ct=!1,i.Ct=!1;const s=this.Fh.W(),e=s.axisLabelVisible,r=""!==s.title,h=this.Hr;if(!e||!h.Ct())return;const l=this.Fh.Wh();if(null===l)return;r&&(i.Gt=s.title,i.Ct=!0),i.Bt=h.$t().zt(l/h.Ot().At()),t.Gt=this.jh(s.price),t.Ct=!0;const a=y(s.axisLabelColor||s.color);n.t=a.t;const o=s.axisLabelTextColor||a.i;t.O=o,i.O=o,n.ki=l}jh(t){const i=this.Hr.Pt();return null===i?"":this.Hr.Ot().ji(t,i.Et)}}class Ti{constructor(t,i){this.Hr=t,this.fn=i,this.Hh=new Ci(t,this),this.cr=new Pi(t,this),this.$h=new Qt(this.cr,t,t.$t())}Uh(t){C(this.fn,t),this.bt(),this.Hr.$t().qh()}W(){return this.fn}Yh(){return this.Hh}Xh(){return this.$h}Kh(){return this.cr}bt(){this.Hh.bt(),this.cr.bt()}Wh(){const t=this.Hr,i=t.Ot();if(t.$t().yt().Wi()||i.Wi())return null;const n=t.Pt();return null===n?null:i.Dt(this.fn.price,n.Et)}}class Ri extends nt{constructor(t){super(),this.qi=t}$t(){return this.qi}}const Di={Bar:(t,i,n,s)=>{var e;const r=i.upColor,h=i.downColor,l=f(t(n,s)),a=v(l.Et[0])<=v(l.Et[3]);return{de:null!==(e=l.O)&&void 0!==e?e:a?r:h}},Candlestick:(t,i,n,s)=>{var e,r,h;const l=i.upColor,a=i.downColor,o=i.borderUpColor,_=i.borderDownColor,u=i.wickUpColor,c=i.wickDownColor,d=f(t(n,s)),p=v(d.Et[0])<=v(d.Et[3]);return{de:null!==(e=d.O)&&void 0!==e?e:p?l:a,Fe:null!==(r=d.Bt)&&void 0!==r?r:p?o:_,Ne:null!==(h=d.Zh)&&void 0!==h?h:p?u:c}},Custom:(t,i,n,s)=>{var e;return{de:null!==(e=f(t(n,s)).O)&&void 0!==e?e:i.color}},Area:(t,i,n,s)=>{var e,r,h,l;const a=f(t(n,s));return{de:null!==(e=a.lt)&&void 0!==e?e:i.lineColor,lt:null!==(r=a.lt)&&void 0!==r?r:i.lineColor,Rs:null!==(h=a.Rs)&&void 0!==h?h:i.topColor,Ds:null!==(l=a.Ds)&&void 0!==l?l:i.bottomColor}},Baseline:(t,i,n,s)=>{var e,r,h,l,a,o;const _=f(t(n,s));return{de:_.Et[3]>=i.baseValue.price?i.topLineColor:i.bottomLineColor,De:null!==(e=_.De)&&void 0!==e?e:i.topLineColor,Oe:null!==(r=_.Oe)&&void 0!==r?r:i.bottomLineColor,ke:null!==(h=_.ke)&&void 0!==h?h:i.topFillColor1,Ce:null!==(l=_.Ce)&&void 0!==l?l:i.topFillColor2,Pe:null!==(a=_.Pe)&&void 0!==a?a:i.bottomFillColor1,Te:null!==(o=_.Te)&&void 0!==o?o:i.bottomFillColor2}},Line:(t,i,n,s)=>{var e,r;const h=f(t(n,s));return{de:null!==(e=h.O)&&void 0!==e?e:i.color,lt:null!==(r=h.O)&&void 0!==r?r:i.color}},Histogram:(t,i,n,s)=>{var e;return{de:null!==(e=f(t(n,s)).O)&&void 0!==e?e:i.color}}};class Oi{constructor(t){this.Gh=(t,i)=>void 0!==i?i.Et:this.Hr.In().Jh(t),this.Hr=t,this.Qh=Di[t.tl()]}Us(t,i){return this.Qh(this.Gh,this.Hr.W(),t,i)}}var Ei;!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(Ei||(Ei={}));const Bi=30;class zi{constructor(){this.il=[],this.nl=new Map,this.sl=new Map}el(){return this.Gs()>0?this.il[this.il.length-1]:null}rl(){return this.Gs()>0?this.hl(0):null}Vn(){return this.Gs()>0?this.hl(this.il.length-1):null}Gs(){return this.il.length}Wi(){return 0===this.Gs()}Gr(t){return null!==this.ll(t,0)}Jh(t){return this.al(t)}al(t,i=0){const n=this.ll(t,i);return null===n?null:Object.assign(Object.assign({},this.ol(n)),{re:this.hl(n)})}se(){return this.il}_l(t,i,n){if(this.Wi())return null;let s=null;for(const e of n){s=Ai(s,this.ul(t,i,e))}return s}J(t){this.sl.clear(),this.nl.clear(),this.il=t}hl(t){return this.il[t].re}ol(t){return this.il[t]}ll(t,i){const n=this.cl(t);if(null===n&&0!==i)switch(i){case-1:return this.dl(t);case 1:return this.fl(t);default:throw new TypeError("Unknown search mode")}return n}dl(t){let i=this.vl(t);return i>0&&(i-=1),i!==this.il.length&&this.hl(i)<t?i:null}fl(t){const i=this.pl(t);return i!==this.il.length&&t<this.hl(i)?i:null}cl(t){const i=this.vl(t);return i===this.il.length||t<this.il[i].re?null:i}vl(t){return Tt(this.il,t,((t,i)=>t.re<i))}pl(t){return Rt(this.il,t,((t,i)=>t.re>i))}ml(t,i,n){let s=null;for(let e=t;e<i;e++){const t=this.il[e].Et[n];Number.isNaN(t)||(null===s?s={bl:t,wl:t}:(t<s.bl&&(s.bl=t),t>s.wl&&(s.wl=t)))}return s}ul(t,i,n){if(this.Wi())return null;let s=null;const e=f(this.rl()),r=f(this.Vn()),h=Math.max(t,e),l=Math.min(i,r),a=Math.ceil(h/Bi)*Bi,o=Math.max(a,Math.floor(l/Bi)*Bi);{const t=this.vl(h),e=this.pl(Math.min(l,a,i));s=Ai(s,this.ml(t,e,n))}let _=this.nl.get(n);void 0===_&&(_=new Map,this.nl.set(n,_));for(let t=Math.max(a+1,h);t<o;t+=Bi){const i=Math.floor(t/Bi);let e=_.get(i);if(void 0===e){const t=this.vl(i*Bi),s=this.pl((i+1)*Bi-1);e=this.ml(t,s,n),_.set(i,e)}s=Ai(s,e)}{const t=this.vl(o),i=this.pl(l);s=Ai(s,this.ml(t,i,n))}return s}}function Ai(t,i){if(null===t)return i;if(null===i)return t;return{bl:Math.min(t.bl,i.bl),wl:Math.max(t.wl,i.wl)}}class Vi{constructor(t){this.gl=t}K(t,i,n){this.gl.draw(t)}Ml(t,i,n){var s,e;null===(e=(s=this.gl).drawBackground)||void 0===e||e.call(s,t)}}class Ii{constructor(t){this.ir=null,this.Mn=t}gt(){var t;const i=this.Mn.renderer();if(null===i)return null;if((null===(t=this.ir)||void 0===t?void 0:t.xl)===i)return this.ir.Sl;const n=new Vi(i);return this.ir={xl:i,Sl:n},n}yl(){var t,i,n;return null!==(n=null===(i=(t=this.Mn).zOrder)||void 0===i?void 0:i.call(t))&&void 0!==n?n:"normal"}}function Li(t){var i,n,s,e,r;return{Gt:t.text(),ki:t.coordinate(),yi:null===(i=t.fixedCoordinate)||void 0===i?void 0:i.call(t),O:t.textColor(),t:t.backColor(),Ct:null===(s=null===(n=t.visible)||void 0===n?void 0:n.call(t))||void 0===s||s,li:null===(r=null===(e=t.tickVisible)||void 0===e?void 0:e.call(t))||void 0===r||r}}class Ni{constructor(t,i){this.jt=new tt,this.kl=t,this.Cl=i}gt(){return this.jt.J(Object.assign({Ui:this.Cl.Ui()},Li(this.kl))),this.jt}}class Fi extends G{constructor(t,i){super(),this.kl=t,this.Ni=i}Li(t,i,n){const s=Li(this.kl);n.t=s.t,t.O=s.O;const e=2/12*this.Ni.T();n.gi=e,n.Mi=e,n.ki=s.ki,n.yi=s.yi,t.Gt=s.Gt,t.Ct=s.Ct,t.li=s.li}}class Wi{constructor(t,i){this.Pl=null,this.Tl=null,this.Rl=null,this.Dl=null,this.Ol=null,this.El=t,this.Hr=i}Bl(){return this.El}Bn(){var t,i;null===(i=(t=this.El).updateAllViews)||void 0===i||i.call(t)}Dn(){var t,i,n,s;const e=null!==(n=null===(i=(t=this.El).paneViews)||void 0===i?void 0:i.call(t))&&void 0!==n?n:[];if((null===(s=this.Pl)||void 0===s?void 0:s.xl)===e)return this.Pl.Sl;const r=e.map((t=>new Ii(t)));return this.Pl={xl:e,Sl:r},r}nn(){var t,i,n,s;const e=null!==(n=null===(i=(t=this.El).timeAxisViews)||void 0===i?void 0:i.call(t))&&void 0!==n?n:[];if((null===(s=this.Tl)||void 0===s?void 0:s.xl)===e)return this.Tl.Sl;const r=this.Hr.$t().yt(),h=e.map((t=>new Ni(t,r)));return this.Tl={xl:e,Sl:h},h}On(){var t,i,n,s;const e=null!==(n=null===(i=(t=this.El).priceAxisViews)||void 0===i?void 0:i.call(t))&&void 0!==n?n:[];if((null===(s=this.Rl)||void 0===s?void 0:s.xl)===e)return this.Rl.Sl;const r=this.Hr.Ot(),h=e.map((t=>new Fi(t,r)));return this.Rl={xl:e,Sl:h},h}zl(){var t,i,n,s;const e=null!==(n=null===(i=(t=this.El).priceAxisPaneViews)||void 0===i?void 0:i.call(t))&&void 0!==n?n:[];if((null===(s=this.Dl)||void 0===s?void 0:s.xl)===e)return this.Dl.Sl;const r=e.map((t=>new Ii(t)));return this.Dl={xl:e,Sl:r},r}Al(){var t,i,n,s;const e=null!==(n=null===(i=(t=this.El).timeAxisPaneViews)||void 0===i?void 0:i.call(t))&&void 0!==n?n:[];if((null===(s=this.Ol)||void 0===s?void 0:s.xl)===e)return this.Ol.Sl;const r=e.map((t=>new Ii(t)));return this.Ol={xl:e,Sl:r},r}Vl(t,i){var n,s,e;return null!==(e=null===(s=(n=this.El).autoscaleInfo)||void 0===s?void 0:s.call(n,t,i))&&void 0!==e?e:null}gr(t,i){var n,s,e;return null!==(e=null===(s=(n=this.El).hitTest)||void 0===s?void 0:s.call(n,t,i))&&void 0!==e?e:null}}function ji(t,i,n,s){t.forEach((t=>{i(t).forEach((t=>{t.yl()===n&&s.push(t)}))}))}function Hi(t){return t.Dn()}function $i(t){return t.zl()}function Ui(t){return t.Al()}class qi extends Ri{constructor(t,i,n,s,e){super(t),this.It=new zi,this.Hh=new Mi(this),this.Il=[],this.Ll=new ni(this),this.Nl=null,this.Fl=null,this.Wl=[],this.jl=[],this.Hl=null,this.$l=[],this.fn=i,this.Ul=n;const r=new xi(this);this.ln=[r],this.$h=new Qt(r,this,t),"Area"!==n&&"Line"!==n&&"Baseline"!==n||(this.Nl=new li(this)),this.ql(),this.Yl(e)}S(){null!==this.Hl&&clearTimeout(this.Hl)}bh(t){return this.fn.priceLineColor||t}Kr(t){const i={Zr:!0},n=this.Ot();if(this.$t().yt().Wi()||n.Wi()||this.It.Wi())return i;const s=this.$t().yt().Zs(),e=this.Pt();if(null===s||null===e)return i;let r,h;if(t){const t=this.It.el();if(null===t)return i;r=t,h=t.re}else{const t=this.It.al(s.ci(),-1);if(null===t)return i;if(r=this.It.Jh(t.re),null===r)return i;h=t.re}const l=r.Et[3],a=this.qs().Us(h,{Et:r}),o=n.Dt(l,e.Et);return{Zr:!1,_t:l,Gt:n.ji(l,e.Et),Sh:n.Xl(l),yh:n.Kl(l,e.Et),O:a.de,ki:o,re:h}}qs(){return null!==this.Fl||(this.Fl=new Oi(this)),this.Fl}W(){return this.fn}Uh(t){var i;const n=t.priceScaleId;void 0!==n&&n!==this.fn.priceScaleId&&this.$t().Zl(this,n);const s=null!==(i=this.fn.pane)&&void 0!==i?i:0;C(this.fn,t),void 0!==t.priceFormat&&(this.ql(),this.$t().Gl()),t.pane&&s!==t.pane&&this.$t().Jl(this,s,t.pane),this.$t().Ql(this),this.$t().ta(),this.Mn.bt("options")}J(t,i){this.It.J(t),this.ia(),this.Mn.bt("data"),this.vn.bt("data"),null!==this.Nl&&(i&&i.na?this.Nl.Ur():0===t.length&&this.Nl.$r());const n=this.$t().vr(this);this.$t().sa(n),this.$t().Ql(this),this.$t().ta(),this.$t().qh()}ea(t){this.Wl=t,this.ia();const i=this.$t().vr(this);this.vn.bt("data"),this.$t().sa(i),this.$t().Ql(this),this.$t().ta(),this.$t().qh()}ra(){return this.Wl}fh(){return this.jl}ha(t){const i=new Ti(this,t);return this.Il.push(i),this.$t().Ql(this),i}la(t){const i=this.Il.indexOf(t);-1!==i&&this.Il.splice(i,1),this.$t().Ql(this)}tl(){return this.Ul}Pt(){const t=this.aa();return null===t?null:{Et:t.Et[3],oa:t.ot}}aa(){const t=this.$t().yt().Zs();if(null===t)return null;const i=t.Bs();return this.It.al(i,1)}In(){return this.It}mh(t){const i=this.It.Jh(t);return null===i?null:"Bar"===this.Ul||"Candlestick"===this.Ul||"Custom"===this.Ul?{Me:i.Et[0],xe:i.Et[1],Se:i.Et[2],ye:i.Et[3]}:i.Et[3]}_a(t){const i=[];ji(this.$l,Hi,"top",i);const n=this.Nl;return null!==n&&n.Ct()?(null===this.Hl&&n.Yr()&&(this.Hl=setTimeout((()=>{this.Hl=null,this.$t().ua()}),0)),n.qr(),i.unshift(n),i):i}Dn(){const t=[];this.ca()||t.push(this.Ll),t.push(this.Mn,this.Hh,this.vn);const i=this.Il.map((t=>t.Yh()));return t.push(...i),ji(this.$l,Hi,"normal",t),t}da(){return this.fa(Hi,"bottom")}va(t){return this.fa($i,t)}pa(t){return this.fa(Ui,t)}ma(t,i){return this.$l.map((n=>n.gr(t,i))).filter((t=>null!==t))}tn(t){return[this.$h,...this.Il.map((t=>t.Xh()))]}On(t,i){var n;if(i.ba()!==(null===(n=this.Ki)||void 0===n?void 0:n.ba())&&!this.ca())return[];const s=[...this.ln];for(const t of this.Il)s.push(t.Kh());return this.$l.forEach((t=>{s.push(...t.On())})),s}nn(){const t=[];return this.$l.forEach((i=>{t.push(...i.nn())})),t}Vl(t,i){if(void 0!==this.fn.autoscaleInfoProvider){const n=this.fn.autoscaleInfoProvider((()=>{const n=this.wa(t,i);return null===n?null:n.zh()}));return ki.Ah(n)}return this.wa(t,i)}ga(){return this.fn.priceFormat.minMove}Ma(){return this.xa}Bn(){var t;this.Mn.bt(),this.vn.bt();for(const t of this.ln)t.bt();for(const t of this.Il)t.bt();this.Hh.bt(),this.Ll.bt(),null===(t=this.Nl)||void 0===t||t.bt(),this.$l.forEach((t=>t.Bn()))}Ot(){return f(super.Ot())}kt(t){if(!(("Line"===this.Ul||"Area"===this.Ul||"Baseline"===this.Ul)&&this.fn.crosshairMarkerVisible))return null;const i=this.It.Jh(t);if(null===i)return null;return{_t:i.Et[3],ht:this.Sa(),Bt:this.ya(),Rt:this.ka(),Tt:this.Ca(t)}}wh(){return this.fn.title}Ct(){return this.fn.visible}Pa(t){this.$l.push(new Wi(t,this))}Ta(t){this.$l=this.$l.filter((i=>i.Bl()!==t))}Ra(){if(this.Mn instanceof Ut!=!1)return t=>this.Mn.je(t)}Da(){if(this.Mn instanceof Ut!=!1)return t=>this.Mn.He(t)}ca(){return!rt(this.Ot().ba())}wa(t,i){if(!T(t)||!T(i)||this.It.Wi())return null;const n="Line"===this.Ul||"Area"===this.Ul||"Baseline"===this.Ul||"Histogram"===this.Ul?[3]:[2,1],s=this.It._l(t,i,n);let e=null!==s?new yi(s.bl,s.wl):null;if("Histogram"===this.tl()){const t=this.fn.base,i=new yi(t,t);e=null!==e?e.ss(i):i}let r=this.vn.dh();return this.$l.forEach((n=>{const s=n.Vl(t,i);if(null==s?void 0:s.priceRange){const t=new yi(s.priceRange.minValue,s.priceRange.maxValue);e=null!==e?e.ss(t):t}var h,l,a,o;(null==s?void 0:s.margins)&&(h=r,l=s.margins,r={above:Math.max(null!==(a=null==h?void 0:h.above)&&void 0!==a?a:0,l.above),below:Math.max(null!==(o=null==h?void 0:h.below)&&void 0!==o?o:0,l.below)})})),new ki(e,r)}Sa(){switch(this.Ul){case"Line":case"Area":case"Baseline":return this.fn.crosshairMarkerRadius}return 0}ya(){switch(this.Ul){case"Line":case"Area":case"Baseline":{const t=this.fn.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}ka(){switch(this.Ul){case"Line":case"Area":case"Baseline":return this.fn.crosshairMarkerBorderWidth}return 0}Ca(t){switch(this.Ul){case"Line":case"Area":case"Baseline":{const t=this.fn.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.qs().Us(t).de}ql(){switch(this.fn.priceFormat.type){case"custom":this.xa={format:this.fn.priceFormat.formatter};break;case"volume":this.xa=new ut(this.fn.priceFormat.precision);break;case"percent":this.xa=new _t(this.fn.priceFormat.precision);break;default:{const t=Math.pow(10,this.fn.priceFormat.precision);this.xa=new ot(t,this.fn.priceFormat.minMove*t)}}null!==this.Ki&&this.Ki.Oa()}ia(){const t=this.$t().yt();if(!t.Ea()||this.It.Wi())return void(this.jl=[]);const i=f(this.It.rl());this.jl=this.Wl.map(((n,s)=>{const e=f(t.Ba(n.time,!0)),r=e<i?1:-1;return{time:f(this.It.al(e,r)).re,position:n.position,shape:n.shape,color:n.color,id:n.id,ih:s,text:n.text,size:n.size,originalTime:n.originalTime}}))}Yl(t){switch(this.vn=new gi(this,this.$t()),this.Ul){case"Bar":this.Mn=new Lt(this,this.$t());break;case"Candlestick":this.Mn=new Ht(this,this.$t());break;case"Line":this.Mn=new Kt(this,this.$t());break;case"Custom":this.Mn=new Ut(this,this.$t(),d(t));break;case"Area":this.Mn=new At(this,this.$t());break;case"Baseline":this.Mn=new Wt(this,this.$t());break;case"Histogram":this.Mn=new Xt(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.Ul)}}fa(t,i){const n=[];return ji(this.$l,t,i,n),n}}class Yi{constructor(t){this.fn=t}za(t,i,n){let s=t;if(0===this.fn.mode)return s;const e=n.mn(),r=e.Pt();if(null===r)return s;const h=e.Dt(t,r),l=n.xt().filter((t=>t instanceof qi)).reduce(((t,s)=>{if(n.pr(s)||!s.Ct())return t;const e=s.Ot(),r=s.In();if(e.Wi()||!r.Gr(i))return t;const h=r.Jh(i);if(null===h)return t;const l=v(s.Pt());return t.concat([e.Dt(h.Et[3],l.Et)])}),[]);if(0===l.length)return s;l.sort(((t,i)=>Math.abs(t-h)-Math.abs(i-h)));const a=l[0];return s=e.bn(a,r),s}}class Xi extends L{constructor(){super(...arguments),this.It=null}J(t){this.It=t}Z({context:t,bitmapSize:i,horizontalPixelRatio:n,verticalPixelRatio:s}){if(null===this.It)return;const e=Math.max(1,Math.floor(n));t.lineWidth=e,function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(()=>{const r=f(this.It);if(r.Aa){t.strokeStyle=r.Va,_(t,r.Ia),t.beginPath();for(const s of r.La){const r=Math.round(s.Na*n);t.moveTo(r,-e),t.lineTo(r,i.height+e)}t.stroke()}if(r.Fa){t.strokeStyle=r.Wa,_(t,r.ja),t.beginPath();for(const n of r.Ha){const r=Math.round(n.Na*s);t.moveTo(-e,r),t.lineTo(i.width+e,r)}t.stroke()}}))}}class Ki{constructor(t){this.jt=new Xi,this.Ri=!0,this.sn=t}bt(){this.Ri=!0}gt(){if(this.Ri){const t=this.sn.$t().W().grid,i={Fa:t.horzLines.visible,Aa:t.vertLines.visible,Wa:t.horzLines.color,Va:t.vertLines.color,ja:t.horzLines.style,Ia:t.vertLines.style,Ha:this.sn.mn().$a(),La:(this.sn.$t().yt().$a()||[]).map((t=>({Na:t.coord})))};this.jt.J(i),this.Ri=!1}return this.jt}}class Zi{constructor(t){this.Mn=new Ki(t)}Yh(){return this.Mn}}const Gi={Ua:4,qa:1e-4};function Ji(t,i){const n=100*(t-i)/i;return i<0?-n:n}function Qi(t,i){const n=Ji(t.Rh(),i),s=Ji(t.Dh(),i);return new yi(n,s)}function tn(t,i){const n=100*(t-i)/i+100;return i<0?-n:n}function nn(t,i){const n=tn(t.Rh(),i),s=tn(t.Dh(),i);return new yi(n,s)}function sn(t,i){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.log10(n+i.qa)+i.Ua;return t<0?-s:s}function en(t,i){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.pow(10,n-i.Ua)-i.qa;return t<0?-s:s}function rn(t,i){if(null===t)return null;const n=sn(t.Rh(),i),s=sn(t.Dh(),i);return new yi(n,s)}function hn(t,i){if(null===t)return null;const n=en(t.Rh(),i),s=en(t.Dh(),i);return new yi(n,s)}function ln(t){if(null===t)return Gi;const i=Math.abs(t.Dh()-t.Rh());if(i>=1||i<1e-15)return Gi;const n=Math.ceil(Math.abs(Math.log10(i))),s=Gi.Ua+n;return{Ua:s,qa:1/Math.pow(10,s)}}class an{constructor(t,i){if(this.Ya=t,this.Xa=i,function(t){if(t<0)return!1;for(let i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Ya))this.Ka=[2,2.5,2];else{this.Ka=[];for(let t=this.Ya;1!==t;){if(t%2==0)this.Ka.push(2),t/=2;else{if(t%5!=0)throw new Error("unexpected base");this.Ka.push(2,2.5),t/=5}if(this.Ka.length>100)throw new Error("something wrong with base")}}}Za(t,i,n){const s=0===this.Ya?0:1/this.Ya;let e=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-i)))),r=0,h=this.Xa[0];for(;;){const t=gt(e,s,1e-14)&&e>s+1e-14,i=gt(e,n*h,1e-14),l=gt(e,1,1e-14);if(!(t&&i&&l))break;e/=h,h=this.Xa[++r%this.Xa.length]}if(e<=s+1e-14&&(e=s),e=Math.max(1,e),this.Ka.length>0&&(l=e,a=1,o=1e-14,Math.abs(l-a)<o))for(r=0,h=this.Ka[0];gt(e,n*h,1e-14)&&e>s+1e-14;)e/=h,h=this.Ka[++r%this.Ka.length];var l,a,o;return e}}class on{constructor(t,i,n,s){this.Ga=[],this.Ni=t,this.Ya=i,this.Ja=n,this.Qa=s}Za(t,i){if(t<i)throw new Error("high < low");const n=this.Ni.At(),s=(t-i)*this.io()/n,e=new an(this.Ya,[2,2.5,2]),r=new an(this.Ya,[2,2,2.5]),h=new an(this.Ya,[2.5,2,2]),l=[];return l.push(e.Za(t,i,s),r.Za(t,i,s),h.Za(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");let i=t[0];for(let n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(l)}no(){const t=this.Ni,i=t.Pt();if(null===i)return void(this.Ga=[]);const n=t.At(),s=this.Ja(n-1,i),e=this.Ja(0,i),r=this.Ni.W().entireTextOnly?this.so()/2:0,h=r,l=n-1-r,a=Math.max(s,e),o=Math.min(s,e);if(a===o)return void(this.Ga=[]);let _=this.Za(a,o),u=a%_;u+=u<0?_:0;const c=a>=o?1:-1;let d=null,f=0;for(let n=a-u;n>o;n-=_){const s=this.Qa(n,i,!0);null!==d&&Math.abs(s-d)<this.io()||(s<h||s>l||(f<this.Ga.length?(this.Ga[f].Na=s,this.Ga[f].eo=t.ro(n)):this.Ga.push({Na:s,eo:t.ro(n)}),f++,d=s,t.ho()&&(_=this.Za(n*c,o))))}this.Ga.length=f}$a(){return this.Ga}so(){return this.Ni.T()}io(){return Math.ceil(2.5*this.so())}}function _n(t){return t.slice().sort(((t,i)=>f(t.Gi())-f(i.Gi())))}var un;!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(un||(un={}));const cn=new _t,dn=new ot(100,1);class fn{constructor(t,i,n,s){this.lo=0,this.ao=null,this.Vh=null,this.oo=null,this._o={uo:!1,co:null},this.do=0,this.fo=0,this.vo=new k,this.po=new k,this.mo=[],this.bo=null,this.wo=null,this.Mo=null,this.xo=null,this.xa=dn,this.So=ln(null),this.yo=t,this.fn=i,this.ko=n,this.Co=s,this.Po=new on(this,100,this.To.bind(this),this.Ro.bind(this))}ba(){return this.yo}W(){return this.fn}Uh(t){if(C(this.fn,t),this.Oa(),void 0!==t.mode&&this.Do({Pr:t.mode}),void 0!==t.scaleMargins){const i=d(t.scaleMargins.top),n=d(t.scaleMargins.bottom);if(i<0||i>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${i}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(i+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${i+n}`);this.Oo(),this.wo=null}}Eo(){return this.fn.autoScale}ho(){return 1===this.fn.mode}xh(){return 2===this.fn.mode}Bo(){return 3===this.fn.mode}Pr(){return{Hn:this.fn.autoScale,zo:this.fn.invertScale,Pr:this.fn.mode}}Do(t){const i=this.Pr();let n=null;void 0!==t.Hn&&(this.fn.autoScale=t.Hn),void 0!==t.Pr&&(this.fn.mode=t.Pr,2!==t.Pr&&3!==t.Pr||(this.fn.autoScale=!0),this._o.uo=!1),1===i.Pr&&t.Pr!==i.Pr&&(!function(t,i){if(null===t)return!1;const n=en(t.Rh(),i),s=en(t.Dh(),i);return isFinite(n)&&isFinite(s)}(this.Vh,this.So)?this.fn.autoScale=!0:(n=hn(this.Vh,this.So),null!==n&&this.Ao(n))),1===t.Pr&&t.Pr!==i.Pr&&(n=rn(this.Vh,this.So),null!==n&&this.Ao(n));const s=i.Pr!==this.fn.mode;s&&(2===i.Pr||this.xh())&&this.Oa(),s&&(3===i.Pr||this.Bo())&&this.Oa(),void 0!==t.zo&&i.zo!==t.zo&&(this.fn.invertScale=t.zo,this.Vo()),this.po.m(i,this.Pr())}Io(){return this.po}T(){return this.ko.fontSize}At(){return this.lo}Lo(t){this.lo!==t&&(this.lo=t,this.Oo(),this.wo=null)}No(){if(this.ao)return this.ao;const t=this.At()-this.Fo()-this.Wo();return this.ao=t,t}Lh(){return this.jo(),this.Vh}Ao(t,i){const n=this.Vh;(i||null===n&&null!==t||null!==n&&!n.Ph(t))&&(this.wo=null,this.Vh=t)}Wi(){return this.jo(),0===this.lo||!this.Vh||this.Vh.Wi()}Ho(t){return this.zo()?t:this.At()-1-t}Dt(t,i){return this.xh()?t=Ji(t,i):this.Bo()&&(t=tn(t,i)),this.Ro(t,i)}ie(t,i,n){this.jo();const s=this.Wo(),e=f(this.Lh()),r=e.Rh(),h=e.Dh(),l=this.No()-1,a=this.zo(),o=l/(h-r),_=void 0===n?0:n.from,u=void 0===n?t.length:n.to,c=this.$o();for(let n=_;n<u;n++){const e=t[n],h=e._t;if(isNaN(h))continue;let l=h;null!==c&&(l=c(e._t,i));const _=s+o*(l-r),u=a?_:this.lo-1-_;e.st=u}}we(t,i,n){this.jo();const s=this.Wo(),e=f(this.Lh()),r=e.Rh(),h=e.Dh(),l=this.No()-1,a=this.zo(),o=l/(h-r),_=void 0===n?0:n.from,u=void 0===n?t.length:n.to,c=this.$o();for(let n=_;n<u;n++){const e=t[n];let h=e.Me,l=e.xe,_=e.Se,u=e.ye;null!==c&&(h=c(e.Me,i),l=c(e.xe,i),_=c(e.Se,i),u=c(e.ye,i));let d=s+o*(h-r),f=a?d:this.lo-1-d;e.me=f,d=s+o*(l-r),f=a?d:this.lo-1-d,e.fe=f,d=s+o*(_-r),f=a?d:this.lo-1-d,e.ve=f,d=s+o*(u-r),f=a?d:this.lo-1-d,e.be=f}}bn(t,i){const n=this.To(t,i);return this.Uo(n,i)}Uo(t,i){let n=t;return this.xh()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.Bo()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n}xt(){return this.mo}qo(){if(this.bo)return this.bo;let t=[];for(let i=0;i<this.mo.length;i++){const n=this.mo[i];null===n.Gi()&&n.Ji(i+1),t.push(n)}return t=_n(t),this.bo=t,this.bo}Yo(t){-1===this.mo.indexOf(t)&&(this.mo.push(t),this.Oa(),this.Xo())}Ko(t){const i=this.mo.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.mo.splice(i,1),0===this.mo.length&&(this.Do({Hn:!0}),this.Ao(null)),this.Oa(),this.Xo()}Pt(){let t=null;for(const i of this.mo){const n=i.Pt();null!==n&&((null===t||n.oa<t.oa)&&(t=n))}return null===t?null:t.Et}zo(){return this.fn.invertScale}$a(){const t=null===this.Pt();if(null!==this.wo&&(t||this.wo.Zo===t))return this.wo.$a;this.Po.no();const i=this.Po.$a();return this.wo={$a:i,Zo:t},this.vo.m(),i}Go(){return this.vo}Jo(t){this.xh()||this.Bo()||null===this.Mo&&null===this.oo&&(this.Wi()||(this.Mo=this.lo-t,this.oo=f(this.Lh()).Th()))}Qo(t){if(this.xh()||this.Bo())return;if(null===this.Mo)return;this.Do({Hn:!1}),(t=this.lo-t)<0&&(t=0);let i=(this.Mo+.2*(this.lo-1))/(t+.2*(this.lo-1));const n=f(this.oo).Th();i=Math.max(i,.1),n.Eh(i),this.Ao(n)}t_(){this.xh()||this.Bo()||(this.Mo=null,this.oo=null)}i_(t){this.Eo()||null===this.xo&&null===this.oo&&(this.Wi()||(this.xo=t,this.oo=f(this.Lh()).Th()))}n_(t){if(this.Eo())return;if(null===this.xo)return;const i=f(this.Lh()).Oh()/(this.No()-1);let n=t-this.xo;this.zo()&&(n*=-1);const s=n*i,e=f(this.oo).Th();e.Bh(s),this.Ao(e,!0),this.wo=null}s_(){this.Eo()||null!==this.xo&&(this.xo=null,this.oo=null)}Ma(){return this.xa||this.Oa(),this.xa}ji(t,i){switch(this.fn.mode){case 2:return this.e_(Ji(t,i));case 3:return this.Ma().format(tn(t,i));default:return this.jh(t)}}ro(t){switch(this.fn.mode){case 2:return this.e_(t);case 3:return this.Ma().format(t);default:return this.jh(t)}}Xl(t){return this.jh(t,f(this.r_()).Ma())}Kl(t,i){return t=Ji(t,i),this.e_(t,cn)}h_(){return this.mo}l_(t){this._o={co:t,uo:!1}}Bn(){this.mo.forEach((t=>t.Bn()))}Oa(){this.wo=null;const t=this.r_();let i=100;null!==t&&(i=Math.round(1/t.ga())),this.xa=dn,this.xh()?(this.xa=cn,i=100):this.Bo()?(this.xa=new ot(100,1),i=100):null!==t&&(this.xa=t.Ma()),this.Po=new on(this,i,this.To.bind(this),this.Ro.bind(this)),this.Po.no()}Xo(){this.bo=null}r_(){return this.mo[0]||null}Fo(){return this.zo()?this.fn.scaleMargins.bottom*this.At()+this.fo:this.fn.scaleMargins.top*this.At()+this.do}Wo(){return this.zo()?this.fn.scaleMargins.top*this.At()+this.do:this.fn.scaleMargins.bottom*this.At()+this.fo}jo(){this._o.uo||(this._o.uo=!0,this.a_())}Oo(){this.ao=null}Ro(t,i){if(this.jo(),this.Wi())return 0;t=this.ho()&&t?sn(t,this.So):t;const n=f(this.Lh()),s=this.Wo()+(this.No()-1)*(t-n.Rh())/n.Oh();return this.Ho(s)}To(t,i){if(this.jo(),this.Wi())return 0;const n=this.Ho(t),s=f(this.Lh()),e=s.Rh()+s.Oh()*((n-this.Wo())/(this.No()-1));return this.ho()?en(e,this.So):e}Vo(){this.wo=null,this.Po.no()}a_(){const t=this._o.co;if(null===t)return;let i=null;const n=this.h_();let s=0,e=0;for(const r of n){if(!r.Ct())continue;const n=r.Pt();if(null===n)continue;const h=r.Vl(t.Bs(),t.ci());let l=h&&h.Lh();if(null!==l){switch(this.fn.mode){case 1:l=rn(l,this.So);break;case 2:l=Qi(l,n.Et);break;case 3:l=nn(l,n.Et)}if(i=null===i?l:i.ss(f(l)),null!==h){const t=h.Nh();null!==t&&(s=Math.max(s,t.above),e=Math.max(e,t.below))}}}if(s===this.do&&e===this.fo||(this.do=s,this.fo=e,this.wo=null,this.Oo()),null!==i){if(i.Rh()===i.Dh()){const t=this.r_(),n=5*(null===t||this.xh()||this.Bo()?1:t.ga());this.ho()&&(i=hn(i,this.So)),i=new yi(i.Rh()-n,i.Dh()+n),this.ho()&&(i=rn(i,this.So))}if(this.ho()){const t=hn(i,this.So),n=ln(t);if(r=n,h=this.So,r.Ua!==h.Ua||r.qa!==h.qa){const s=null!==this.oo?hn(this.oo,this.So):null;this.So=n,i=rn(t,n),null!==s&&(this.oo=rn(s,n))}}this.Ao(i)}else null===this.Vh&&(this.Ao(new yi(-.5,.5)),this.So=ln(null));var r,h;this._o.uo=!0}$o(){return this.xh()?Ji:this.Bo()?tn:this.ho()?t=>sn(t,this.So):null}o_(t,i,n){return void 0===i?(void 0===n&&(n=this.Ma()),n.format(t)):i(t)}jh(t,i){return this.o_(t,this.Co.priceFormatter,i)}e_(t,i){return this.o_(t,this.Co.percentageFormatter,i)}}const vn=1e3;class pn{constructor(t,i,n=0){var s,e;this.mo=[],this.__=new Map,this.lo=0,this.u_=30,this.c_=0,this.d_=vn,this.bo=null,this.f_=new k,this.Cl=t,this.qi=i,this.v_=new Zi(this);const r=i.W(),h=r.layout.panes[n]||{};this.p_=this.m_("left",r.leftPriceScale),this.p_.Io().l(this.b_.bind(this,this.p_),this),this.w_=this.m_("right",r.rightPriceScale),this.w_.Io().l(this.b_.bind(this,this.w_),this),this.d_=null!==(e=null===(s=r.layout.panes[n])||void 0===s?void 0:s.stretchFactor)&&void 0!==e?e:vn,this.g_(r),this.Uh(h)}Uh(t){var i,n;this.d_=null!==(i=t.stretchFactor)&&void 0!==i?i:this.d_,this.u_=null!==(n=t.minHeight)&&void 0!==n?n:30}g_(t){if(t.leftPriceScale&&this.p_.Uh(t.leftPriceScale),t.rightPriceScale&&this.w_.Uh(t.rightPriceScale),t.localization&&(this.p_.Oa(),this.w_.Oa()),t.overlayPriceScales){const i=Array.from(this.__.values());for(const n of i){const i=f(n[0].Ot());i.Uh(t.overlayPriceScales),t.localization&&i.Oa()}}}M_(t){switch(t){case"left":return this.p_;case"right":return this.w_}return this.__.has(t)?d(this.__.get(t))[0].Ot():null}S(){this.$t().x_().p(this),this.p_.Io().p(this),this.w_.Io().p(this),this.mo.forEach((t=>{t.S&&t.S()})),this.f_.m()}S_(){return this.d_}y_(t){this.d_=t}$t(){return this.qi}Ui(){return this.c_}At(){return this.lo}k_(){return this.u_}C_(t){this.c_=t,this.P_()}Lo(t){this.lo=t,this.p_.Lo(t),this.w_.Lo(t),this.mo.forEach((i=>{if(this.pr(i)){const n=i.Ot();null!==n&&n.Lo(t)}})),this.P_()}xt(){return this.mo}pr(t){const i=t.Ot();return null===i||this.p_!==i&&this.w_!==i}Yo(t,i,n){const s=void 0!==n?n:this.R_().T_+1;this.D_(t,i,s)}Ko(t){const i=this.mo.indexOf(t);c(-1!==i,"removeDataSource: invalid data source"),this.mo.splice(i,1);const n=f(t.Ot()).ba();if(this.__.has(n)){const i=d(this.__.get(n)),s=i.indexOf(t);-1!==s&&(i.splice(s,1),0===i.length&&this.__.delete(n))}const s=t.Ot();s&&s.xt().indexOf(t)>=0&&s.Ko(t),null!==s&&(s.Xo(),this.O_(s)),this.bo=null}br(t){return t===this.p_?"left":t===this.w_?"right":"overlay"}E_(){return this.p_}B_(){return this.w_}z_(t,i){t.Jo(i)}A_(t,i){t.Qo(i),this.P_()}V_(t){t.t_()}I_(t,i){t.i_(i)}L_(t,i){t.n_(i),this.P_()}N_(t){t.s_()}P_(){this.mo.forEach((t=>{t.Bn()}))}mn(){let t=null;return this.qi.W().rightPriceScale.visible&&0!==this.w_.xt().length?t=this.w_:this.qi.W().leftPriceScale.visible&&0!==this.p_.xt().length?t=this.p_:0!==this.mo.length&&(t=this.mo[0].Ot()),null===t&&(t=this.w_),t}mr(){let t=null;return this.qi.W().rightPriceScale.visible?t=this.w_:this.qi.W().leftPriceScale.visible&&(t=this.p_),t}O_(t){null!==t&&t.Eo()&&this.F_(t)}W_(t){const i=this.Cl.Zs();t.Do({Hn:!0}),null!==i&&t.l_(i),this.P_()}j_(){this.F_(this.p_),this.F_(this.w_)}H_(){this.O_(this.p_),this.O_(this.w_),this.mo.forEach((t=>{this.pr(t)&&this.O_(t.Ot())})),this.P_(),this.qi.qh()}qo(){return null===this.bo&&(this.bo=_n(this.mo)),this.bo}U_(){return this.f_}q_(){return this.v_}F_(t){const i=t.h_();if(i&&i.length>0&&!this.Cl.Wi()){const i=this.Cl.Zs();null!==i&&t.l_(i)}t.Bn()}R_(){const t=this.qo();if(0===t.length)return{Y_:0,T_:0};let i=0,n=0;for(let s=0;s<t.length;s++){const e=t[s].Gi();null!==e&&(e<i&&(i=e),e>n&&(n=e))}return{Y_:i,T_:n}}D_(t,i,n){let s=this.M_(i);if(null===s&&(s=this.m_(i,this.qi.W().overlayPriceScales)),this.mo.push(t),!rt(i)){const n=this.__.get(i)||[];n.push(t),this.__.set(i,n)}s.Yo(t),t.Qi(s),t.Ji(n),this.O_(s),this.bo=null}b_(t,i,n){i.Pr!==n.Pr&&this.F_(t)}m_(t,i){const n=Object.assign({visible:!0,autoScale:!0},O(i)),s=new fn(t,n,this.qi.W().layout,this.qi.W().localization);return s.Lo(this.At()),s}}class mn{constructor(t,i,n=50){this.Ge=0,this.Je=1,this.Qe=1,this.ir=new Map,this.tr=new Map,this.X_=t,this.K_=i,this.nr=n}Z_(t){const i=t.time,n=this.K_.cacheKey(i),s=this.ir.get(n);if(void 0!==s)return s.G_;if(this.Ge===this.nr){const t=this.tr.get(this.Qe);this.tr.delete(this.Qe),this.ir.delete(d(t)),this.Qe++,this.Ge--}const e=this.X_(t);return this.ir.set(n,{G_:e,hr:this.Je}),this.tr.set(this.Je,n),this.Ge++,this.Je++,e}}class bn{constructor(t,i){c(t<=i,"right should be >= left"),this.J_=t,this.Q_=i}Bs(){return this.J_}ci(){return this.Q_}tu(){return this.Q_-this.J_+1}Gr(t){return this.J_<=t&&t<=this.Q_}Ph(t){return this.J_===t.Bs()&&this.Q_===t.ci()}}function wn(t,i){return null===t||null===i?t===i:t.Ph(i)}class gn{constructor(){this.iu=new Map,this.ir=null,this.nu=!1}su(t){this.nu=t,this.ir=null}eu(t,i){this.ru(i),this.ir=null;for(let n=i;n<t.length;++n){const i=t[n];let s=this.iu.get(i.timeWeight);void 0===s&&(s=[],this.iu.set(i.timeWeight,s)),s.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}hu(t,i){const n=Math.ceil(i/t);return null!==this.ir&&this.ir.lu===n||(this.ir={$a:this.au(n),lu:n}),this.ir.$a}ru(t){if(0===t)return void this.iu.clear();const i=[];this.iu.forEach(((n,s)=>{t<=n[0].index?i.push(s):n.splice(Tt(n,t,(i=>i.index<t)),1/0)}));for(const t of i)this.iu.delete(t)}au(t){let i=[];for(const n of Array.from(this.iu.keys()).sort(((t,i)=>i-t))){if(!this.iu.get(n))continue;const s=i;i=[];const e=s.length;let r=0;const h=d(this.iu.get(n)),l=h.length;let a=1/0,o=-1/0;for(let n=0;n<l;n++){const l=h[n],_=l.index;for(;r<e;){const t=s[r],n=t.index;if(!(n<_)){a=n;break}r++,i.push(t),o=n,a=1/0}if(a-_>=t&&_-o>=t)i.push(l),o=_;else if(this.nu)return s}for(;r<e;r++)i.push(s[r])}return i}}class Mn{constructor(t){this.ou=t}_u(){return null===this.ou?null:new bn(Math.floor(this.ou.Bs()),Math.ceil(this.ou.ci()))}uu(){return this.ou}static cu(){return new Mn(null)}}function xn(t,i){return t.weight>i.weight?t:i}class Sn{constructor(t,i,n,s){this.c_=0,this.du=null,this.fu=[],this.xo=null,this.Mo=null,this.vu=new gn,this.pu=new Map,this.mu=Mn.cu(),this.bu=!0,this.wu=new k,this.gu=new k,this.Mu=new k,this.xu=null,this.Su=null,this.yu=[],this.fn=i,this.Co=n,this.ku=i.rightOffset,this.Cu=i.barSpacing,this.qi=t,this.K_=s,this.Pu(),this.vu.su(i.uniformDistribution)}W(){return this.fn}Tu(t){C(this.Co,t),this.Ru(),this.Pu()}Uh(t,i){var n;C(this.fn,t),this.fn.fixLeftEdge&&this.Du(),this.fn.fixRightEdge&&this.Ou(),void 0!==t.barSpacing&&this.qi.Qn(t.barSpacing),void 0!==t.rightOffset&&this.qi.ts(t.rightOffset),void 0!==t.minBarSpacing&&this.qi.Qn(null!==(n=t.barSpacing)&&void 0!==n?n:this.Cu),this.Ru(),this.Pu(),this.Mu.m()}wn(t){var i,n;return null!==(n=null===(i=this.fu[t])||void 0===i?void 0:i.time)&&void 0!==n?n:null}Yi(t){var i;return null!==(i=this.fu[t])&&void 0!==i?i:null}Ba(t,i){if(this.fu.length<1)return null;if(this.K_.key(t)>this.K_.key(this.fu[this.fu.length-1].time))return i?this.fu.length-1:null;const n=Tt(this.fu,this.K_.key(t),((t,i)=>this.K_.key(t.time)<i));return this.K_.key(t)<this.K_.key(this.fu[n].time)?i?n:null:n}Wi(){return 0===this.c_||0===this.fu.length||null===this.du}Ea(){return this.fu.length>0}Zs(){return this.Eu(),this.mu._u()}Bu(){return this.Eu(),this.mu.uu()}zu(){const t=this.Zs();if(null===t)return null;const i={from:t.Bs(),to:t.ci()};return this.Au(i)}Au(t){const i=Math.round(t.from),n=Math.round(t.to),s=f(this.Vu()),e=f(this.Iu());return{from:f(this.Yi(Math.max(s,i))),to:f(this.Yi(Math.min(e,n)))}}Lu(t){return{from:f(this.Ba(t.from,!0)),to:f(this.Ba(t.to,!0))}}Ui(){return this.c_}C_(t){if(!isFinite(t)||t<=0)return;if(this.c_===t)return;const i=this.Bu(),n=this.c_;if(this.c_=t,this.bu=!0,this.fn.lockVisibleTimeRangeOnResize&&0!==n){const i=this.Cu*t/n;this.Cu=i}if(this.fn.fixLeftEdge&&null!==i&&i.Bs()<=0){const i=n-t;this.ku-=Math.round(i/this.Cu)+1,this.bu=!0}this.Nu(),this.Fu()}Vt(t){if(this.Wi()||!T(t))return 0;const i=this.Wu()+this.ku-t;return this.c_-(i+.5)*this.Cu-1}te(t,i){const n=this.Wu(),s=void 0===i?0:i.from,e=void 0===i?t.length:i.to;for(let i=s;i<e;i++){const s=t[i].ot,e=n+this.ku-s,r=this.c_-(e+.5)*this.Cu-1;t[i].nt=r}}ju(t){return Math.ceil(this.Hu(t))}ts(t){this.bu=!0,this.ku=t,this.Fu(),this.qi.$u(),this.qi.qh()}ae(){return this.Cu}Qn(t){this.Uu(t),this.Fu(),this.qi.$u(),this.qi.qh()}qu(){return this.ku}$a(){if(this.Wi())return null;if(null!==this.Su)return this.Su;const t=this.Cu,i=5*(this.qi.W().layout.fontSize+4)/8*(this.fn.tickMarkMaxCharacterLength||8),n=Math.round(i/t),s=f(this.Zs()),e=Math.max(s.Bs(),s.Bs()-n),r=Math.max(s.ci(),s.ci()-n),h=this.vu.hu(t,i),l=this.Vu()+n,a=this.Iu()-n,o=this.Yu(),_=this.fn.fixLeftEdge||o,u=this.fn.fixRightEdge||o;let c=0;for(const t of h){if(!(e<=t.index&&t.index<=r))continue;let n;c<this.yu.length?(n=this.yu[c],n.coord=this.Vt(t.index),n.label=this.Xu(t),n.weight=t.weight):(n={needAlignCoordinate:!1,coord:this.Vt(t.index),label:this.Xu(t),weight:t.weight},this.yu.push(n)),this.Cu>i/2&&!o?n.needAlignCoordinate=!1:n.needAlignCoordinate=_&&t.index<=l||u&&t.index>=a,c++}return this.yu.length=c,this.Su=this.yu,this.yu}Ku(){this.bu=!0,this.Qn(this.fn.barSpacing),this.ts(this.fn.rightOffset)}Zu(t){this.bu=!0,this.du=t,this.Fu(),this.Du()}Gu(t,i){const n=this.Hu(t),s=this.ae(),e=s+i*(s/10);this.Qn(e),this.fn.rightBarStaysOnScroll||this.ts(this.qu()+(n-this.Hu(t)))}Jo(t){this.xo&&this.s_(),null===this.Mo&&null===this.xu&&(this.Wi()||(this.Mo=t,this.Ju()))}Qo(t){if(null===this.xu)return;const i=wt(this.c_-t,0,this.c_),n=wt(this.c_-f(this.Mo),0,this.c_);0!==i&&0!==n&&this.Qn(this.xu.ae*i/n)}t_(){null!==this.Mo&&(this.Mo=null,this.Qu())}i_(t){null===this.xo&&null===this.xu&&(this.Wi()||(this.xo=t,this.Ju()))}n_(t){if(null===this.xo)return;const i=(this.xo-t)/this.ae();this.ku=f(this.xu).qu+i,this.bu=!0,this.Fu()}s_(){null!==this.xo&&(this.xo=null,this.Qu())}tc(){this.nc(this.fn.rightOffset)}nc(t,i=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.ku,s=performance.now();this.qi.Zn({sc:t=>(t-s)/i>=1,ec:e=>{const r=(e-s)/i;return r>=1?t:n+(t-n)*r}})}bt(t,i){this.bu=!0,this.fu=t,this.vu.eu(t,i),this.Fu()}rc(){return this.wu}hc(){return this.gu}lc(){return this.Mu}Wu(){return this.du||0}ac(t){const i=t.tu();this.Uu(this.c_/i),this.ku=t.ci()-this.Wu(),this.Fu(),this.bu=!0,this.qi.$u(),this.qi.qh()}oc(){const t=this.Vu(),i=this.Iu();null!==t&&null!==i&&this.ac(new bn(t,i+this.fn.rightOffset))}_c(t){const i=new bn(t.from,t.to);this.ac(i)}Xi(t){return void 0!==this.Co.timeFormatter?this.Co.timeFormatter(t.originalTime):this.K_.formatHorzItem(t.time)}Yu(){const{handleScroll:t,handleScale:i}=this.qi.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||i.axisDoubleClickReset.time||i.axisPressedMouseMove.time||i.mouseWheel||i.pinch)}Vu(){return 0===this.fu.length?null:0}Iu(){return 0===this.fu.length?null:this.fu.length-1}uc(t){return(this.c_-1-t)/this.Cu}Hu(t){const i=this.uc(t),n=this.Wu()+this.ku-i;return Math.round(1e6*n)/1e6}Uu(t){const i=this.Cu;this.Cu=t,this.Nu(),i!==this.Cu&&(this.bu=!0,this.cc())}Eu(){if(!this.bu)return;if(this.bu=!1,this.Wi())return void this.dc(Mn.cu());const t=this.Wu(),i=this.c_/this.Cu,n=this.ku+t,s=new bn(n-i+1,n);this.dc(new Mn(s))}Nu(){const t=this.fc();if(this.Cu<t&&(this.Cu=t,this.bu=!0),0!==this.c_){const t=.5*this.c_;this.Cu>t&&(this.Cu=t,this.bu=!0)}}fc(){return this.fn.fixLeftEdge&&this.fn.fixRightEdge&&0!==this.fu.length?this.c_/this.fu.length:this.fn.minBarSpacing}Fu(){const t=this.vc();this.ku>t&&(this.ku=t,this.bu=!0);const i=this.mc();null!==i&&this.ku<i&&(this.ku=i,this.bu=!0)}mc(){const t=this.Vu(),i=this.du;if(null===t||null===i)return null;return t-i-1+(this.fn.fixLeftEdge?this.c_/this.Cu:Math.min(2,this.fu.length))}vc(){return this.fn.fixRightEdge?0:this.c_/this.Cu-Math.min(2,this.fu.length)}Ju(){this.xu={ae:this.ae(),qu:this.qu()}}Qu(){this.xu=null}Xu(t){let i=this.pu.get(t.weight);return void 0===i&&(i=new mn((t=>this.bc(t)),this.K_),this.pu.set(t.weight,i)),i.Z_(t)}bc(t){return this.K_.formatTickmark(t,this.Co)}dc(t){const i=this.mu;this.mu=t,wn(i._u(),this.mu._u())||this.wu.m(),wn(i.uu(),this.mu.uu())||this.gu.m(),this.cc()}cc(){this.Su=null}Ru(){this.cc(),this.pu.clear()}Pu(){this.K_.updateFormatter(this.Co)}Du(){if(!this.fn.fixLeftEdge)return;const t=this.Vu();if(null===t)return;const i=this.Zs();if(null===i)return;const n=i.Bs()-t;if(n<0){const t=this.ku-n-1;this.ts(t)}this.Nu()}Ou(){this.Fu(),this.Nu()}}class yn{K(t,i,n){t.useMediaCoordinateSpace((t=>this.Z(t,i,n)))}Ml(t,i,n){t.useMediaCoordinateSpace((t=>this.wc(t,i,n)))}wc(t,i,n){}}class kn extends yn{constructor(t){super(),this.gc=new Map,this.It=t}Z(t){}wc(t){if(!this.It.Ct)return;const{context:i,mediaSize:n}=t;let s=0;for(const t of this.It.Mc){if(0===t.Gt.length)continue;i.font=t.R;const e=this.xc(i,t.Gt);e>n.width?t.Gu=n.width/e:t.Gu=1,s+=t.Sc*t.Gu}let e=0;switch(this.It.yc){case"top":e=0;break;case"center":e=Math.max((n.height-s)/2,0);break;case"bottom":e=Math.max(n.height-s,0)}i.fillStyle=this.It.O;for(const t of this.It.Mc){i.save();let s=0;switch(this.It.kc){case"left":i.textAlign="left",s=t.Sc/2;break;case"center":i.textAlign="center",s=n.width/2;break;case"right":i.textAlign="right",s=n.width-1-t.Sc/2}i.translate(s,e),i.textBaseline="top",i.font=t.R,i.scale(t.Gu,t.Gu),i.fillText(t.Gt,0,t.Cc),i.restore(),e+=t.Sc*t.Gu}}xc(t,i){const n=this.Pc(t.font);let s=n.get(i);return void 0===s&&(s=t.measureText(i).width,n.set(i,s)),s}Pc(t){let i=this.gc.get(t);return void 0===i&&(i=new Map,this.gc.set(t,i)),i}}class Cn{constructor(t){this.Ri=!0,this.Wt={Ct:!1,O:"",Mc:[],yc:"center",kc:"center"},this.jt=new kn(this.Wt),this.Ht=t}bt(){this.Ri=!0}gt(){return this.Ri&&(this.Mt(),this.Ri=!1),this.jt}Mt(){const t=this.Ht.W(),i=this.Wt;i.Ct=t.visible,i.Ct&&(i.O=t.color,i.kc=t.horzAlign,i.yc=t.vertAlign,i.Mc=[{Gt:t.text,R:A(t.fontSize,t.fontFamily,t.fontStyle),Sc:1.2*t.fontSize,Cc:0,Gu:0}])}}class Pn extends nt{constructor(t,i){super(),this.fn=i,this.Mn=new Cn(this)}On(){return[]}Dn(){return[this.Mn]}W(){return this.fn}Bn(){this.Mn.bt()}}var Tn,Rn,Dn,On,En;!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(Tn||(Tn={}));class Bn{constructor(t,i,n){this.Tc=[],this.Rc=new Map,this.Dc=[],this.c_=0,this.Oc=null,this.Ec=new k,this.Bc=new k,this.zc=!1,this.Ac=null,this.Vc=t,this.fn=i,this.K_=n,this.Ic=new V(this),this.Cl=new Sn(this,i.timeScale,this.fn.localization,n),this.vt=new et(this,i.crosshair),this.Lc=new Yi(i.crosshair),this.Nc=new Pn(this,i.watermark),this.Fc(),this.Tc[0].y_(2e3),this.Wc=this.jc(0),this.Hc=this.jc(1)}Gl(){this.$c(ht.hs())}qh(){this.$c(ht.rs())}ua(){this.$c(new ht(1))}Ql(t){const i=this.Uc(t);this.$c(i)}qc(){return this.Oc}Yc(t){const i=this.Oc;this.Oc=t,null!==i&&this.Ql(i.Xc),null!==t&&this.Ql(t.Xc)}W(){return this.fn}Uh(t){C(this.fn,t),this.Tc.forEach(((i,n)=>{var s,e;const r=null===(e=null===(s=t.layout)||void 0===s?void 0:s.panes)||void 0===e?void 0:e[n];void 0!==r&&i.Uh(r),i.g_(t)})),void 0!==t.timeScale&&this.Cl.Uh(t.timeScale),void 0!==t.localization&&this.Cl.Tu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Ec.m(),this.Wc=this.jc(0),this.Hc=this.jc(1),this.Gl()}Kc(t){var i;return null!==(i=this.Rc.get(t))&&void 0!==i?i:0}Zc(t,i){if("left"===t)return void this.Uh({leftPriceScale:i});if("right"===t)return void this.Uh({rightPriceScale:i});const n=this.Gc(t);null!==n&&(n.Ot.Uh(i),this.Ec.m())}Gc(t){for(const i of this.Tc){const n=i.M_(t);if(null!==n)return{Ut:i,Ot:n}}return null}yt(){return this.Cl}Jc(){return this.Tc}Qc(){return this.Nc}td(){return this.vt}nd(){return this.Bc}sd(t,i){t.Lo(i),this.$u()}C_(t){this.c_=t,this.Cl.C_(this.c_),this.Tc.forEach((i=>i.C_(t))),this.$u()}Fc(t){if(void 0!==t)if(t>this.Tc.length)for(let i=this.Tc.length;i<t;i++)this.Fc(i);else if(t<this.Tc.length)return this.Tc[t];const i=void 0===t?this.Tc.length-1+1:t,n=new pn(this.Cl,this,i);void 0!==t?this.Tc.splice(t,0,n):this.Tc.push(n),this.ed();const s=ht.hs();return s.Wn(i,{jn:0,Hn:!0}),this.$c(s),n}rd(t){if(0===t)return;if(this.Tc[t].qo().forEach((t=>{t instanceof qi&&this.hd(t)})),this.zc=!0,t!==this.Tc.length-1)for(let i=t+1;i<this.Tc.length;i++){this.Tc[i].qo().forEach((t=>{t instanceof qi&&t.Uh({pane:i-1})}))}this.Tc.splice(t,1),this.zc=!1,this.ed();const i=new ht(3);this.$c(i)}ld(t,i){const n=this.Tc[t],s=this.Tc[i];this.zc=!0,n.qo().forEach((t=>{t instanceof qi&&t.Uh({pane:i})})),s.qo().forEach((i=>{i instanceof qi&&i.Uh({pane:t})})),this.Tc[t]=s,this.Tc[i]=n,this.zc=!1,this.ed(),this.$c(new ht(3))}z_(t,i,n){t.z_(i,n)}A_(t,i,n){t.A_(i,n),this.ta(),this.$c(this.ad(t,2))}V_(t,i){t.V_(i),this.$c(this.ad(t,2))}I_(t,i,n){i.Eo()||t.I_(i,n)}L_(t,i,n){i.Eo()||(t.L_(i,n),this.ta(),this.$c(this.ad(t,2)))}N_(t,i){i.Eo()||(t.N_(i),this.$c(this.ad(t,2)))}W_(t,i){t.W_(i),this.$c(this.ad(t,2))}od(t){this.Cl.Jo(t)}_d(t,i){const n=this.yt();if(n.Wi()||0===i)return;const s=n.Ui();t=Math.max(1,Math.min(t,s)),n.Gu(t,i),this.$u()}ud(t){this.dd(0),this.fd(t),this.vd()}pd(t){this.Cl.Qo(t),this.$u()}md(){this.Cl.t_(),this.qh()}dd(t){this.Cl.i_(t)}fd(t){this.Cl.n_(t),this.$u()}vd(){this.Cl.s_(),this.qh()}wt(){return this.Dc}bd(t,i,n,s,e){this.vt.xn(t,i);let r=NaN,h=this.Cl.ju(t);const l=this.Cl.Zs();null!==l&&(h=Math.min(Math.max(l.Bs(),h),l.ci()));const a=s.mn(),o=a.Pt();null!==o&&(r=a.bn(i,o)),r=this.Lc.za(r,h,s),this.vt.Cn(h,r,s),this.ua(),e||this.Bc.m(this.vt.St(),{x:t,y:i},n)}wd(t,i,n){const s=n.mn(),e=s.Pt(),r=s.Dt(t,f(e)),h=this.Cl.Ba(i,!0),l=this.Cl.Vt(f(h));this.bd(l,r,null,n,!0)}gd(t){this.td().Tn(),this.ua(),t||this.Bc.m(null,null,null)}ta(){const t=this.vt.Ut();if(null!==t){const i=this.vt.yn(),n=this.vt.kn();this.bd(i,n,null,t)}this.vt.Bn()}Md(t,i,n){const s=this.Cl.wn(0);void 0!==i&&void 0!==n&&this.Cl.bt(i,n);const e=this.Cl.wn(0),r=this.Cl.Wu(),h=this.Cl.Zs();if(null!==h&&null!==s&&null!==e){const i=h.Gr(r),l=this.K_.key(s)>this.K_.key(e),a=null!==t&&t>r&&!l,o=this.Cl.W().allowShiftVisibleRangeOnWhitespaceReplacement,_=i&&(!(void 0===n)||o)&&this.Cl.W().shiftVisibleRangeOnNewBar;if(a&&!_){const i=t-r;this.Cl.ts(this.Cl.qu()-i)}}this.Cl.Zu(t)}sa(t){null!==t&&t.H_()}vr(t){const i=this.Tc.find((i=>i.qo().includes(t)));return void 0===i?null:i}$u(){this.Nc.Bn(),this.Tc.forEach((t=>t.H_())),this.ta()}S(){this.Tc.forEach((t=>t.S())),this.Tc.length=0,this.fn.localization.priceFormatter=void 0,this.fn.localization.percentageFormatter=void 0,this.fn.localization.timeFormatter=void 0}xd(){return this.Ic}wr(){return this.Ic.W()}x_(){return this.Ec}Sd(t,i,n){const s=i.pane||0;this.Tc.length-1<=s&&this.Fc(s);const e=this.Tc[s],r=this.yd(i,t,e,n);return this.Dc.push(r),1===this.Dc.length?this.Gl():this.qh(),r}hd(t){const i=this.vr(t),n=this.Dc.indexOf(t);c(-1!==n,"Series not found"),this.Dc.splice(n,1),f(i).Ko(t),t.S&&t.S()}Zl(t,i){const n=f(this.vr(t));n.Ko(t);const s=this.Gc(i);if(null===s){const s=t.Gi();n.Yo(t,i,null===s?void 0:s)}else{const e=s.Ut===n?t.Gi():void 0;s.Ut.Yo(t,i,null===e?void 0:e)}}Jl(t,i,n){if(n===i||this.zc)return;t.W().pane!==n&&t.Uh({pane:n});const s=this.vr(t);null==s||s.Ko(t);const e=this.Fc(n);this.kd(t,e)}oc(){const t=ht.rs();t.qn(),this.$c(t)}Cd(t){const i=ht.rs();i.Kn(t),this.$c(i)}Jn(){const t=ht.rs();t.Jn(),this.$c(t)}Qn(t){const i=ht.rs();i.Qn(t),this.$c(i)}ts(t){const i=ht.rs();i.ts(t),this.$c(i)}Zn(t){const i=ht.rs();i.Zn(t),this.$c(i)}Yn(){const t=ht.rs();t.Yn(),this.$c(t)}Pd(){return this.fn.rightPriceScale.visible?"right":"left"}Td(){return this.Hc}q(){return this.Wc}zt(t){const i=this.Hc,n=this.Wc;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Ac||this.Ac.Rs!==n||this.Ac.Ds!==i)this.Ac={Rs:n,Ds:i,Rd:new Map};else{const i=this.Ac.Rd.get(t);if(void 0!==i)return i}const s=function(t,i,n){const[s,e,r,h]=S(t),[l,a,o,_]=S(i),u=[m(s+n*(l-s)),m(e+n*(a-e)),m(r+n*(o-r)),b(h+n*(_-h))];return`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${u[3]})`}(n,i,t/100);return this.Ac.Rd.set(t,s),s}ad(t,i){const n=new ht(i);if(null!==t){const s=this.Tc.indexOf(t);n.Wn(s,{jn:i})}return n}Uc(t,i){return void 0===i&&(i=2),this.ad(this.vr(t),i)}$c(t){this.Vc&&this.Vc(t),this.Tc.forEach((t=>{t.q_().Yh().bt()}))}yd(t,i,n,s){const e=new qi(this,t,i,n,s);return this.kd(e,n),e}kd(t,i){const n=t.W().priceScaleId,s=void 0!==n?n:this.Pd();i.Yo(t,s),rt(s)||t.Uh(t.W())}jc(t){const i=this.fn.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color}ed(){this.Rc.clear();for(let t=0;t<this.Tc.length;t++)this.Rc.set(this.Tc[t],t)}}function zn(t){return!P(t)&&!R(t)}function An(t){return P(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(Rn||(Rn={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Dn||(Dn={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(On||(On={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(En||(En={}));const Vn=t=>t.getUTCFullYear();function In(t,i,n){return i.replace(/yyyy/g,(t=>at(Vn(t),4))(t)).replace(/yy/g,(t=>at(Vn(t)%100,2))(t)).replace(/MMMM/g,((t,i)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,n)).replace(/MMM/g,((t,i)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,n)).replace(/MM/g,(t=>at((t=>t.getUTCMonth()+1)(t),2))(t)).replace(/dd/g,(t=>at((t=>t.getUTCDate())(t),2))(t))}class Ln{constructor(t="yyyy-MM-dd",i="default"){this.Dd=t,this.Od=i}Z_(t){return In(t,this.Dd,this.Od)}}class Nn{constructor(t){this.Ed=t||"%h:%m:%s"}Z_(t){return this.Ed.replace("%h",at(t.getUTCHours(),2)).replace("%m",at(t.getUTCMinutes(),2)).replace("%s",at(t.getUTCSeconds(),2))}}const Fn={Bd:"yyyy-MM-dd",zd:"%h:%m:%s",Ad:" ",Vd:"default"};class Wn{constructor(t={}){const i=Object.assign(Object.assign({},Fn),t);this.Id=new Ln(i.Bd,i.Vd),this.Ld=new Nn(i.zd),this.Nd=i.Ad}Z_(t){return`${this.Id.Z_(t)}${this.Nd}${this.Ld.Z_(t)}`}}function jn(t){return 60*t*60*1e3}function Hn(t){return 60*t*1e3}const $n=[{Fd:(Un=1,1e3*Un),Wd:10},{Fd:Hn(1),Wd:20},{Fd:Hn(5),Wd:21},{Fd:Hn(30),Wd:22},{Fd:jn(1),Wd:30},{Fd:jn(3),Wd:31},{Fd:jn(6),Wd:32},{Fd:jn(12),Wd:33}];var Un;function qn(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(let n=$n.length-1;n>=0;--n)if(Math.floor(i.getTime()/$n[n].Fd)!==Math.floor(t.getTime()/$n[n].Fd))return $n[n].Wd;return 0}function Yn(t){let i=t;if(R(t)&&(i=Kn(t)),!zn(i))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(i.year,i.month-1,i.day,0,0,0,0));return{jd:Math.round(n.getTime()/1e3),Hd:i}}function Xn(t){if(!An(t))throw new Error("time must be of type isUTCTimestamp");return{jd:t}}function Kn(t){const i=new Date(t);if(isNaN(i.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function Zn(t){R(t.time)&&(t.time=Kn(t.time))}class Gn{options(){return this.fn}setOptions(t){this.fn=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(t){t.forEach(Zn)}(t):Zn(t)}createConverterToInternalObj(t){return f(function(t){return 0===t.length?null:zn(t[0].time)||R(t[0].time)?Yn:Xn}(t))}key(t){return"object"==typeof t&&"jd"in t?t.jd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const i=t;return void 0===i.Hd?new Date(1e3*i.jd).getTime():new Date(Date.UTC(i.Hd.year,i.Hd.month-1,i.Hd.day)).getTime()}convertHorzItemToInternal(t){return An(i=t)?Xn(i):zn(i)?Yn(i):Yn(Kn(i));var i}updateFormatter(t){if(!this.fn)return;const i=t.dateFormat;this.fn.timeScale.timeVisible?this.$d=new Wn({Bd:i,zd:this.fn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Ad:"   ",Vd:t.locale}):this.$d=new Ln(i,t.locale)}formatHorzItem(t){const i=t;return this.$d.Z_(new Date(1e3*i.jd))}formatTickmark(t,i){const n=function(t,i,n){switch(t){case 0:case 10:return i?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.fn.timeScale.timeVisible,this.fn.timeScale.secondsVisible),s=this.fn.timeScale;if(void 0!==s.tickMarkFormatter){const e=s.tickMarkFormatter(t.originalTime,n,i.locale);if(null!==e)return e}return function(t,i,n){const s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}const e=void 0===t.Hd?new Date(1e3*t.jd):new Date(Date.UTC(t.Hd.year,t.Hd.month-1,t.Hd.day));return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()).toLocaleString(n,s)}(t.time,n,i.locale)}maxTickMarkWeight(t){let i=t.reduce(xn,t[0]).weight;return i>30&&i<50&&(i=30),i}fillWeightsForPoints(t,i){!function(t,i=0){if(0===t.length)return;let n=0===i?null:t[i-1].time.jd,s=null!==n?new Date(1e3*n):null,e=0;for(let r=i;r<t.length;++r){const i=t[r],h=new Date(1e3*i.time.jd);null!==s&&(i.timeWeight=qn(h,s)),e+=i.time.jd-(n||i.time.jd),n=i.time.jd,s=h}if(0===i&&t.length>1){const i=Math.ceil(e/(t.length-1)),n=new Date(1e3*(t[0].time.jd-i));t[0].timeWeight=qn(new Date(1e3*t[0].time.jd),n)}}(t,i)}static Ud(t){return C({localization:{dateFormat:"dd MMM 'yy"}},null!=t?t:{})}}function Jn(t){var i=t.width,n=t.height;if(i<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:i,height:n}}function Qn(t,i){return t.width===i.width&&t.height===i.height}var ts=function(){function t(t){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var i=this,n={next:t};return this._observers.push(n),{unsubscribe:function(){i._observers=i._observers.filter((function(t){return t!==n}))}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach((function(i){return i.next(t._window.devicePixelRatio)})),this._reinstallResolutionListener()},t}();var is=function(){function t(t,i,n){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=Jn({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=i?i:function(t){return t},this._allowResizeObserver=null===(s=null==n?void 0:n.allowResizeObserver)||void 0===s||s,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,i;if(null===this._canvasElement)throw new Error("Object is disposed");null===(t=this._canvasElementResizeObserver)||void 0===t||t.disconnect(),this._canvasElementResizeObserver=null,null===(i=this._devicePixelRatioObservable)||void 0===i||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Jn({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=Jn(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter((function(i){return i!==t}))},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter((function(i){return i!==t}))},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var i=this.bitmapSize;Qn(i,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(i,t))},t.prototype._emitBitmapSizeChanged=function(t,i){var n=this;this._bitmapSizeChangedListeners.forEach((function(s){return s.call(n,t,i)}))},t.prototype._suggestNewBitmapSize=function(t){var i=this._suggestedBitmapSize,n=Jn(this._transformBitmapSize(t,this._canvasElementClientSize)),s=Qn(this.bitmapSize,n)?null:n;null===i&&null===s||null!==i&&null!==s&&Qn(i,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(i,s))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,i){var n=this;this._suggestedBitmapSizeChangedListeners.forEach((function(s){return s.call(n,t,i)}))},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise((function(t){var i=new ResizeObserver((function(n){t(n.every((function(t){return"devicePixelContentBoxSize"in t}))),i.disconnect()}));i.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1})).then((function(i){return i?t._initResizeObserver():t._initDevicePixelRatioObservable()})):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var i=ns(this._canvasElement);if(null===i)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=function(t){return new ts(t)}(i),this._devicePixelRatioObservable.subscribe((function(){return t._invalidateBitmapSize()})),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var t,i;if(null!==this._canvasElement){var n=ns(this._canvasElement);if(null!==n){var s=null!==(i=null===(t=this._devicePixelRatioObservable)||void 0===t?void 0:t.value)&&void 0!==i?i:n.devicePixelRatio,e=this._canvasElement.getClientRects(),r=void 0!==e[0]?function(t,i){return Jn({width:Math.round(t.left*i+t.width*i)-Math.round(t.left*i),height:Math.round(t.top*i+t.height*i)-Math.round(t.top*i)})}(e[0],s):Jn({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(r)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver((function(i){var n=i.find((function(i){return i.target===t._canvasElement}));if(n&&n.devicePixelContentBoxSize&&n.devicePixelContentBoxSize[0]){var s=n.devicePixelContentBoxSize[0],e=Jn({width:s.inlineSize,height:s.blockSize});t._suggestNewBitmapSize(e)}})),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function ns(t){return t.ownerDocument.defaultView}var ss=function(){function t(t,i,n){if(0===i.width||0===i.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,0===n.width||0===n.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function es(t,i){var n=t.canvasElementClientSize;if(0===n.width||0===n.height)return null;var s=t.bitmapSize;if(0===s.width||0===s.height)return null;var e=t.canvasElement.getContext("2d",i);return null===e?null:new ss(e,n,s)}const rs="undefined"!=typeof window;function hs(){return!!rs&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ls(){return!!rs&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function as(t){return t+t%2}function os(t){rs&&void 0!==window.chrome&&t.addEventListener("mousedown",(t=>{if(1===t.button)return t.preventDefault(),!1}))}class _s{constructor(t,i,n){this.qd=0,this.Yd=null,this.Xd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Kd=0,this.Zd=null,this.Gd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Jd=null,this.Qd=!1,this.tf=null,this.if=null,this.nf=!1,this.sf=!1,this.ef=!1,this.rf=null,this.hf=null,this.lf=null,this.af=null,this._f=null,this.uf=null,this.cf=null,this.df=0,this.ff=!1,this.vf=!1,this.pf=!1,this.mf=0,this.bf=null,this.wf=!ls(),this.gf=t=>{this.Mf(t)},this.xf=t=>{if(this.Sf(t)){const i=this.yf(t);if(++this.Kd,this.Zd&&this.Kd>1){const{kf:n}=this.Cf(ds(t),this.Gd);n<30&&!this.ef&&this.Pf(i,this.Rf.Tf),this.Df()}}else{const i=this.yf(t);if(++this.qd,this.Yd&&this.qd>1){const{kf:n}=this.Cf(ds(t),this.Xd);n<5&&!this.sf&&this.Of(i,this.Rf.Ef),this.Bf()}}},this.zf=t,this.Rf=i,this.fn=n,this.Af()}S(){null!==this.rf&&(this.rf(),this.rf=null),null!==this.hf&&(this.hf(),this.hf=null),null!==this.af&&(this.af(),this.af=null),null!==this._f&&(this._f(),this._f=null),null!==this.uf&&(this.uf(),this.uf=null),null!==this.lf&&(this.lf(),this.lf=null),this.Vf(),this.Bf()}If(t){this.af&&this.af();const i=this.Lf.bind(this);if(this.af=()=>{this.zf.removeEventListener("mousemove",i)},this.zf.addEventListener("mousemove",i),this.Sf(t))return;const n=this.yf(t);this.Of(n,this.Rf.Nf),this.wf=!0}Bf(){null!==this.Yd&&clearTimeout(this.Yd),this.qd=0,this.Yd=null,this.Xd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Df(){null!==this.Zd&&clearTimeout(this.Zd),this.Kd=0,this.Zd=null,this.Gd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Lf(t){if(this.pf||null!==this.if)return;if(this.Sf(t))return;const i=this.yf(t);this.Of(i,this.Rf.Ff),this.wf=!0}Wf(t){const i=vs(t.changedTouches,f(this.bf));if(null===i)return;if(this.mf=fs(t),null!==this.cf)return;if(this.vf)return;this.ff=!0;const n=this.Cf(ds(i),f(this.if)),{jf:s,Hf:e,kf:r}=n;if(this.nf||!(r<5)){if(!this.nf){const t=.5*s,i=e>=t&&!this.fn.$f(),n=t>e&&!this.fn.Uf();i||n||(this.vf=!0),this.nf=!0,this.ef=!0,this.Vf(),this.Df()}if(!this.vf){const n=this.yf(t,i);this.Pf(n,this.Rf.qf),cs(t)}}}Yf(t){if(0!==t.button)return;const i=this.Cf(ds(t),f(this.tf)),{kf:n}=i;if(n>=5&&(this.sf=!0,this.Bf()),this.sf){const i=this.yf(t);this.Of(i,this.Rf.Xf)}}Cf(t,i){const n=Math.abs(i.nt-t.nt),s=Math.abs(i.st-t.st);return{jf:n,Hf:s,kf:n+s}}Kf(t){let i=vs(t.changedTouches,f(this.bf));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null===i)return;this.bf=null,this.mf=fs(t),this.Vf(),this.if=null,this.uf&&(this.uf(),this.uf=null);const n=this.yf(t,i);if(this.Pf(n,this.Rf.Zf),++this.Kd,this.Zd&&this.Kd>1){const{kf:t}=this.Cf(ds(i),this.Gd);t<30&&!this.ef&&this.Pf(n,this.Rf.Tf),this.Df()}else this.ef||(this.Pf(n,this.Rf.Gf),this.Rf.Gf&&cs(t));0===this.Kd&&cs(t),0===t.touches.length&&this.Qd&&(this.Qd=!1,cs(t))}Mf(t){if(0!==t.button)return;const i=this.yf(t);if(this.tf=null,this.pf=!1,this._f&&(this._f(),this._f=null),hs()){this.zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.gf)}if(!this.Sf(t))if(this.Of(i,this.Rf.Jf),++this.qd,this.Yd&&this.qd>1){const{kf:n}=this.Cf(ds(t),this.Xd);n<5&&!this.sf&&this.Of(i,this.Rf.Ef),this.Bf()}else this.sf||this.Of(i,this.Rf.Qf)}Vf(){null!==this.Jd&&(clearTimeout(this.Jd),this.Jd=null)}tv(t){if(null!==this.bf)return;const i=t.changedTouches[0];this.bf=i.identifier,this.mf=fs(t);const n=this.zf.ownerDocument.documentElement;this.ef=!1,this.nf=!1,this.vf=!1,this.if=ds(i),this.uf&&(this.uf(),this.uf=null);{const i=this.Wf.bind(this),s=this.Kf.bind(this);this.uf=()=>{n.removeEventListener("touchmove",i),n.removeEventListener("touchend",s)},n.addEventListener("touchmove",i,{passive:!1}),n.addEventListener("touchend",s,{passive:!1}),this.Vf(),this.Jd=setTimeout(this.iv.bind(this,t),240)}const s=this.yf(t,i);this.Pf(s,this.Rf.nv),this.Zd||(this.Kd=0,this.Zd=setTimeout(this.Df.bind(this),500),this.Gd=ds(i))}sv(t){if(0!==t.button)return;const i=this.zf.ownerDocument.documentElement;hs()&&i.addEventListener("mouseleave",this.gf),this.sf=!1,this.tf=ds(t),this._f&&(this._f(),this._f=null);{const t=this.Yf.bind(this),n=this.Mf.bind(this);this._f=()=>{i.removeEventListener("mousemove",t),i.removeEventListener("mouseup",n)},i.addEventListener("mousemove",t),i.addEventListener("mouseup",n)}if(this.pf=!0,this.Sf(t))return;const n=this.yf(t);this.Of(n,this.Rf.ev),this.Yd||(this.qd=0,this.Yd=setTimeout(this.Bf.bind(this),500),this.Xd=ds(t))}Af(){this.zf.addEventListener("mouseenter",this.If.bind(this)),this.zf.addEventListener("touchcancel",this.Vf.bind(this));{const t=this.zf.ownerDocument,i=t=>{this.Rf.rv&&(t.composed&&this.zf.contains(t.composedPath()[0])||t.target&&this.zf.contains(t.target)||this.Rf.rv())};this.hf=()=>{t.removeEventListener("touchstart",i)},this.rf=()=>{t.removeEventListener("mousedown",i)},t.addEventListener("mousedown",i),t.addEventListener("touchstart",i,{passive:!0})}ls()&&(this.lf=()=>{this.zf.removeEventListener("dblclick",this.xf)},this.zf.addEventListener("dblclick",this.xf)),this.zf.addEventListener("mouseleave",this.hv.bind(this)),this.zf.addEventListener("touchstart",this.tv.bind(this),{passive:!0}),os(this.zf),this.zf.addEventListener("mousedown",this.sv.bind(this)),this.lv(),this.zf.addEventListener("touchmove",(()=>{}),{passive:!1})}lv(){void 0===this.Rf.av&&void 0===this.Rf.ov&&void 0===this.Rf._v||(this.zf.addEventListener("touchstart",(t=>this.uv(t.touches)),{passive:!0}),this.zf.addEventListener("touchmove",(t=>{if(2===t.touches.length&&null!==this.cf&&void 0!==this.Rf.ov){const i=us(t.touches[0],t.touches[1])/this.df;this.Rf.ov(this.cf,i),cs(t)}}),{passive:!1}),this.zf.addEventListener("touchend",(t=>{this.uv(t.touches)})))}uv(t){1===t.length&&(this.ff=!1),2!==t.length||this.ff||this.Qd?this.cv():this.dv(t)}dv(t){const i=this.zf.getBoundingClientRect()||{left:0,top:0};this.cf={nt:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,st:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.df=us(t[0],t[1]),void 0!==this.Rf.av&&this.Rf.av(),this.Vf()}cv(){null!==this.cf&&(this.cf=null,void 0!==this.Rf._v&&this.Rf._v())}hv(t){if(this.af&&this.af(),this.Sf(t))return;if(!this.wf)return;const i=this.yf(t);this.Of(i,this.Rf.fv),this.wf=!ls()}iv(t){const i=vs(t.touches,f(this.bf));if(null===i)return;const n=this.yf(t,i);this.Pf(n,this.Rf.vv),this.ef=!0,this.Qd=!0}Sf(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:fs(t)<this.mf+500}Pf(t,i){i&&i.call(this.Rf,t)}Of(t,i){i&&i.call(this.Rf,t)}yf(t,i){const n=i||t,s=this.zf.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-s.left,localY:n.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,pv:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,mv:t.type,bv:n.target,wv:t.view,gv:()=>{"touchstart"!==t.type&&cs(t)}}}}function us(t,i){const n=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(n*n+s*s)}function cs(t){t.cancelable&&t.preventDefault()}function ds(t){return{nt:t.pageX,st:t.pageY}}function fs(t){return t.timeStamp||performance.now()}function vs(t,i){for(let n=0;n<t.length;++n)if(t[n].identifier===i)return t[n];return null}class ps{constructor(t,i,n,s){if(this.Mv=0,this.xv=0,this.Sv=0,this.yv=0,this.kv=0,this.Cv=0,this.Pv=0,this.Tv=!1,this.Rv="lwc-separator-handle",this.Dv="lwc-separator-handle--active",this.Ov=t,this.Ev=t.Bv()[i],this.zv=t.Bv()[n],this.Av=document.createElement("tr"),this.Av.style.height="1px",this.Vv=document.createElement("td"),this.Vv.style.position="relative",this.Vv.style.padding="0",this.Vv.style.margin="0",this.Vv.setAttribute("colspan","3"),this.Iv(),this.Av.appendChild(this.Vv),s)this.Lv=null,this.Nv=null;else{this.Lv=document.createElement("div"),this.Lv.classList.add(this.Rv),this.Lv.style.position="absolute",this.Lv.style.zIndex="50",this.Lv.style.top="-4px",this.Lv.style.height="9px",this.Lv.style.width="100%",this.Lv.style.backgroundColor="",this.Lv.style.cursor="row-resize",this.Vv.appendChild(this.Lv);const t={Nf:this.Fv.bind(this),fv:this.Wv.bind(this),ev:this.jv.bind(this),nv:this.jv.bind(this),Xf:this.Hv.bind(this),qf:this.Hv.bind(this),Jf:this.$v.bind(this),Zf:this.$v.bind(this)};this.Nv=new _s(this.Lv,t,{$f:()=>!1,Uf:()=>!0})}}S(){null!==this.Nv&&this.Nv.S()}Uv(){return this.Av}qv(){return Jn({width:this.Ev.qv().width,height:1})}Yv(){return Jn({width:this.Ev.Yv().width,height:1*window.devicePixelRatio})}Xv(t,i,n){const s=this.Yv();t.fillStyle=this.Ov.W().timeScale.borderColor,t.fillRect(i,n,s.width,s.height)}bt(){this.Iv()}Iv(){this.Vv.style.background=this.Ov.W().timeScale.borderColor}Fv(t){null!==this.Lv&&(this.Lv.style.backgroundColor="hsla(225,8%,72%,.2)")}Wv(t){null===this.Lv||this.Tv||(this.Lv.style.backgroundColor="")}jv(t){var i;this.Mv=t.pageY,this.xv=0,this.Sv=this.Ev.qv().height+this.zv.qv().height,this.yv=this.Ev.S_()+this.zv.S_();const n=this.Ev.Kv().k_(),s=this.zv.Kv().k_();this.kv=n,this.Cv=this.Sv-s,this.Pv=this.yv/this.Sv,this.Tv=!0,null===(i=this.Lv)||void 0===i||i.classList.add(this.Dv)}Hv(t){this.xv=t.pageY-this.Mv;const i=this.Ev.qv().height,n=wt(i+this.xv,this.kv,this.Cv)*this.Pv,s=this.yv-n;this.Ev.y_(n),this.zv.y_(s),this.Ov.Zv(),this.Ov.$t().Gl(),this.Ev.qv().height!==i&&(this.Mv=t.pageY),this.Ov.$t().Gl()}$v(t){var i;this.Mv=0,this.xv=0,this.Sv=0,this.yv=0,this.kv=0,this.Cv=0,this.Pv=0,this.Tv=!1,null===(i=this.Lv)||void 0===i||i.classList.remove(this.Dv),this.Wv(t)}}function ms(t,i){return t.Gv-i.Gv}function bs(t,i,n){const s=(t.Gv-i.Gv)/(t.ot-i.ot);return Math.sign(s)*Math.min(Math.abs(s),n)}class ws{constructor(t,i,n,s){this.Jv=null,this.Qv=null,this.tp=null,this.ip=null,this.np=null,this.sp=0,this.ep=0,this.rp=t,this.hp=i,this.lp=n,this.ls=s}ap(t,i){if(null!==this.Jv){if(this.Jv.ot===i)return void(this.Jv.Gv=t);if(Math.abs(this.Jv.Gv-t)<this.ls)return}this.ip=this.tp,this.tp=this.Qv,this.Qv=this.Jv,this.Jv={ot:i,Gv:t}}Er(t,i){if(null===this.Jv||null===this.Qv)return;if(i-this.Jv.ot>50)return;let n=0;const s=bs(this.Jv,this.Qv,this.hp),e=ms(this.Jv,this.Qv),r=[s],h=[e];if(n+=e,null!==this.tp){const t=bs(this.Qv,this.tp,this.hp);if(Math.sign(t)===Math.sign(s)){const i=ms(this.Qv,this.tp);if(r.push(t),h.push(i),n+=i,null!==this.ip){const t=bs(this.tp,this.ip,this.hp);if(Math.sign(t)===Math.sign(s)){const i=ms(this.tp,this.ip);r.push(t),h.push(i),n+=i}}}}let l=0;for(let t=0;t<r.length;++t)l+=h[t]/n*r[t];Math.abs(l)<this.rp||(this.np={Gv:t,ot:i},this.ep=l,this.sp=function(t,i){const n=Math.log(i);return Math.log(1*n/-t)/n}(Math.abs(l),this.lp))}ec(t){const i=f(this.np),n=t-i.ot;return i.Gv+this.ep*(Math.pow(this.lp,n)-1)/Math.log(this.lp)}sc(t){return null===this.np||this.op(t)===this.sp}op(t){const i=t-f(this.np).ot;return Math.min(i,this.sp)}}function gs(t,i){const n=f(t.ownerDocument).createElement("canvas");t.appendChild(n);const s=function(t,i){if("device-pixel-content-box"===i.type)return new is(t,i.transform,i.options);throw new Error("Unsupported binding target")}(n,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(t,i)=>({width:Math.max(t.width,i.width),height:Math.max(t.height,i.height)})});return s.resizeCanvasElement(i),s}function Ms(t){var i;t.width=1,t.height=1,null===(i=t.getContext("2d"))||void 0===i||i.clearRect(0,0,1,1)}function xs(t,i,n,s){t.Ml&&t.Ml(i,n,s)}function Ss(t,i,n,s){t.K(i,n,s)}function ys(t,i,n,s){const e=t(n,s);for(const t of e){const n=t.gt(s);null!==n&&i(n)}}function ks(t){return{Xc:t.Xc,_p:{Mr:t.up.externalId},cp:t.up.cursorStyle}}function Cs(t,i,n,s){for(const e of i){const i=e.gt(t);if(null!==i&&i.gr){const t=i.gr(n,s);if(null!==t)return{wv:e,_p:t}}}return null}function Ps(t,i){return n=>{var s,e,r,h;return(null!==(e=null===(s=n.Ot())||void 0===s?void 0:s.ba())&&void 0!==e?e:"")!==i?[]:null!==(h=null===(r=n.va)||void 0===r?void 0:r.call(n,t))&&void 0!==h?h:[]}}function Ts(t,i,n,s){if(!t.length)return;let e=0;const r=t[0].At(s,!0);let h=1===i?n/2-(t[0].Bi()-r/2):t[0].Bi()-r/2-n/2;h=Math.max(0,h);for(let r=1;r<t.length;r++){const l=t[r],a=t[r-1],o=a.At(s,!1),_=l.Bi(),u=a.Bi();if(1===i?_>u-o:_<u+o){const s=u-o*i;l.zi(s);const r=s-i*o/2;if((1===i?r<0:r>n)&&h>0){const s=1===i?-1-r:r-n,l=Math.min(s,h);for(let n=e;n<t.length;n++)t[n].zi(t[n].Bi()+i*l);h-=l}}else e=r,h=1===i?u-o-_:_-(u+o)}}class Rs{constructor(t,i,n,s){this.Ni=null,this.dp=null,this.fp=!1,this.vp=new Gt(200),this.th=null,this.pp=0,this.mp=!1,this.bp=()=>{this.mp||this.sn.wp().$t().qh()},this.gp=()=>{this.mp||this.sn.wp().$t().qh()},this.sn=t,this.fn=i,this.ko=i.layout,this.Ic=n,this.Mp="left"===s,this.xp=Ps("normal",s),this.Sp=Ps("top",s),this.yp=Ps("bottom",s),this.Vv=document.createElement("div"),this.Vv.style.height="100%",this.Vv.style.overflow="hidden",this.Vv.style.width="25px",this.Vv.style.left="0",this.Vv.style.position="relative",this.kp=gs(this.Vv,Jn({width:16,height:16})),this.kp.subscribeSuggestedBitmapSizeChanged(this.bp);const e=this.kp.canvasElement;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.Cp=gs(this.Vv,Jn({width:16,height:16})),this.Cp.subscribeSuggestedBitmapSizeChanged(this.gp);const r=this.Cp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";const h={ev:this.jv.bind(this),nv:this.jv.bind(this),Xf:this.Hv.bind(this),qf:this.Hv.bind(this),rv:this.Pp.bind(this),Jf:this.$v.bind(this),Zf:this.$v.bind(this),Ef:this.Tp.bind(this),Tf:this.Tp.bind(this),Nf:this.Rp.bind(this),fv:this.Wv.bind(this)};this.Nv=new _s(this.Cp.canvasElement,h,{$f:()=>!this.fn.handleScroll.vertTouchDrag,Uf:()=>!0})}S(){this.Nv.S(),this.Cp.unsubscribeSuggestedBitmapSizeChanged(this.gp),Ms(this.Cp.canvasElement),this.Cp.dispose(),this.kp.unsubscribeSuggestedBitmapSizeChanged(this.bp),Ms(this.kp.canvasElement),this.kp.dispose(),null!==this.Ni&&this.Ni.Go().p(this),this.Ni=null}Uv(){return this.Vv}T(){return this.ko.fontSize}Dp(){const t=this.Ic.W();return this.th!==t.R&&(this.vp.sr(),this.th=t.R),t}Op(){if(null===this.Ni)return 0;let t=0;const i=this.Dp(),n=f(this.kp.canvasElement.getContext("2d"));n.save();const s=this.Ni.$a();n.font=this.Ep(),s.length>0&&(t=Math.max(this.vp.Si(n,s[0].eo),this.vp.Si(n,s[s.length-1].eo)));const e=this.Bp();for(let i=e.length;i--;){const s=this.vp.Si(n,e[i].Gt());s>t&&(t=s)}const r=this.Ni.Pt();if(null!==r&&null!==this.dp){const i=this.Ni.bn(1,r),s=this.Ni.bn(this.dp.height-2,r);t=Math.max(t,this.vp.Si(n,this.Ni.ji(Math.floor(Math.min(i,s))+.11111111111111,r)),this.vp.Si(n,this.Ni.ji(Math.ceil(Math.max(i,s))-.11111111111111,r)))}n.restore();const h=t||34;return as(Math.ceil(i.C+i.P+i.V+i.I+5+h))}zp(t){null!==this.dp&&Qn(this.dp,t)||(this.dp=t,this.mp=!0,this.kp.resizeCanvasElement(t),this.Cp.resizeCanvasElement(t),this.mp=!1,this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`)}Ap(){return f(this.dp).width}Qi(t){this.Ni!==t&&(null!==this.Ni&&this.Ni.Go().p(this),this.Ni=t,t.Go().l(this.vo.bind(this),this))}Ot(){return this.Ni}sr(){const t=this.sn.Kv();this.sn.wp().$t().W_(t,f(this.Ot()))}Vp(t){if(null===this.dp)return;if(1!==t){this.Ip(),this.kp.applySuggestedBitmapSize();const t=es(this.kp);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.Lp(t),this.Ve(t)})),this.sn.Np(t,this.yp),this.Fp(t),this.sn.Np(t,this.xp),this.Wp(t))}this.Cp.applySuggestedBitmapSize();const i=es(this.Cp);null!==i&&(i.useBitmapCoordinateSpace((({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)})),this.jp(i),this.sn.Np(i,this.Sp))}Yv(){return this.kp.bitmapSize}Xv(t,i,n){const s=this.Yv();s.width>0&&s.height>0&&t.drawImage(this.kp.canvasElement,i,n)}bt(){var t;null===(t=this.Ni)||void 0===t||t.$a()}jv(t){if(null===this.Ni||this.Ni.Wi()||!this.fn.handleScale.axisPressedMouseMove.price)return;const i=this.sn.wp().$t(),n=this.sn.Kv();this.fp=!0,i.z_(n,this.Ni,t.localY)}Hv(t){if(null===this.Ni||!this.fn.handleScale.axisPressedMouseMove.price)return;const i=this.sn.wp().$t(),n=this.sn.Kv(),s=this.Ni;i.A_(n,s,t.localY)}Pp(){if(null===this.Ni||!this.fn.handleScale.axisPressedMouseMove.price)return;const t=this.sn.wp().$t(),i=this.sn.Kv(),n=this.Ni;this.fp&&(this.fp=!1,t.V_(i,n))}$v(t){if(null===this.Ni||!this.fn.handleScale.axisPressedMouseMove.price)return;const i=this.sn.wp().$t(),n=this.sn.Kv();this.fp=!1,i.V_(n,this.Ni)}Tp(t){this.fn.handleScale.axisDoubleClickReset.price&&this.sr()}Rp(t){if(null===this.Ni)return;!this.sn.wp().$t().W().handleScale.axisPressedMouseMove.price||this.Ni.xh()||this.Ni.Bo()||this.Hp(1)}Wv(t){this.Hp(0)}Bp(){const t=[],i=null===this.Ni?void 0:this.Ni;return(n=>{for(let s=0;s<n.length;++s){const e=n[s].On(this.sn.Kv(),i);for(let i=0;i<e.length;i++)t.push(e[i])}})(this.sn.Kv().qo()),t}Lp({context:t,bitmapSize:i}){const{width:n,height:s}=i,e=this.sn.Kv().$t(),r=e.q(),h=e.Td();r===h?q(t,0,0,n,s,r):K(t,0,0,n,s,r,h)}Ve({context:t,bitmapSize:i,horizontalPixelRatio:n}){if(null===this.dp||null===this.Ni||!this.Ni.W().borderVisible)return;t.fillStyle=this.Ni.W().borderColor;const s=Math.max(1,Math.floor(this.Dp().C*n));let e;e=this.Mp?i.width-s:0,t.fillRect(e,0,s,i.height)}Fp(t){if(null===this.dp||null===this.Ni)return;const i=this.Ni.$a(),n=this.Ni.W(),s=this.Dp(),e=this.Mp?this.dp.width-s.P:0;n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:r,verticalPixelRatio:h})=>{t.fillStyle=n.borderColor;const l=Math.max(1,Math.floor(h)),a=Math.floor(.5*h),o=Math.round(s.P*r);t.beginPath();for(const n of i)t.rect(Math.floor(e*r),Math.round(n.Na*h)-a,o,l);t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{var r;t.font=this.Ep(),t.fillStyle=null!==(r=n.textColor)&&void 0!==r?r:this.ko.textColor,t.textAlign=this.Mp?"right":"left",t.textBaseline="middle";const h=this.Mp?Math.round(e-s.V):Math.round(e+s.P+s.V),l=i.map((i=>this.vp.xi(t,i.eo)));for(let n=i.length;n--;){const s=i[n];t.fillText(s.eo,h,s.Na+l[n])}}))}Ip(){if(null===this.dp||null===this.Ni)return;let t=this.dp.height/2;const i=[],n=this.Ni.qo().slice(),s=this.sn.Kv(),e=this.Dp(),r=this.Ni.xt()[0],h=this.Ni;n.forEach((n=>{const e=n.On(s,h);e.forEach((t=>{t.zi(null),t.Ai()&&i.push(t)})),r===n&&e.length>0&&(t=e[0].ki())})),i.forEach((t=>t.zi(t.ki())));this.Ni.W().alignLabels&&this.$p(i,e,t)}$p(t,i,n){if(null===this.dp)return;const s=t.filter((t=>t.ki()<=n)),e=t.filter((t=>t.ki()>n));s.sort(((t,i)=>i.ki()-t.ki())),s.length&&e.length&&e.push(s[0]),e.sort(((t,i)=>t.ki()-i.ki()));for(const n of t){const t=Math.floor(n.At(i)/2),s=n.ki();s>-t&&s<t&&n.zi(t),s>this.dp.height-t&&s<this.dp.height+t&&n.zi(this.dp.height-t)}Ts(s,1,this.dp.height,i),Ts(e,-1,this.dp.height,i)}Wp(t){if(null===this.dp)return;const i=this.Bp(),n=this.Dp(),s=this.Mp?"right":"left";i.forEach((i=>{if(i.Vi()){i.gt(f(this.Ni)).K(t,n,this.vp,s)}}))}jp(t){if(null===this.dp||null===this.Ni)return;const i=this.sn.wp().$t(),n=[],s=this.sn.Kv(),e=i.td().On(s,this.Ni);e.length&&n.push(e);const r=this.Dp(),h=this.Mp?"right":"left";n.forEach((i=>{i.forEach((i=>{i.gt(f(this.Ni)).K(t,r,this.vp,h)}))}))}Hp(t){this.Vv.style.cursor=1===t?"ns-resize":"default"}vo(){const t=this.Op();this.pp<t&&this.sn.wp().$t().Gl(),this.pp=t}Ep(){return A(this.ko.fontSize,this.ko.fontFamily)}}function Ds(t,i){var n,s;return null!==(s=null===(n=t.da)||void 0===n?void 0:n.call(t,i))&&void 0!==s?s:[]}function Os(t,i){var n,s;return null!==(s=null===(n=t.Dn)||void 0===n?void 0:n.call(t,i))&&void 0!==s?s:[]}function Es(t,i){var n,s;return null!==(s=null===(n=t.tn)||void 0===n?void 0:n.call(t,i))&&void 0!==s?s:[]}function Bs(t,i){var n,s;return null!==(s=null===(n=t._a)||void 0===n?void 0:n.call(t,i))&&void 0!==s?s:[]}class zs{constructor(t,i){this.dp=Jn({width:0,height:0}),this.Up=null,this.qp=null,this.Yp=null,this.Xp=!1,this.Kp=new k,this.Zp=new k,this.Gp=new k,this.Jp=new k,this.Qp=0,this.tm=!1,this.im=null,this.nm=!1,this.sm=null,this.rm=null,this.mp=!1,this.bp=()=>{this.mp||null===this.hm||this.qi().qh()},this.gp=()=>{this.mp||null===this.hm||this.qi().qh()},this.lm=t,this.hm=i,this.hm.U_().l(this.am.bind(this),this,!0),this.om=document.createElement("td"),this.om.style.padding="0",this.om.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this._m=document.createElement("td"),this._m.style.padding="0",this.um=document.createElement("td"),this.um.style.padding="0",this.om.appendChild(n),this.kp=gs(n,Jn({width:16,height:16})),this.kp.subscribeSuggestedBitmapSizeChanged(this.bp);const s=this.kp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Cp=gs(n,Jn({width:16,height:16})),this.Cp.subscribeSuggestedBitmapSizeChanged(this.gp);const e=this.Cp.canvasElement;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0",this.Av=document.createElement("tr"),this.Av.appendChild(this._m),this.Av.appendChild(this.om),this.Av.appendChild(this.um),this.dm(),this.Nv=new _s(this.Cp.canvasElement,this,{$f:()=>null===this.im&&!this.lm.W().handleScroll.vertTouchDrag,Uf:()=>null===this.im&&!this.lm.W().handleScroll.horzTouchDrag})}S(){null!==this.Up&&this.Up.S(),null!==this.qp&&this.qp.S(),this.Cp.unsubscribeSuggestedBitmapSizeChanged(this.gp),Ms(this.Cp.canvasElement),this.Cp.dispose(),this.kp.unsubscribeSuggestedBitmapSizeChanged(this.bp),Ms(this.kp.canvasElement),this.kp.dispose(),null!==this.hm&&this.hm.U_().p(this),this.Nv.S()}Kv(){return f(this.hm)}fm(t){null!==this.hm&&this.hm.U_().p(this),this.hm=t,null!==this.hm&&this.hm.U_().l(zs.prototype.am.bind(this),this,!0),this.dm()}wp(){return this.lm}Uv(){return this.Av}dm(){if(null!==this.hm&&(this.vm(),0!==this.qi().wt().length)){if(null!==this.Up){const t=this.hm.E_();this.Up.Qi(f(t))}if(null!==this.qp){const t=this.hm.B_();this.qp.Qi(f(t))}}}pm(){null!==this.Up&&this.Up.bt(),null!==this.qp&&this.qp.bt()}S_(){return null!==this.hm?this.hm.S_():0}y_(t){this.hm&&this.hm.y_(t)}Nf(t){if(!this.hm)return;this.bm();const i=t.localX,n=t.localY;this.wm(i,n,t)}ev(t){this.bm(),this.gm(),this.wm(t.localX,t.localY,t),this.Mm(t)}Ff(t){var i;if(!this.hm)return;this.bm();const n=t.localX,s=t.localY;this.wm(n,s,t);const e=this.gr(n,s);this.lm.xm(null!==(i=null==e?void 0:e.cp)&&void 0!==i?i:null),this.qi().Yc(e&&{Xc:e.Xc,_p:e._p})}Qf(t){null!==this.hm&&(this.bm(),this.Sm(t))}Ef(t){null!==this.hm&&this.ym(this.Jp,t)}Tf(t){this.Ef(t)}Xf(t){this.bm(),this.km(t),this.wm(t.localX,t.localY,t)}Jf(t){null!==this.hm&&(this.bm(),this.tm=!1,this.Cm(t),this.Pm(t))}Gf(t){null!==this.hm&&this.Sm(t)}vv(t){if(this.tm=!0,null===this.im){const i={x:t.localX,y:t.localY};this.Tm(i,i,t)}}fv(t){null!==this.hm&&(this.bm(),this.hm.$t().Yc(null),this.Rm())}Dm(){return this.Kp}Om(){return this.Jp}Em(){return this.Zp}Bm(){return this.Gp}av(){this.Qp=1,this.qi().Yn()}ov(t,i){if(!this.lm.W().handleScale.pinch)return;const n=5*(i-this.Qp);this.Qp=i,this.qi()._d(t.nt,n)}nv(t){this.tm=!1,this.nm=null!==this.im,this.gm();const i=this.qi().td();null!==this.im&&i.Ct()&&(this.sm={x:i.Xt(),y:i.Kt()},this.im={x:t.localX,y:t.localY})}qf(t){if(null===this.hm)return;const i=t.localX,n=t.localY;if(null===this.im)this.km(t);else{this.nm=!1;const s=f(this.sm),e=s.x+(i-this.im.x),r=s.y+(n-this.im.y);this.wm(e,r,t)}}Zf(t){0===this.wp().W().trackingMode.exitMode&&(this.nm=!0),this.zm(),this.Cm(t)}gr(t,i){const n=this.hm;return null===n?null:function(t,i,n){const s=t.qo(),e=function(t,i,n){var s,e;let r,h;for(const o of t){const t=null!==(e=null===(s=o.ma)||void 0===s?void 0:s.call(o,i,n))&&void 0!==e?e:[];for(const i of t)l=i.zOrder,(!(a=null==r?void 0:r.zOrder)||"top"===l&&"top"!==a||"normal"===l&&"bottom"===a)&&(r=i,h=o)}var l,a;return r&&h?{up:r,Xc:h}:null}(s,i,n);if("top"===(null==e?void 0:e.up.zOrder))return ks(e);for(const r of s){if(e&&e.Xc===r&&"bottom"!==e.up.zOrder&&!e.up.isBackground)return ks(e);const s=Cs(t,r.Dn(t),i,n);if(null!==s)return{Xc:r,wv:s.wv,_p:s._p};if(e&&e.Xc===r&&"bottom"!==e.up.zOrder&&e.up.isBackground)return ks(e)}return(null==e?void 0:e.up)?ks(e):null}(n,t,i)}Am(t,i){f("left"===i?this.Up:this.qp).zp(Jn({width:t,height:this.dp.height}))}qv(){return this.dp}zp(t){Qn(this.dp,t)||(this.dp=t,this.mp=!0,this.kp.resizeCanvasElement(t),this.Cp.resizeCanvasElement(t),this.mp=!1,this.om.style.width=t.width+"px",this.om.style.height=t.height+"px")}Vm(){const t=f(this.hm);t.O_(t.E_()),t.O_(t.B_());for(const i of t.xt())if(t.pr(i)){const n=i.Ot();null!==n&&t.O_(n),i.Bn()}}Yv(){return this.kp.bitmapSize}Xv(t,i,n){const s=this.Yv();s.width>0&&s.height>0&&t.drawImage(this.kp.canvasElement,i,n)}Vp(t){if(0===t)return;if(null===this.hm)return;if(t>1&&this.Vm(),null!==this.Up&&this.Up.Vp(t),null!==this.qp&&this.qp.Vp(t),1!==t){this.kp.applySuggestedBitmapSize();const t=es(this.kp);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.Lp(t)})),this.hm&&(this.Im(t,Ds),this.Lm(t),this.Nm(t),this.Im(t,Os),this.Im(t,Es)))}this.Cp.applySuggestedBitmapSize();const i=es(this.Cp);null!==i&&(i.useBitmapCoordinateSpace((({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)})),this.Fm(i),this.Im(i,Bs))}Wm(){return this.om}jm(){return this.Up}Hm(){return this.qp}Np(t,i){this.Im(t,i)}am(){null!==this.hm&&this.hm.U_().p(this),this.hm=null}Sm(t){this.ym(this.Kp,t)}Mm(t){this.ym(this.Zp,t)}Pm(t){this.ym(this.Gp,t)}ym(t,i){const n=i.localX,s=i.localY;if(t.M()){const e=this.qi().Kc(f(this.hm));t.m(this.qi().yt().ju(n),{x:n,y:s,$m:e},i)}}Lp({context:t,bitmapSize:i}){const{width:n,height:s}=i,e=this.qi(),r=e.q(),h=e.Td();r===h?q(t,0,0,n,s,h):K(t,0,0,n,s,r,h)}Lm(t){const i=f(this.hm),n=i.q_().Yh().gt(i);null!==n&&n.K(t,!1)}Nm(t){const i=this.qi().Qc();this.Um(t,Os,xs,i),this.Um(t,Os,Ss,i)}Fm(t){this.Um(t,Os,Ss,this.qi().td())}Im(t,i){const n=f(this.hm).qo();for(const s of n)this.Um(t,i,xs,s);for(const s of n)this.Um(t,i,Ss,s)}Um(t,i,n,s){const e=f(this.hm),r=e.$t().qc(),h=null!==r&&r.Xc===s,l=null!==r&&h&&void 0!==r._p?r._p.Sr:void 0;ys(i,(i=>n(i,t,h,l)),s,e)}vm(){if(null===this.hm)return;const t=this.lm,i=this.hm.E_().W().visible,n=this.hm.B_().W().visible;i||null===this.Up||(this._m.removeChild(this.Up.Uv()),this.Up.S(),this.Up=null),n||null===this.qp||(this.um.removeChild(this.qp.Uv()),this.qp.S(),this.qp=null);const s=t.$t().xd();i&&null===this.Up&&(this.Up=new Rs(this,t.W(),s,"left"),this._m.appendChild(this.Up.Uv())),n&&null===this.qp&&(this.qp=new Rs(this,t.W(),s,"right"),this.um.appendChild(this.qp.Uv()))}qm(t){return t.pv&&this.tm||null!==this.im}Ym(t){return Math.max(0,Math.min(t,this.dp.width-1))}Xm(t){return Math.max(0,Math.min(t,this.dp.height-1))}wm(t,i,n){this.qi().bd(this.Ym(t),this.Xm(i),n,f(this.hm))}Rm(){this.qi().gd()}zm(){this.nm&&(this.im=null,this.Rm())}Tm(t,i,n){this.im=t,this.nm=!1,this.wm(i.x,i.y,n);const s=this.qi().td();this.sm={x:s.Xt(),y:s.Kt()}}qi(){return this.lm.$t()}Cm(t){if(!this.Xp)return;const i=this.qi(),n=this.Kv();if(i.N_(n,n.mn()),this.Yp=null,this.Xp=!1,i.vd(),null!==this.rm){const t=performance.now(),n=i.yt();this.rm.Er(n.qu(),t),this.rm.sc(t)||i.Zn(this.rm)}}bm(){this.im=null}gm(){if(!this.hm)return;if(this.qi().Yn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)f(document.activeElement).blur();else{const t=document.getSelection();null!==t&&t.removeAllRanges()}!this.hm.mn().Wi()&&this.qi().yt().Wi()}km(t){if(null===this.hm)return;const i=this.qi(),n=i.yt();if(n.Wi())return;const s=this.lm.W(),e=s.handleScroll,r=s.kineticScroll;if((!e.pressedMouseMove||t.pv)&&(!e.horzTouchDrag&&!e.vertTouchDrag||!t.pv))return;const h=this.hm.mn(),l=performance.now();if(null!==this.Yp||this.qm(t)||(this.Yp={x:t.clientX,y:t.clientY,jd:l,Km:t.localX,Zm:t.localY}),null!==this.Yp&&!this.Xp&&(this.Yp.x!==t.clientX||this.Yp.y!==t.clientY)){if(t.pv&&r.touch||!t.pv&&r.mouse){const t=n.ae();this.rm=new ws(.2/t,7/t,.997,15/t),this.rm.ap(n.qu(),this.Yp.jd)}else this.rm=null;h.Wi()||i.I_(this.hm,h,t.localY),i.dd(t.localX),this.Xp=!0}this.Xp&&(h.Wi()||i.L_(this.hm,h,t.localY),i.fd(t.localX),null!==this.rm&&this.rm.ap(n.qu(),l))}}class As{constructor(t,i,n,s,e){this.Ri=!0,this.dp=Jn({width:0,height:0}),this.bp=()=>this.Vp(3),this.Mp="left"===t,this.Ic=n.xd,this.fn=i,this.Gm=s,this.Jm=e,this.Vv=document.createElement("div"),this.Vv.style.width="25px",this.Vv.style.height="100%",this.Vv.style.overflow="hidden",this.kp=gs(this.Vv,Jn({width:16,height:16})),this.kp.subscribeSuggestedBitmapSizeChanged(this.bp)}S(){this.kp.unsubscribeSuggestedBitmapSizeChanged(this.bp),Ms(this.kp.canvasElement),this.kp.dispose()}Uv(){return this.Vv}qv(){return this.dp}zp(t){Qn(this.dp,t)||(this.dp=t,this.kp.resizeCanvasElement(t),this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`,this.Ri=!0)}Vp(t){if(t<3&&!this.Ri)return;if(0===this.dp.width||0===this.dp.height)return;this.Ri=!1,this.kp.applySuggestedBitmapSize();const i=es(this.kp);null!==i&&i.useBitmapCoordinateSpace((t=>{this.Lp(t),this.Ve(t)}))}Yv(){return this.kp.bitmapSize}Xv(t,i,n){const s=this.Yv();s.width>0&&s.height>0&&t.drawImage(this.kp.canvasElement,i,n)}Ve({context:t,bitmapSize:i,horizontalPixelRatio:n,verticalPixelRatio:s}){if(!this.Gm())return;t.fillStyle=this.fn.timeScale.borderColor;const e=Math.floor(this.Ic.W().C*n),r=Math.floor(this.Ic.W().C*s),h=this.Mp?i.width-e:0;t.fillRect(h,0,e,r)}Lp({context:t,bitmapSize:i}){q(t,0,0,i.width,i.height,this.Jm())}}function Vs(t){return i=>{var n,s;return null!==(s=null===(n=i.pa)||void 0===n?void 0:n.call(i,t))&&void 0!==s?s:[]}}const Is=Vs("normal"),Ls=Vs("top"),Ns=Vs("bottom");class Fs{constructor(t,i){this.Qm=null,this.tb=null,this.k=null,this.Zp=!1,this.dp=Jn({width:0,height:0}),this.ib=new k,this.vp=new Gt(5),this.mp=!1,this.bp=()=>{this.mp||this.lm.$t().qh()},this.gp=()=>{this.mp||this.lm.$t().qh()},this.lm=t,this.K_=i,this.fn=t.W().layout,this.nb=document.createElement("tr"),this.sb=document.createElement("td"),this.sb.style.padding="0",this.eb=document.createElement("td"),this.eb.style.padding="0",this.Vv=document.createElement("td"),this.Vv.style.height="25px",this.Vv.style.padding="0",this.rb=document.createElement("div"),this.rb.style.width="100%",this.rb.style.height="100%",this.rb.style.position="relative",this.rb.style.overflow="hidden",this.Vv.appendChild(this.rb),this.kp=gs(this.rb,Jn({width:16,height:16})),this.kp.subscribeSuggestedBitmapSizeChanged(this.bp);const n=this.kp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Cp=gs(this.rb,Jn({width:16,height:16})),this.Cp.subscribeSuggestedBitmapSizeChanged(this.gp);const s=this.Cp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.nb.appendChild(this.sb),this.nb.appendChild(this.Vv),this.nb.appendChild(this.eb),this.hb(),this.lm.$t().x_().l(this.hb.bind(this),this),this.Nv=new _s(this.Cp.canvasElement,this,{$f:()=>!0,Uf:()=>!this.lm.W().handleScroll.horzTouchDrag})}S(){this.Nv.S(),null!==this.Qm&&this.Qm.S(),null!==this.tb&&this.tb.S(),this.Cp.unsubscribeSuggestedBitmapSizeChanged(this.gp),Ms(this.Cp.canvasElement),this.Cp.dispose(),this.kp.unsubscribeSuggestedBitmapSizeChanged(this.bp),Ms(this.kp.canvasElement),this.kp.dispose()}Uv(){return this.nb}lb(){return this.Qm}ab(){return this.tb}ev(t){if(this.Zp)return;this.Zp=!0;const i=this.lm.$t();!i.yt().Wi()&&this.lm.W().handleScale.axisPressedMouseMove.time&&i.od(t.localX)}nv(t){this.ev(t)}rv(){const t=this.lm.$t();!t.yt().Wi()&&this.Zp&&(this.Zp=!1,this.lm.W().handleScale.axisPressedMouseMove.time&&t.md())}Xf(t){const i=this.lm.$t();!i.yt().Wi()&&this.lm.W().handleScale.axisPressedMouseMove.time&&i.pd(t.localX)}qf(t){this.Xf(t)}Jf(){this.Zp=!1;const t=this.lm.$t();t.yt().Wi()&&!this.lm.W().handleScale.axisPressedMouseMove.time||t.md()}Zf(){this.Jf()}Ef(){this.lm.W().handleScale.axisDoubleClickReset.time&&this.lm.$t().Jn()}Tf(){this.Ef()}Nf(){this.lm.$t().W().handleScale.axisPressedMouseMove.time&&this.Hp(1)}fv(){this.Hp(0)}qv(){return this.dp}ob(){return this.ib}_b(t,i,n){Qn(this.dp,t)||(this.dp=t,this.mp=!0,this.kp.resizeCanvasElement(t),this.Cp.resizeCanvasElement(t),this.mp=!1,this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`,this.ib.m(t)),null!==this.Qm&&this.Qm.zp(Jn({width:i,height:t.height})),null!==this.tb&&this.tb.zp(Jn({width:n,height:t.height}))}ub(){const t=this.cb();return Math.ceil(t.C+t.P+t.T+t.L+t.A+t.fb)}bt(){this.lm.$t().yt().$a()}Yv(){return this.kp.bitmapSize}Xv(t,i,n){const s=this.Yv();s.width>0&&s.height>0&&t.drawImage(this.kp.canvasElement,i,n)}Vp(t){if(0===t)return;if(1!==t){this.kp.applySuggestedBitmapSize();const i=es(this.kp);null!==i&&(i.useBitmapCoordinateSpace((t=>{this.Lp(t),this.Ve(t),this.pb(i,Ns)})),this.Fp(i),this.pb(i,Is)),null!==this.Qm&&this.Qm.Vp(t),null!==this.tb&&this.tb.Vp(t)}this.Cp.applySuggestedBitmapSize();const i=es(this.Cp);null!==i&&(i.useBitmapCoordinateSpace((({context:t,bitmapSize:i})=>{t.clearRect(0,0,i.width,i.height)})),this.mb([...this.lm.$t().wt(),this.lm.$t().td()],i),this.pb(i,Ls))}pb(t,i){const n=this.lm.$t().wt();for(const s of n)ys(i,(i=>xs(i,t,!1,void 0)),s,void 0);for(const s of n)ys(i,(i=>Ss(i,t,!1,void 0)),s,void 0)}Lp({context:t,bitmapSize:i}){q(t,0,0,i.width,i.height,this.lm.$t().Td())}Ve({context:t,bitmapSize:i,verticalPixelRatio:n}){if(this.lm.W().timeScale.borderVisible){t.fillStyle=this.bb();const s=Math.max(1,Math.floor(this.cb().C*n));t.fillRect(0,0,i.width,s)}}Fp(t){const i=this.lm.$t().yt(),n=i.$a();if(!n||0===n.length)return;const s=this.K_.maxTickMarkWeight(n),e=this.cb(),r=i.W();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{t.strokeStyle=this.bb(),t.fillStyle=this.bb();const r=Math.max(1,Math.floor(i)),h=Math.floor(.5*i);t.beginPath();const l=Math.round(e.P*s);for(let s=n.length;s--;){const e=Math.round(n[s].coord*i);t.rect(e-h,0,r,l)}t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{const i=e.C+e.P+e.L+e.T/2;t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.$(),t.font=this.Ep();for(const e of n)if(e.weight<s){const n=e.needAlignCoordinate?this.wb(t,e.coord,e.label):e.coord;t.fillText(e.label,n,i)}this.lm.W().timeScale.allowBoldLabels&&(t.font=this.gb());for(const e of n)if(e.weight>=s){const n=e.needAlignCoordinate?this.wb(t,e.coord,e.label):e.coord;t.fillText(e.label,n,i)}}))}wb(t,i,n){const s=this.vp.Si(t,n),e=s/2,r=Math.floor(i-e)+.5;return r<0?i+=Math.abs(0-r):r+s>this.dp.width&&(i-=Math.abs(this.dp.width-(r+s))),i}mb(t,i){const n=this.cb();for(const s of t)for(const t of s.nn())t.gt().K(i,n)}bb(){return this.lm.W().timeScale.borderColor}$(){return this.fn.textColor}j(){return this.fn.fontSize}Ep(){return A(this.j(),this.fn.fontFamily)}gb(){return A(this.j(),this.fn.fontFamily,"bold")}cb(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,A:NaN,$i:NaN,P:5,T:NaN,R:"",Hi:new Gt,fb:0});const t=this.k,i=this.Ep();if(t.R!==i){const n=this.j();t.T=n,t.R=i,t.L=3*n/12,t.A=3*n/12,t.$i=9*n/12,t.N=0,t.fb=4*n/12,t.Hi.sr()}return this.k}Hp(t){this.Vv.style.cursor=1===t?"ew-resize":"default"}hb(){const t=this.lm.$t(),i=t.W();i.leftPriceScale.visible||null===this.Qm||(this.sb.removeChild(this.Qm.Uv()),this.Qm.S(),this.Qm=null),i.rightPriceScale.visible||null===this.tb||(this.eb.removeChild(this.tb.Uv()),this.tb.S(),this.tb=null);const n={xd:this.lm.$t().xd()},s=()=>i.leftPriceScale.borderVisible&&t.yt().W().borderVisible,e=()=>t.Td();i.leftPriceScale.visible&&null===this.Qm&&(this.Qm=new As("left",i,n,s,e),this.sb.appendChild(this.Qm.Uv())),i.rightPriceScale.visible&&null===this.tb&&(this.tb=new As("right",i,n,s,e),this.eb.appendChild(this.tb.Uv()))}}const Ws=!!rs&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((t=>t.brand.includes("Chromium")))&&!!rs&&((null===(js=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===js?void 0:js.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);var js;class Hs{constructor(t,i,n){var s;this.Mb=[],this.xb=[],this.Sb=0,this.lo=0,this.c_=0,this.yb=0,this.kb=0,this.Cb=null,this.Pb=!1,this.Kp=new k,this.Zp=new k,this.Gp=new k,this.Jp=new k,this.Bc=new k,this.Tb=null,this.Rb=null,this.Db=t,this.fn=i,this.K_=n,this.nb=document.createElement("div"),this.nb.classList.add("tv-lightweight-charts"),this.nb.style.overflow="hidden",this.nb.style.direction="ltr",this.nb.style.width="100%",this.nb.style.height="100%",(s=this.nb).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Ob=document.createElement("table"),this.Ob.setAttribute("cellspacing","0"),this.nb.appendChild(this.Ob),this.Eb=this.Bb.bind(this),$s(this.fn)&&this.zb(!0),this.qi=new Bn(this.Vc.bind(this),this.fn,n),this.$t().nd().l(this.Ab.bind(this),this),this.Vb=new Fs(this,this.K_),this.Ob.appendChild(this.Vb.Uv());const e=i.autoSize&&this.Ib();let r=this.fn.width,h=this.fn.height;if(e||0===r||0===h){const i=t.getBoundingClientRect();r=r||i.width,h=h||i.height}this.Lb(r,h),this.Nb(),t.appendChild(this.nb),this.Fb(),this.qi.yt().lc().l(this.qi.Gl.bind(this.qi),this),this.qi.x_().l(this.qi.Gl.bind(this.qi),this)}$t(){return this.qi}W(){return this.fn}Bv(){return this.Mb}Wb(){return this.Vb}S(){this.zb(!1),0!==this.Sb&&window.cancelAnimationFrame(this.Sb),this.qi.nd().p(this),this.qi.yt().lc().p(this),this.qi.x_().p(this),this.qi.S();for(const t of this.Mb)this.Ob.removeChild(t.Uv()),t.Dm().p(this),t.Om().p(this),t.Em().p(this),t.Bm().p(this),t.S();this.Mb=[];for(const t of this.xb)this.jb(t);this.xb=[],f(this.Vb).S(),null!==this.nb.parentElement&&this.nb.parentElement.removeChild(this.nb),this.Bc.S(),this.Kp.S(),this.Jp.S(),this.Zp.S(),this.Gp.S(),this.Hb()}Lb(t,i,n=!1){if(this.lo===i&&this.c_===t)return;const s=function(t){const i=Math.floor(t.width),n=Math.floor(t.height);return Jn({width:i-i%2,height:n-n%2})}(Jn({width:t,height:i}));this.lo=s.height,this.c_=s.width;const e=this.lo+"px",r=this.c_+"px";f(this.nb).style.height=e,f(this.nb).style.width=r,this.Ob.style.height=e,this.Ob.style.width=r,n?this.$b(ht.hs(),performance.now()):this.qi.Gl()}Vp(t){void 0===t&&(t=ht.hs());for(let i=0;i<this.Mb.length;i++)this.Mb[i].Vp(t.Un(i).jn);this.fn.timeScale.visible&&this.Vb.Vp(t.$n())}Uh(t){const i=$s(this.fn);this.qi.Uh(t);const n=$s(this.fn);n!==i&&this.zb(n),this.Fb(),this.Ub(t)}Dm(){return this.Kp}Om(){return this.Jp}nd(){return this.Bc}Em(){return this.Zp}Bm(){return this.Gp}qb(){null!==this.Cb&&(this.$b(this.Cb,performance.now()),this.Cb=null);const t=this.Yb(null),i=document.createElement("canvas");i.width=t.width,i.height=t.height;const n=f(i.getContext("2d"));return this.Yb(n),i}Xb(t){if("left"===t&&!this.Kb())return 0;if("right"===t&&!this.Zb())return 0;if(0===this.Mb.length)return 0;return f("left"===t?this.Mb[0].jm():this.Mb[0].Hm()).Ap()}Gb(){return this.fn.autoSize&&null!==this.Tb}Jb(){return this.nb}xm(t){this.Rb=t,this.Rb?this.Jb().style.setProperty("cursor",t):this.Jb().style.removeProperty("cursor")}Qb(){return this.Rb}tw(){return d(this.Mb[0]).qv()}Zv(){this.iw()}Ub(t){(void 0!==t.autoSize||!this.Tb||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Tb&&this.Ib(),!1===t.autoSize&&null!==this.Tb&&this.Hb(),t.autoSize||void 0===t.width&&void 0===t.height||this.Lb(t.width||this.c_,t.height||this.lo))}Yb(t){let i=0,n=0;const s=this.Mb[0],e=(i,n)=>{let s=0;for(let e=0;e<this.Mb.length;e++){const r=this.Mb[e],h=f("left"===i?r.jm():r.Hm()),l=h.Yv();if(null!==t&&h.Xv(t,n,s),s+=l.height,e<this.Mb.length-1){const i=this.xb[e],r=i.Yv();null!==t&&i.Xv(t,n,s),s+=r.height}}};if(this.Kb()){e("left",0);i+=f(s.jm()).Yv().width}for(let s=0;s<this.Mb.length;s++){const e=this.Mb[s],r=e.Yv();if(null!==t&&e.Xv(t,i,n),n+=r.height,s<this.Mb.length-1){const e=this.xb[s],r=e.Yv();null!==t&&e.Xv(t,i,n),n+=r.height}}if(i+=s.Yv().width,this.Zb()){e("right",i);i+=f(s.Hm()).Yv().width}const r=(i,n,s)=>{f("left"===i?this.Vb.lb():this.Vb.ab()).Xv(f(t),n,s)};if(this.fn.timeScale.visible){const i=this.Vb.Yv();if(null!==t){let e=0;this.Kb()&&(r("left",e,n),e=f(s.jm()).Yv().width),this.Vb.Xv(t,e,n),e+=i.width,this.Zb()&&r("right",e,n)}n+=i.height}return Jn({width:i,height:n})}iw(){var t;let i=0,n=0,s=0;n=as(n),s=as(s);const e=this.c_,r=this.lo,h=1*this.xb.length,l=this.fn.timeScale.visible;let a=l?Math.max(this.Vb.ub(),this.fn.timeScale.minimumHeight):0;var o;a=(o=a)+o%2;const _=h+a,u=r<_?0:r-_;for(const t of this.Mb){this.Kb()&&(n=Math.max(n,f(t.jm()).Op(),this.fn.leftPriceScale.minimumWidth)),this.Zb()&&(s=Math.max(s,f(t.Hm()).Op(),this.fn.rightPriceScale.minimumWidth));const e=u/t.Kv().k_();i+=Math.max(t.S_(),e)}const c=u/i,d=Math.max(e-n-s,0);let v=0;const p=(null===(t=document.body.ownerDocument.defaultView)||void 0===t?void 0:t.devicePixelRatio)||1;for(let t=0;t<this.Mb.length;++t){const i=this.Mb[t];i.fm(this.qi.Jc()[t]);let e=0,r=0;r=t===this.Mb.length-1?Math.ceil((u-v)*p)/p:Math.round(i.S_()*c*p)/p,e=Math.max(r,2),v+=e,i.zp(Jn({width:d,height:e})),this.Kb()&&i.Am(n,"left"),this.Zb()&&i.Am(s,"right"),i.Kv()&&this.qi.sd(i.Kv(),e)}this.Vb._b(Jn({width:l?d:0,height:a}),l?n:0,l?s:0),this.qi.C_(d),this.yb!==n&&(this.yb=n),this.kb!==s&&(this.kb=s)}zb(t){t?this.nb.addEventListener("wheel",this.Eb,{passive:!1}):this.nb.removeEventListener("wheel",this.Eb)}nw(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Ws?1/window.devicePixelRatio:1}Bb(t){if(!(0!==t.deltaX&&this.fn.handleScroll.mouseWheel||0!==t.deltaY&&this.fn.handleScale.mouseWheel))return;const i=this.nw(t),n=i*t.deltaX/100,s=-i*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this.fn.handleScale.mouseWheel){const i=Math.sign(s)*Math.min(1,Math.abs(s)),n=t.clientX-this.nb.getBoundingClientRect().left;this.$t()._d(n,i)}0!==n&&this.fn.handleScroll.mouseWheel&&this.$t().ud(-80*n)}$b(t,i){var n;const s=t.$n();3===s&&this.sw(),3!==s&&2!==s||(this.ew(t),this.rw(t,i),this.Vb.bt(),this.Mb.forEach((t=>{t.pm()})),3===(null===(n=this.Cb)||void 0===n?void 0:n.$n())&&(this.Cb.ss(t),this.sw(),this.ew(this.Cb),this.rw(this.Cb,i),t=this.Cb,this.Cb=null)),this.Vp(t)}rw(t,i){for(const n of t.ns())this.es(n,i)}ew(t){const i=this.qi.Jc();for(let n=0;n<i.length;n++)t.Un(n).Hn&&i[n].j_()}es(t,i){const n=this.qi.yt();switch(t.Xn){case 0:n.oc();break;case 1:n._c(t.Et);break;case 2:n.Qn(t.Et);break;case 3:n.ts(t.Et);break;case 4:n.Ku();break;case 5:t.Et.sc(i)||n.ts(t.Et.ec(i))}}Vc(t){null!==this.Cb?this.Cb.ss(t):this.Cb=t,this.Pb||(this.Pb=!0,this.Sb=window.requestAnimationFrame((t=>{if(this.Pb=!1,this.Sb=0,null!==this.Cb){const i=this.Cb;this.Cb=null,this.$b(i,t);for(const n of i.ns())if(5===n.Xn&&!n.Et.sc(t)){this.$t().Zn(n.Et);break}}})))}sw(){this.Nb()}jb(t){this.Ob.removeChild(t.Uv()),t.S()}Nb(){const t=this.qi.Jc(),i=t.length,n=this.Mb.length;for(let t=i;t<n;t++){const t=d(this.Mb.pop());this.Ob.removeChild(t.Uv()),t.Dm().p(this),t.Om().p(this),t.Em().p(this),t.Bm().p(this),t.S();const i=this.xb.pop();void 0!==i&&this.jb(i)}for(let s=n;s<i;s++){const i=new zs(this,t[s]);if(i.Dm().l(this.hw.bind(this),this),i.Om().l(this.lw.bind(this),this),i.Em().l(this.aw.bind(this),this),i.Bm().l(this.ow.bind(this),this),this.Mb.push(i),s>=1){const t=!this.fn.layout.resizePanes,i=new ps(this,s-1,s,t);this.xb.push(i),this.Ob.insertBefore(i.Uv(),this.Vb.Uv())}this.Ob.insertBefore(i.Uv(),this.Vb.Uv())}for(let n=0;n<i;n++){const i=t[n],s=this.Mb[n];s.Kv()!==i?s.fm(i):s.dm()}this.Fb(),this.iw()}_w(t,i,n){var s,e;const r=new Map;if(null!==t){this.qi.wt().forEach((i=>{const n=i.In().al(t);null!==n&&r.set(i,n)}))}let h;if(null!==t){const i=null===(s=this.qi.yt().Yi(t))||void 0===s?void 0:s.originalTime;void 0!==i&&(h=i)}const l=this.$t().qc(),a=null!==l&&l.Xc instanceof qi?l.Xc:void 0,o=null!==l&&void 0!==l._p?l._p.Mr:void 0;return{uw:h,re:null!=t?t:void 0,cw:null!=i?i:void 0,$m:null!==(e=null==i?void 0:i.$m)&&void 0!==e?e:void 0,dw:a,fw:r,pw:o,mw:null!=n?n:void 0}}hw(t,i,n){this.Kp.m((()=>this._w(t,i,n)))}lw(t,i,n){this.Jp.m((()=>this._w(t,i,n)))}Ab(t,i,n){this.Bc.m((()=>this._w(t,i,n)))}aw(t,i,n){this.Zp.m((()=>this._w(t,i,n)))}ow(t,i,n){this.Gp.m((()=>this._w(t,i,n)))}Fb(){const t=this.fn.timeScale.visible?"":"none";this.Vb.Uv().style.display=t}Kb(){return this.Mb[0].Kv().E_().W().visible}Zb(){return this.Mb[0].Kv().B_().W().visible}Ib(){return"ResizeObserver"in window&&(this.Tb=new ResizeObserver((t=>{const i=t.find((t=>t.target===this.Db));i&&this.Lb(i.contentRect.width,i.contentRect.height)})),this.Tb.observe(this.Db,{box:"border-box"}),!0)}Hb(){null!==this.Tb&&this.Tb.disconnect(),this.Tb=null}}function $s(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function Us(t,i){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(s=Object.getOwnPropertySymbols(t);e<s.length;e++)i.indexOf(s[e])<0&&Object.prototype.propertyIsEnumerable.call(t,s[e])&&(n[s[e]]=t[s[e]])}return n}function qs(t,i,n,s){const e=n.value,r={re:i,ot:t,Et:[e,e,e,e],uw:s};return void 0!==n.color&&(r.O=n.color),r}function Ys(t,i,n,s){const e=n.value,r={re:i,ot:t,Et:[e,e,e,e],uw:s};return void 0!==n.lineColor&&(r.lt=n.lineColor),void 0!==n.topColor&&(r.Rs=n.topColor),void 0!==n.bottomColor&&(r.Ds=n.bottomColor),r}function Xs(t,i,n,s){const e=n.value,r={re:i,ot:t,Et:[e,e,e,e],uw:s};return void 0!==n.topLineColor&&(r.De=n.topLineColor),void 0!==n.bottomLineColor&&(r.Oe=n.bottomLineColor),void 0!==n.topFillColor1&&(r.ke=n.topFillColor1),void 0!==n.topFillColor2&&(r.Ce=n.topFillColor2),void 0!==n.bottomFillColor1&&(r.Pe=n.bottomFillColor1),void 0!==n.bottomFillColor2&&(r.Te=n.bottomFillColor2),r}function Ks(t,i,n,s){const e={re:i,ot:t,Et:[n.open,n.high,n.low,n.close],uw:s};return void 0!==n.color&&(e.O=n.color),e}function Zs(t,i,n,s){const e={re:i,ot:t,Et:[n.open,n.high,n.low,n.close],uw:s};return void 0!==n.color&&(e.O=n.color),void 0!==n.borderColor&&(e.Bt=n.borderColor),void 0!==n.wickColor&&(e.Zh=n.wickColor),e}function Gs(t,i,n,s,e){const r=d(e)(n),h=Math.max(...r),l=Math.min(...r),a=r[r.length-1],o=[a,h,l,a],_=n,{time:u,color:c}=_;return{re:i,ot:t,Et:o,uw:s,Ue:Us(_,["time","color"]),O:c}}function Js(t){return void 0!==t.Et}function Qs(t,i){return void 0!==i.customValues&&(t.bw=i.customValues),t}function te(t){return(i,n,s,e,r,h)=>function(t,i){return i?i(t):void 0===(n=t).open&&void 0===n.value;var n}(s,h)?Qs({ot:i,re:n,uw:e},s):Qs(t(i,n,s,e,r),s)}function ie(t){return{Candlestick:te(Zs),Bar:te(Ks),Area:te(Ys),Baseline:te(Xs),Histogram:te(qs),Line:te(qs),Custom:te(Gs)}[t]}function ne(t){return{re:0,ww:new Map,oa:t}}function se(t,i){if(void 0!==t&&0!==t.length)return{gw:i.key(t[0].ot),Mw:i.key(t[t.length-1].ot)}}function ee(t){let i;return t.forEach((t=>{void 0===i&&(i=t.uw)})),d(i)}class re{constructor(t){this.xw=new Map,this.Sw=new Map,this.yw=new Map,this.kw=[],this.K_=t}S(){this.xw.clear(),this.Sw.clear(),this.yw.clear(),this.kw=[]}Cw(t,i){let n=0!==this.xw.size,s=!1;const e=this.Sw.get(t);if(void 0!==e)if(1===this.Sw.size)n=!1,s=!0,this.xw.clear();else for(const i of this.kw)i.pointData.ww.delete(t)&&(s=!0);let r=[];if(0!==i.length){const n=i.map((t=>t.time)),e=this.K_.createConverterToInternalObj(i),h=ie(t.tl()),l=t.Ra(),a=t.Da();r=i.map(((i,r)=>{const o=e(i.time),_=this.K_.key(o);let u=this.xw.get(_);void 0===u&&(u=ne(o),this.xw.set(_,u),s=!0);const c=h(o,u.re,i,n[r],l,a);return u.ww.set(t,c),c}))}n&&this.Pw(),this.Tw(t,r);let h=-1;if(s){const t=[];this.xw.forEach((i=>{t.push({timeWeight:0,time:i.oa,pointData:i,originalTime:ee(i.ww)})})),t.sort(((t,i)=>this.K_.key(t.time)-this.K_.key(i.time))),h=this.Rw(t)}return this.Dw(t,h,function(t,i,n){const s=se(t,n),e=se(i,n);if(void 0!==s&&void 0!==e)return{na:s.Mw>=e.Mw&&s.gw>=e.gw}}(this.Sw.get(t),e,this.K_))}hd(t){return this.Cw(t,[])}Ow(t,i){const n=i;!function(t){void 0===t.uw&&(t.uw=t.time)}(n),this.K_.preprocessData(i);const s=this.K_.createConverterToInternalObj([i])(i.time),e=this.yw.get(t);if(void 0!==e&&this.K_.key(s)<this.K_.key(e))throw new Error(`Cannot update oldest data, last time=${e}, new time=${s}`);let r=this.xw.get(this.K_.key(s));const h=void 0===r;void 0===r&&(r=ne(s),this.xw.set(this.K_.key(s),r));const l=ie(t.tl()),a=t.Ra(),o=t.Da(),_=l(s,r.re,i,n.uw,a,o);r.ww.set(t,_),this.Ew(t,_);const u={na:Js(_)};if(!h)return this.Dw(t,-1,u);const c={timeWeight:0,time:r.oa,pointData:r,originalTime:ee(r.ww)},d=Tt(this.kw,this.K_.key(c.time),((t,i)=>this.K_.key(t.time)<i));this.kw.splice(d,0,c);for(let t=d;t<this.kw.length;++t)he(this.kw[t].pointData,t);return this.K_.fillWeightsForPoints(this.kw,d),this.Dw(t,d,u)}Ew(t,i){let n=this.Sw.get(t);void 0===n&&(n=[],this.Sw.set(t,n));const s=0!==n.length?n[n.length-1]:null;null===s||this.K_.key(i.ot)>this.K_.key(s.ot)?Js(i)&&n.push(i):Js(i)?n[n.length-1]=i:n.splice(-1,1),this.yw.set(t,i.ot)}Tw(t,i){0!==i.length?(this.Sw.set(t,i.filter(Js)),this.yw.set(t,i[i.length-1].ot)):(this.Sw.delete(t),this.yw.delete(t))}Pw(){for(const t of this.kw)0===t.pointData.ww.size&&this.xw.delete(this.K_.key(t.time))}Rw(t){let i=-1;for(let n=0;n<this.kw.length&&n<t.length;++n){const s=this.kw[n],e=t[n];if(this.K_.key(s.time)!==this.K_.key(e.time)){i=n;break}e.timeWeight=s.timeWeight,he(e.pointData,n)}if(-1===i&&this.kw.length!==t.length&&(i=Math.min(this.kw.length,t.length)),-1===i)return-1;for(let n=i;n<t.length;++n)he(t[n].pointData,n);return this.K_.fillWeightsForPoints(t,i),this.kw=t,i}Bw(){if(0===this.Sw.size)return null;let t=0;return this.Sw.forEach((i=>{0!==i.length&&(t=Math.max(t,i[i.length-1].re))})),t}Dw(t,i,n){const s={zw:new Map,yt:{Wu:this.Bw()}};if(-1!==i)this.Sw.forEach(((i,e)=>{s.zw.set(e,{Ue:i,Aw:e===t?n:void 0})})),this.Sw.has(t)||s.zw.set(t,{Ue:[],Aw:n}),s.yt.Vw=this.kw,s.yt.Iw=i;else{const i=this.Sw.get(t);s.zw.set(t,{Ue:i||[],Aw:n})}return s}}function he(t,i){t.re=i,t.ww.forEach((t=>{t.re=i}))}function le(t){const i={value:t.Et[3],time:t.uw};return void 0!==t.bw&&(i.customValues=t.bw),i}function ae(t){const i=le(t);return void 0!==t.O&&(i.color=t.O),i}function oe(t){const i=le(t);return void 0!==t.lt&&(i.lineColor=t.lt),void 0!==t.Rs&&(i.topColor=t.Rs),void 0!==t.Ds&&(i.bottomColor=t.Ds),i}function _e(t){const i=le(t);return void 0!==t.De&&(i.topLineColor=t.De),void 0!==t.Oe&&(i.bottomLineColor=t.Oe),void 0!==t.ke&&(i.topFillColor1=t.ke),void 0!==t.Ce&&(i.topFillColor2=t.Ce),void 0!==t.Pe&&(i.bottomFillColor1=t.Pe),void 0!==t.Te&&(i.bottomFillColor2=t.Te),i}function ue(t){const i={open:t.Et[0],high:t.Et[1],low:t.Et[2],close:t.Et[3],time:t.uw};return void 0!==t.bw&&(i.customValues=t.bw),i}function ce(t){const i=ue(t);return void 0!==t.O&&(i.color=t.O),i}function de(t){const i=ue(t),{O:n,Bt:s,Zh:e}=t;return void 0!==n&&(i.color=n),void 0!==s&&(i.borderColor=s),void 0!==e&&(i.wickColor=e),i}function fe(t){return{Area:oe,Line:ae,Baseline:_e,Histogram:ae,Bar:ce,Candlestick:de,Custom:ve}[t]}function ve(t){const i=t.uw;return Object.assign(Object.assign({},t.Ue),{time:i})}const pe={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},me={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},be={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:z,resizePanes:!1,panes:[{stretchFactor:2}]},we={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},ge={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},Me={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:z,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function xe(){return{width:0,height:0,autoSize:!1,layout:be,crosshair:pe,grid:me,overlayPriceScales:Object.assign({},we),leftPriceScale:Object.assign(Object.assign({},we),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},we),{visible:!0}),nonPrimaryPriceScale:Object.assign(Object.assign({},we),{visible:!0}),timeScale:ge,watermark:Me,localization:{locale:rs?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Se{constructor(t,i){this.Ov=t,this.Lw=i}applyOptions(t){this.Ov.$t().Zc(this.Lw,t)}options(){return this.Ni().W()}width(){return rt(this.Lw)?this.Ov.Xb(this.Lw):0}Ni(){return f(this.Ov.$t().Gc(this.Lw)).Ot}}function ye(t,i,n){const s=Us(t,["time","originalTime"]),e=Object.assign({time:i},s);return void 0!==n&&(e.originalTime=n),e}const ke={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class Ce{constructor(t){this.Fh=t}applyOptions(t){this.Fh.Uh(t)}options(){return this.Fh.W()}Nw(){return this.Fh}}class Pe{constructor(t,i,n,s,e){this.Fw=new k,this.Ns=t,this.Ww=i,this.jw=n,this.K_=e,this.Hw=s}S(){this.Fw.S()}priceFormatter(){return this.Ns.Ma()}priceToCoordinate(t){const i=this.Ns.Pt();return null===i?null:this.Ns.Ot().Dt(t,i.Et)}coordinateToPrice(t){const i=this.Ns.Pt();return null===i?null:this.Ns.Ot().bn(t,i.Et)}barsInLogicalRange(t){if(null===t)return null;const i=new Mn(new bn(t.from,t.to))._u(),n=this.Ns.In();if(n.Wi())return null;const s=n.al(i.Bs(),1),e=n.al(i.ci(),-1),r=f(n.rl()),h=f(n.Vn());if(null!==s&&null!==e&&s.re>e.re)return{barsBefore:t.from-r,barsAfter:h-t.to};const l={barsBefore:null===s||s.re===r?t.from-r:s.re-r,barsAfter:null===e||e.re===h?h-t.to:h-e.re};return null!==s&&null!==e&&(l.from=s.uw,l.to=e.uw),l}setData(t){this.K_,this.Ns.tl(),this.Ww.$w(this.Ns,t),this.Uw("full")}update(t){this.Ns.tl(),this.Ww.qw(this.Ns,t),this.Uw("update")}dataByIndex(t,i){const n=this.Ns.In().al(t,i);if(null===n)return null;return fe(this.seriesType())(n)}data(){const t=fe(this.seriesType());return this.Ns.In().se().map((i=>t(i)))}subscribeDataChanged(t){this.Fw.l(t)}unsubscribeDataChanged(t){this.Fw.v(t)}setMarkers(t){this.K_;const i=t.map((t=>ye(t,this.K_.convertHorzItemToInternal(t.time),t.time)));this.Ns.ea(i)}markers(){return this.Ns.ra().map((t=>ye(t,t.originalTime,void 0)))}applyOptions(t){this.Ns.Uh(t)}options(){return O(this.Ns.W())}priceScale(){return this.jw.priceScale(this.Ns.Ot().ba())}createPriceLine(t){const i=C(O(ke),t),n=this.Ns.ha(i);return new Ce(n)}removePriceLine(t){this.Ns.la(t.Nw())}seriesType(){return this.Ns.tl()}attachPrimitive(t){this.Ns.Pa(t),t.attached&&t.attached({chart:this.Hw,series:this,requestUpdate:()=>this.Ns.$t().Gl()})}detachPrimitive(t){this.Ns.Ta(t),t.detached&&t.detached()}Uw(t){this.Fw.M()&&this.Fw.m(t)}}class Te{constructor(t,i,n){this.Yw=new k,this.gu=new k,this.ib=new k,this.qi=t,this.Cl=t.yt(),this.Vb=i,this.Cl.rc().l(this.Xw.bind(this)),this.Cl.hc().l(this.Kw.bind(this)),this.Vb.ob().l(this.Zw.bind(this)),this.K_=n}S(){this.Cl.rc().p(this),this.Cl.hc().p(this),this.Vb.ob().p(this),this.Yw.S(),this.gu.S(),this.ib.S()}scrollPosition(){return this.Cl.qu()}scrollToPosition(t,i){i?this.Cl.nc(t,1e3):this.qi.ts(t)}scrollToRealTime(){this.Cl.tc()}getVisibleRange(){const t=this.Cl.zu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const i={from:this.K_.convertHorzItemToInternal(t.from),to:this.K_.convertHorzItemToInternal(t.to)},n=this.Cl.Lu(i);this.qi.Cd(n)}getVisibleLogicalRange(){const t=this.Cl.Bu();return null===t?null:{from:t.Bs(),to:t.ci()}}setVisibleLogicalRange(t){c(t.from<=t.to,"The from index cannot be after the to index."),this.qi.Cd(t)}resetTimeScale(){this.qi.Jn()}fitContent(){this.qi.oc()}logicalToCoordinate(t){const i=this.qi.yt();return i.Wi()?null:i.Vt(t)}coordinateToLogical(t){return this.Cl.Wi()?null:this.Cl.ju(t)}timeToCoordinate(t){const i=this.K_.convertHorzItemToInternal(t),n=this.Cl.Ba(i,!1);return null===n?null:this.Cl.Vt(n)}coordinateToTime(t){const i=this.qi.yt(),n=i.ju(t),s=i.Yi(n);return null===s?null:s.originalTime}width(){return this.Vb.qv().width}height(){return this.Vb.qv().height}subscribeVisibleTimeRangeChange(t){this.Yw.l(t)}unsubscribeVisibleTimeRangeChange(t){this.Yw.v(t)}subscribeVisibleLogicalRangeChange(t){this.gu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.gu.v(t)}subscribeSizeChange(t){this.ib.l(t)}unsubscribeSizeChange(t){this.ib.v(t)}applyOptions(t){this.Cl.Uh(t)}options(){return Object.assign(Object.assign({},O(this.Cl.W())),{barSpacing:this.Cl.ae()})}Xw(){this.Yw.M()&&this.Yw.m(this.getVisibleRange())}Kw(){this.gu.M()&&this.gu.m(this.getVisibleLogicalRange())}Zw(t){this.ib.m(t.width,t.height)}}function Re(t){if(void 0===t||"custom"===t.type)return;const i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;let i=0;for(;i<8;i++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}function De(t){return function(t){if(D(t.handleScale)){const i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=t.handleScale;D(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),D(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const i=t.handleScroll;D(i)&&(t.handleScroll={horzTouchDrag:i,vertTouchDrag:i,mouseWheel:i,pressedMouseMove:i})}(t),t}class Oe{constructor(t,i,n){this.Gw=new Map,this.Jw=new Map,this.Qw=new k,this.tg=new k,this.ig=new k,this.ng=new k,this.sg=new k,this.eg=new re(i);const s=void 0===n?O(xe()):C(O(xe()),De(n));this.K_=i,this.Ov=new Hs(t,s,i),this.Ov.Dm().l((t=>{this.Qw.M()&&this.Qw.m(this.rg(t()))}),this),this.Ov.Om().l((t=>{this.tg.M()&&this.tg.m(this.rg(t()))}),this),this.Ov.nd().l((t=>{this.sg.M()&&this.sg.m(this.rg(t()))}),this),this.Ov.Em().l((t=>{this.ig.M()&&this.ig.m(this.rg(t()))}),this),this.Ov.Bm().l((t=>{this.ng.M()&&this.ng.m(this.rg(t()))}),this);const e=this.Ov.$t();this.hg=new Te(e,this.Ov.Wb(),this.K_)}remove(){this.Ov.Dm().p(this),this.Ov.Om().p(this),this.Ov.nd().p(this),this.Ov.Em().p(this),this.Ov.Bm().p(this),this.hg.S(),this.Ov.S(),this.Gw.clear(),this.Jw.clear(),this.Qw.S(),this.tg.S(),this.sg.S(),this.ig.S(),this.ng.S(),this.eg.S()}resize(t,i,n){this.autoSizeActive()||this.Ov.Lb(t,i,n)}addCustomSeries(t,i){const n=v(t),s=Object.assign(Object.assign({},h),n.defaultOptions());return this.lg("Custom",s,i,n)}addAreaSeries(t){return this.lg("Area",s,t)}addBaselineSeries(t){return this.lg("Baseline",e,t)}addBarSeries(t){return this.lg("Bar",i,t)}addCandlestickSeries(i={}){return function(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(i),this.lg("Candlestick",t,i)}addHistogramSeries(t){return this.lg("Histogram",r,t)}addLineSeries(t){return this.lg("Line",n,t)}removeSeries(t){const i=d(this.Gw.get(t)),n=this.eg.hd(i);this.Ov.$t().hd(i),this.ag(n),this.Gw.delete(t),this.Jw.delete(i)}$w(t,i){this.ag(this.eg.Cw(t,i))}qw(t,i){this.ag(this.eg.Ow(t,i))}subscribeClick(t){this.Qw.l(t)}unsubscribeClick(t){this.Qw.v(t)}subscribeCrosshairMove(t){this.sg.l(t)}unsubscribeCrosshairMove(t){this.sg.v(t)}subscribeDblClick(t){this.tg.l(t)}unsubscribeDblClick(t){this.tg.v(t)}subscribeMouseDown(t){this.ig.l(t)}unsubscribeMouseDown(t){this.ig.v(t)}subscribeMouseUp(t){this.ng.l(t)}unsubscribeMouseUp(t){this.ng.v(t)}priceScale(t){return new Se(this.Ov,t)}timeScale(){return this.hg}applyOptions(t){this.Ov.Uh(De(t))}options(){return this.Ov.W()}takeScreenshot(){return this.Ov.qb()}autoSizeActive(){return this.Ov.Gb()}chartElement(){return this.Ov.Jb()}paneSize(){const t=this.Ov.tw();return{height:t.height,width:t.width}}setCrosshairPosition(t,i,n){const s=this.Gw.get(n);if(void 0===s)return;const e=this.Ov.$t().vr(s);null!==e&&this.Ov.$t().wd(t,i,e)}clearCrosshairPosition(){this.Ov.$t().gd(!0)}removePane(t){this.Ov.$t().rd(t)}swapPane(t,i){this.Ov.$t().ld(t,i)}getPaneElements(){return this.Ov.Bv().map((t=>t.Wm()))}lg(t,i,n={},s){Re(n.priceFormat);const e=C(O(l),O(i),n),r=this.Ov.$t().Sd(t,e,s),h=new Pe(r,this,this,this,this.K_);return this.Gw.set(h,r),this.Jw.set(r,h),h}ag(t){const i=this.Ov.$t();i.Md(t.yt.Wu,t.yt.Vw,t.yt.Iw),t.zw.forEach(((t,i)=>i.J(t.Ue,t.Aw))),i.$u()}og(t){return d(this.Jw.get(t))}rg(t){const i=new Map;t.fw.forEach(((t,n)=>{const s=n.tl(),e=fe(s)(t);if("Custom"!==s)c(function(t){return void 0!==t.open||void 0!==t.value}(e));else{const t=n.Da();c(!t||!1===t(e))}i.set(this.og(n),e)}));const n=void 0!==t.dw&&this.Jw.has(t.dw)?this.og(t.dw):void 0;return{time:t.uw,logical:t.re,point:t.cw,paneIndex:t.$m,hoveredSeries:n,hoveredObjectId:t.pw,seriesData:i,sourceEvent:t.mw}}}function Ee(t,i,n){let s;if(R(t)){const i=document.getElementById(t);c(null!==i,`Cannot find element in DOM with id=${t}`),s=i}else s=t;const e=new Oe(s,i,n);return i.setOptions(e.options()),e}function Be(t,i){return Ee(t,new Gn,Gn.Ud(i))}function ze(){return Gn}const Ae=Object.assign(Object.assign({},l),h);function Ve(){return"4.1.7-dev+202407091649"}export{On as ColorType,st as CrosshairMode,Rn as LastPriceAnimationMode,o as LineStyle,a as LineType,Ei as MismatchDirection,Dn as PriceLineSource,un as PriceScaleMode,En as TickMarkType,Tn as TrackingModeExitMode,Be as createChart,Ee as createChartEx,Ae as customSeriesDefaultOptions,ze as defaultHorzScaleBehavior,zn as isBusinessDay,An as isUTCTimestamp,Ve as version};
